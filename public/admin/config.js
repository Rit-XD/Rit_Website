import{$ as j,$a as x,$c as E,A as S,Ac as k,Bc as T,Pc as ct,Qc as mt,R as F,Rc as pt,Sc as lt,Tc as dt,Uc as ht,Vc as ft,W as s,Wc as ut,Xc as yt,Y as y,Yc as wt,Zc as gt,_c as xt,aa as z,ad as vt,b as B,ba as d,bb as v,bd as N,c as D,ca as U,cb as $,cd as bt,d as o,da as w,db as G,dd as kt,ea as W,ed as t,fa as l,fb as b,gc as q,ha as _,ia as g,pc as R,qc as V,sc as h,tc as Q}from"./chunk-BI6UOI6E.js";o();var H=D(S(),1);o();var n={};B(n,{Root:()=>W,Workspace:()=>_,check:()=>lt,code:()=>ut,config:()=>h,date:()=>yt,document:()=>P,entry:()=>ct,file:()=>mt,image:()=>pt,json:()=>wt,link:()=>ht,list:()=>gt,media:()=>M,meta:()=>y,metadata:()=>E,number:()=>vt,object:()=>xt,page:()=>x,path:()=>N,richText:()=>bt,root:()=>l,schema:()=>w,select:()=>ft,snippet:()=>v,tab:()=>k,tabs:()=>T,text:()=>R,track:()=>b,type:()=>d,url:()=>dt,view:()=>kt,workspace:()=>g});o();o();o();o();o();var I;(r=>{async function a(i,m){let p=await Promise.all(m.map(st=>st(i)));return(await i.connection()).mutate(p.flat())}r.commit=a})(I||(I={}));var J=class K{static Data=Symbol.for("@alinea/Operation.Data");constructor(a){this[K.Data]=a}typeName(a,i){let p=U.typeNames(a.schema).get(i);if(!p)throw new Error(`Type "${j.label(i)}" not found in Schema`);return p}};var f=new WeakMap,C=class extends ${graph;config;constructor(r){let a=h(r),i={resolve:m=>this.resolver().then(p=>p.resolve(m))};super(a,i),this.config=a,this.graph=new G(a,i)}commit(...r){return I.commit(this,r.map(a=>a[J.Data]).flat())}#t(r){for(let[a,i]of F(r.workspaces)){if(f.has(i))throw new Error(`Workspace is already attached to a CMS: ${a}`);f.set(i,this);for(let[m,p]of F(i)){if(f.has(p))throw new Error(`Root is already attached to a CMS: ${m}`);f.set(p,this)}}}get schema(){return this.config.schema}get workspaces(){return this.config.workspaces}};(r=>{function a(i){let m=f.get(i);if(!m)throw new Error(`No CMS attached to ${i}`);return m}r.instanceFor=a})(C||(C={}));var X=class extends C{async resolver(){throw new Error("Not implemented")}async connection(){throw new Error("Not implemented")}};o();var L=D(S(),1);function Y(r){return(0,L.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...r,children:(0,L.jsx)("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81c1.66 0 3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65c0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})})}var u;(r=>{r.title=R("Title",{required:!0,width:.5}),r.path=N("Path",{required:!0,width:.5}),r.metadata=E()})(u||(u={}));function P(r,a){let{definition:i,options:m}=z(a);return d(r,{...m,fields:{...T(k("Document",{icon:Q,fields:{title:u.title,path:u.path,...i}}),k("Metadata",{icon:Y,fields:{metadata:u.metadata}}))}})}o();o();function Z(r={}){return l("Media",{contains:["MediaLibrary"],isMediaRoot:!0,entries:{...r}})}function M(r={}){return l("Media",{icon:V,contains:["MediaLibrary"],view:q,isMediaRoot:!0,entries:{...Z(r)}})}var e={};B(e,{create:()=>h,document:()=>P,media:()=>M,meta:()=>y,page:()=>x,root:()=>l,schema:()=>w,snippet:()=>v,track:()=>b,type:()=>d,workspace:()=>g});o();o();function O(r){return new X(r)}var A=D(S(),1);o();function It(r){return(0,H.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...r,children:(0,H.jsx)("path",{fill:"currentColor",d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23a.987.987 0 0 0-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41a7.343 7.343 0 0 0 0 1.35l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68zm-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5s3.5 1.57 3.5 3.5s-1.57 3.5-3.5 3.5z"})})}var tt=n.type("Footer",{fields:{title:n.text("Title",{hidden:!0,readOnly:!0}),path:n.path("Path",{hidden:!0,readOnly:!0}),navigation:t.list("Navigation",{schema:{Item:e.type("Item",{fields:{title:t.link("Title",{fields:{label:t.text("Label")}}),links:n.link.multiple("Links",{fields:{label:n.text("Label")}})}})}}),links:n.link.multiple("Links",{fields:{label:n.text("Label")}})}}),et=n.type("Header",{fields:{title:n.text("Title",{hidden:!0,readOnly:!0}),path:n.path("Path",{hidden:!0,readOnly:!0}),navigation:n.link.multiple("Navigation",{fields:{label:n.text("Label")}})}}),rt=e.document("Not found",{fields:{path:t.path("Path",{readOnly:!0,width:.5}),text:t.richText("Text"),button:t.entry("Button",{condition:s.workspace.is("main").and(s.root.is("pages")),fields:{label:t.text("Label")}})}}),Ct=e.type("Advantages",{fields:{title:t.text("Title",{width:.5}),image:t.image("Image",{width:.5}),advantages:t.list("Advantages",{schema:{Advantage:e.type("Advantage",{fields:{icon:t.image("Icon",{width:.5}),description:t.text("Description",{multiline:!0,width:.5})}})}})}}),Pt=e.type("Cta",{fields:{title:t.text("Title",{multiline:!0}),description:t.text("Description",{multiline:!0}),button:t.entry("Button",{condition:s.workspace.is("main").and(s.root.is("pages")),fields:{label:t.text("Label")}}),image:t.image("Image",{shared:!0})}}),Mt=e.type("Partners",{fields:{title:t.text("Title",{width:.5}),image:t.image("Image",{width:.5}),partners:t.list("Partners",{schema:{Partners:e.type("Partner",{fields:{icon:t.image("Icon",{width:.5}),description:t.text("Description",{multiline:!0,width:.5})}})}})}}),Dt=e.type("Splash",{fields:{image:t.image("Image"),title:t.text("Title",{multiline:!0}),text:t.text("Text"),button_left:t.entry("Button",{width:.5,condition:s.workspace.is("main").and(s.root.is("pages")),fields:{label:t.text("Label")}}),button_right:t.entry("Button",{width:.5,condition:s.workspace.is("main").and(s.root.is("pages")),fields:{label:t.text("Label")}})}});function St(r){return(0,A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...r,children:(0,A.jsx)("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 14H8c-.55 0-1-.45-1-1s.45-1 1-1h5c.55 0 1 .45 1 1s-.45 1-1 1zm3-4H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm0-4H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"})})}var Ft=e.type("Text",{icon:St,fields:{text:t.richText("Text")}}),it=e.schema({types:{Text:Ft,Partners:Mt,Splash:Dt,Advantages:Ct,Cta:Pt}}),nt=t.object("Hero",{fields:{image:t.image("Image",{shared:!0}),title:t.text("Title",{multiline:!0}),button:t.entry("Button",{condition:s.workspace.is("main").and(s.root.is("pages")),fields:{label:t.text("Label")}})}}),ot=e.document("Home",{fields:{title:t.text("Title",{readOnly:!0}),path:t.path("Path",{readOnly:!0,hidden:!0,width:.5}),...t.tabs(t.tab("Hero",{fields:{hero:nt}}),t.tab("Blocks",{fields:{blocks:t.list("Blocks",{schema:it})}}))}}),Rt=e.document("Page",{...t.tabs(t.tab("Hero",{fields:{hero:nt}}),t.tab("Blocks",{fields:{blocks:t.list("Blocks",{schema:it})}}))}),at=["nl","en"],hr=O({dashboard:{dashboardUrl:"/admin.html",handlerUrl:"/api/cms",staticFile:"public/admin.html"},preview:"http://localhost:3000/api/preview",schema:{Home:ot,Page:Rt,Header:et,Footer:tt,NotFound:rt},workspaces:{main:e.workspace("Rit",{color:"#ED6A01",source:"content",mediaDir:"public",roots:{pages:e.root("Pages",{i18n:{locales:at},contains:["Page"],entries:{index:e.page(ot({title:"Home"}))}}),general:e.root("General",{i18n:{locales:at},icon:It,contains:["Header","Footer","NotFound"],entries:{header:e.page(et({title:"Header"})),footer:e.page(tt({title:"Footer"})),"not-found":e.page(rt({title:"Page not found"}))}}),media:e.media()}})}});export{hr as cms};
