import{$ as h,$a as g,$c as gt,A as D,Ac as R,Mc as it,Nc as nt,Oc as st,P as S,Pc as ct,Qc as mt,Rc as pt,Sc as lt,Tc as ht,U as p,Uc as T,Vc as dt,W as u,Wc as N,Xc as ft,Yc as ut,Za as w,Zc as yt,_ as A,_a as U,_b as $,_c as wt,aa as j,ad as xt,b as B,ba as l,bb as x,bd as t,c as M,cb as W,d as e,da as z,db as _,ea as y,fb as v,fc as G,pc as F,qc as q,sc as d,zc as b}from"./chunk-VTLY3ZQF.js";e();var L=M(D(),1);e();var n={};B(n,{Root:()=>j,Workspace:()=>z,check:()=>it,code:()=>ct,config:()=>d,date:()=>mt,document:()=>I,entry:()=>yt,file:()=>gt,image:()=>wt,json:()=>pt,link:()=>nt,list:()=>lt,media:()=>C,meta:()=>u,metadata:()=>T,number:()=>dt,object:()=>ht,page:()=>w,path:()=>N,richText:()=>ft,root:()=>l,schema:()=>g,select:()=>st,snippet:()=>x,tab:()=>b,tabs:()=>R,text:()=>F,track:()=>v,type:()=>h,url:()=>xt,view:()=>ut,workspace:()=>y});e();e();e();e();e();var P;(o=>{async function a(i,c){let m=await Promise.all(c.map(at=>at(i)));return(await i.connection()).mutate(m.flat())}o.commit=a})(P||(P={}));var V=class Q{static Data=Symbol.for("@alinea/Operation.Data");constructor(a){this[Q.Data]=a}typeName(a,i){let m=U.typeNames(a.schema).get(i);if(!m)throw new Error(`Type not found: ${i}`);return m}};var f=new WeakMap,k=class extends W{graph;config;constructor(o){let a=d(o),i={resolve:c=>this.resolver().then(m=>m.resolve(c))};super(a,i),this.config=a,this.graph=new _(a,i)}commit(...o){return P.commit(this,o.map(a=>a[V.Data]).flat())}#t(o){for(let[a,i]of S(o.workspaces)){if(f.has(i))throw new Error(`Workspace is already attached to a CMS: ${a}`);f.set(i,this);for(let[c,m]of S(i)){if(f.has(m))throw new Error(`Root is already attached to a CMS: ${c}`);f.set(m,this)}}}get schema(){return this.config.schema}get workspaces(){return this.config.workspaces}};(o=>{function a(i){let c=f.get(i);if(!c)throw new Error(`No CMS attached to ${i}`);return c}o.instanceFor=a})(k||(k={}));var J=class extends k{async resolver(){throw new Error("Not implemented")}async connection(){throw new Error("Not implemented")}};e();var E=M(D(),1);function K(o){return(0,E.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...o,children:(0,E.jsx)("path",{fill:"currentColor",d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81c1.66 0 3-1.34 3-3s-1.34-3-3-3s-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65c0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})})}function I(o,a){let{definition:i,options:c}=A(a);return h(o,{...c,fields:{...R(b("Document",{icon:$,fields:{title:F("Title",{required:!0,width:.5}),path:N("Path",{required:!0,width:.5}),...i}}),b("Metadata",{icon:K,fields:{metadata:T()}}))}})}e();e();function X(o={}){return l("Media",{contains:["MediaLibrary"],isMediaRoot:!0,entries:{...o}})}function C(o={}){return l("Media",{icon:q,contains:["MediaLibrary"],view:G,isMediaRoot:!0,entries:{...X(o)}})}var r={};B(r,{create:()=>d,document:()=>I,media:()=>C,meta:()=>u,page:()=>w,root:()=>l,schema:()=>g,snippet:()=>x,track:()=>v,type:()=>h,workspace:()=>y});e();e();function O(o){return new J(o)}var H=M(D(),1);e();function vt(o){return(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...o,children:(0,L.jsx)("path",{fill:"currentColor",d:"M19.5 12c0-.23-.01-.45-.03-.68l1.86-1.41c.4-.3.51-.86.26-1.3l-1.87-3.23a.987.987 0 0 0-1.25-.42l-2.15.91c-.37-.26-.76-.49-1.17-.68l-.29-2.31c-.06-.5-.49-.88-.99-.88h-3.73c-.51 0-.94.38-1 .88l-.29 2.31c-.41.19-.8.42-1.17.68l-2.15-.91c-.46-.2-1-.02-1.25.42L2.41 8.62c-.25.44-.14.99.26 1.3l1.86 1.41a7.343 7.343 0 0 0 0 1.35l-1.86 1.41c-.4.3-.51.86-.26 1.3l1.87 3.23c.25.44.79.62 1.25.42l2.15-.91c.37.26.76.49 1.17.68l.29 2.31c.06.5.49.88.99.88h3.73c.5 0 .93-.38.99-.88l.29-2.31c.41-.19.8-.42 1.17-.68l2.15.91c.46.2 1 .02 1.25-.42l1.87-3.23c.25-.44.14-.99-.26-1.3l-1.86-1.41c.03-.23.04-.45.04-.68zm-7.46 3.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5s3.5 1.57 3.5 3.5s-1.57 3.5-3.5 3.5z"})})}var Y=n.type("Footer",{fields:{title:n.text("Title",{hidden:!0,readOnly:!0}),path:n.path("Path",{hidden:!0,readOnly:!0}),description:n.richText("Description"),navigation:n.link.multiple("Navigation",{fields:{label:n.text("Label")}}),links:n.link.multiple("Links",{fields:{label:n.text("Label")}})}}),Z=n.type("Header",{fields:{title:n.text("Title",{hidden:!0,readOnly:!0}),path:n.path("Path",{hidden:!0,readOnly:!0}),navigation:n.link.multiple("Navigation",{fields:{label:n.text("Label")}})}}),tt=r.document("Not found",{fields:{path:t.path("Path",{readOnly:!0,width:.5}),text:t.richText("Text"),button:t.entry("Button",{condition:p.workspace.is("main").and(p.root.is("pages")),fields:{label:t.text("Label")}})}}),bt=r.type("Partners",{fields:{title:t.text("Title"),subtitle_left:t.text("Subtitle left",{width:.5}),subtitle_right:t.text("Subtitle right",{width:.5}),partners:t.list("Partners",{schema:{Partner:r.type("Partner",{fields:{position:t.select("Position",{options:{left:"Left",right:"Right"},width:.25}),link:t.link("Link",{width:.75}),image:t.image("Image",{width:.5}),title:t.text("Title",{multiline:!0,width:.5})}})}})}});function Pt(o){return(0,H.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...o,children:(0,H.jsx)("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-6 14H8c-.55 0-1-.45-1-1s.45-1 1-1h5c.55 0 1 .45 1 1s-.45 1-1 1zm3-4H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1zm0-4H8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1z"})})}var kt=r.type("Text",{icon:Pt,fields:{text:t.richText("Text")}}),It=r.type("Splash",{fields:{title:t.text("Title",{multiline:!0}),text:t.text("Text"),button_left:t.entry("Button",{width:.5,condition:p.workspace.is("main").and(p.root.is("pages")),fields:{label:t.text("Label")}}),button_right:t.entry("Button",{width:.5,condition:p.workspace.is("main").and(p.root.is("pages")),fields:{label:t.text("Label")}})}}),ot=r.schema({types:{Text:kt,Partners:bt,Splash:It}}),Ct=t.object("Hero",{fields:{title:t.text("Title",{multiline:!0}),image:t.image("Image",{shared:!0})}}),et=r.document("Home",{fields:{title:t.text("Title",{readOnly:!0}),path:t.path("Path",{readOnly:!0,hidden:!0,width:.5}),...t.tabs(t.tab("Hero",{fields:{hero:Ct}}),t.tab("Blocks",{fields:{blocks:t.list("Blocks",{schema:ot})}}))}}),Mt=r.document("Page",{fields:{blocks:t.list("Blocks",{schema:ot})}}),rt=["nl","en"],ar=O({dashboard:{dashboardUrl:"/admin.html",handlerUrl:"/api/cms",staticFile:"public/admin.html"},preview:"http://localhost:3000/api/preview",schema:{Home:et,Page:Mt,Header:Z,Footer:Y,NotFound:tt},workspaces:{main:r.workspace("Rit",{color:"#13bc95",source:"content",mediaDir:"public",roots:{pages:r.root("Pages",{i18n:{locales:rt},contains:["Page"],entries:{index:r.page(et({title:"Homepage"}))}}),general:r.root("General",{i18n:{locales:rt},icon:vt,contains:["Header","Footer","NotFound"],entries:{header:r.page(Z({title:"Header"})),footer:r.page(Y({title:"Footer"})),"not-found":r.page(tt({title:"Page not found"}))}}),media:r.media()}})}});export{ar as cms};
