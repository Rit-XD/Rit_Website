import{$ as ne,$b as hn,A as j,Aa as Gr,Ab as Lr,B as V,Ba as we,Bb as tn,C as Q,Ca as Te,Cb as Ca,Cc as Tn,D as G,Da as Ai,Db as Fa,Dc as Pn,E as ue,Ea as Fe,Eb as nn,Ec as Dn,F as $,Fa as zi,Fb as on,Fc as Rn,G as Cr,Ga as Ke,Gb as ln,Gc as Cn,H as Ye,Ha as ka,Hb as _e,Hc as Fn,I as ft,Ia,Ib as de,Ic as Et,J as vr,Ja as Ni,Jb as sn,Jc as Mn,K as me,Ka as ji,Kb as Ma,Kc as _n,L as Fr,La as Qe,Lb as _a,Lc as Ln,M as pt,Ma as xr,Mb as La,Mc as St,N as Si,Na as Oi,Nb as Oe,Nc as Bn,O as br,Oa as Hi,Ob as He,Oc as An,P as Ti,Pa as kr,Pb as dn,Pc as Tt,Q as va,Qa as kt,Qb as Ba,R as Ve,Ra as Ui,Rb as cn,S as Mr,Sa as Vi,Sb as un,T as gt,Ta as Jr,Tb as rr,U as Wr,Ua as ye,Ub as ar,V as vt,Va as Ki,Vb as Pe,Vc as Nr,W as M,Wa as $i,Wb as Aa,X as je,Xa as Wi,Xb as Sr,Ya as Ea,Yb as za,Z as bt,Za as qi,Zb as Na,_ as Pi,_a as Sa,_b as mn,a as Fl,ab as Gi,ac as fn,ba as Di,bc as pn,c as P,ca as wt,cc as Br,d as x,dc as gn,e as pi,ea as ba,eb as Ji,ec as vn,f as fa,fb as It,fc as Le,g as gi,ga as Ri,gb as Zi,h as vi,ha as qr,hb as Yi,hc as ja,i as bi,ib as Xi,ic as bn,j as wi,ja as Ci,jb as er,jc as wn,k as te,ka as Fi,kb as Ta,kc as yn,l as q,la as Mi,lb as Pa,lc as Qr,m as N,ma as wa,mb as Qi,mc as xn,n as ie,na as _i,nb as en,nc as Oa,o as Kr,oa as wr,ob as Ir,oc as Ha,p as yi,pa as yt,pb as Da,pc as kn,q as xi,qa as yr,qb as Er,r as pa,ra as ya,rb as xe,rc as Ar,s as mt,sa as Li,sb as Ra,t as ki,ta as J,tb as rn,tc as Ua,u as ga,ua as Bi,ub as Me,uc as zr,v as Ii,va as Ce,vb as an,vc as In,w as Ei,wa as Xe,wb as _r,wc as En,x as ht,xa,xb as Zr,xc as Va,y as gr,ya as xt,yb as Yr,yc as Ka,z as $r,za as be,zb as Xr,zc as Sn}from"./chunk-BI6UOI6E.js";var Tl=Fl(ui=>{"use strict";x();var Sl=yi();ui.createRoot=Sl.createRoot,ui.hydrateRoot=Sl.hydrateRoot;var uv});x();x();x();var Be=Uint8Array,ke=Uint16Array,Ft=Int32Array,Mt=new Be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_t=new Be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zn=new Be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hn=function(e,r){for(var a=new ke(31),n=0;n<31;++n)a[n]=r+=1<<e[n-1];for(var c=new Ft(a[30]),n=1;n<30;++n)for(var s=a[n];s<a[n+1];++s)c[s]=s-a[n]<<5|n;return{b:a,r:c}},Un=Hn(Mt,2),Ml=Un.b,Dt=Un.r;Ml[28]=258,Dt[258]=28;var Vn=Hn(_t,0),tc=Vn.b,Nn=Vn.r,Rt=new ke(32768);for(W=0;W<32768;++W)$e=(W&43690)>>1|(W&21845)<<1,$e=($e&52428)>>2|($e&13107)<<2,$e=($e&61680)>>4|($e&3855)<<4,Rt[W]=(($e&65280)>>8|($e&255)<<8)>>1;var $e,W,aa=function(e,r,a){for(var n=e.length,c=0,s=new ke(r);c<n;++c)e[c]&&++s[e[c]-1];var t=new ke(r);for(c=1;c<r;++c)t[c]=t[c-1]+s[c-1]<<1;var i;if(a){i=new ke(1<<r);var l=15-r;for(c=0;c<n;++c)if(e[c])for(var d=c<<4|e[c],o=r-e[c],u=t[e[c]-1]++<<o,m=u|(1<<o)-1;u<=m;++u)i[Rt[u]>>l]=d}else for(i=new ke(n),c=0;c<n;++c)e[c]&&(i[c]=Rt[t[e[c]-1]++]>>15-e[c]);return i},Tr=new Be(288);for(W=0;W<144;++W)Tr[W]=8;var W;for(W=144;W<256;++W)Tr[W]=9;var W;for(W=256;W<280;++W)Tr[W]=7;var W;for(W=280;W<288;++W)Tr[W]=8;var W,$a=new Be(32);for(W=0;W<32;++W)$a[W]=5;var W,_l=aa(Tr,9,0);var Ll=aa($a,5,0);var Kn=function(e){return(e+7)/8|0},Bl=function(e,r,a){(r==null||r<0)&&(r=0),(a==null||a>e.length)&&(a=e.length);var n=new Be(a-r);return n.set(e.subarray(r,a)),n};var We=function(e,r,a){a<<=r&7;var n=r/8|0;e[n]|=a,e[n+1]|=a>>8},ea=function(e,r,a){a<<=r&7;var n=r/8|0;e[n]|=a,e[n+1]|=a>>8,e[n+2]|=a>>16},Pt=function(e,r){for(var a=[],n=0;n<e.length;++n)e[n]&&a.push({s:n,f:e[n]});var c=a.length,s=a.slice();if(!c)return{t:Wn,l:0};if(c==1){var t=new Be(a[0].s+1);return t[a[0].s]=1,{t,l:1}}a.sort(function(R,_){return R.f-_.f}),a.push({s:-1,f:25001});var i=a[0],l=a[1],d=0,o=1,u=2;for(a[0]={s:-1,f:i.f+l.f,l:i,r:l};o!=c-1;)i=a[a[d].f<a[u].f?d++:u++],l=a[d!=o&&a[d].f<a[u].f?d++:u++],a[o++]={s:-1,f:i.f+l.f,l:i,r:l};for(var m=s[0].s,n=1;n<c;++n)s[n].s>m&&(m=s[n].s);var h=new ke(m+1),f=Ct(a[o-1],h,0);if(f>r){var n=0,p=0,g=f-r,y=1<<g;for(s.sort(function(_,v){return h[v.s]-h[_.s]||_.f-v.f});n<c;++n){var k=s[n].s;if(h[k]>r)p+=y-(1<<f-h[k]),h[k]=r;else break}for(p>>=g;p>0;){var E=s[n].s;h[E]<r?p-=1<<r-h[E]++-1:++n}for(;n>=0&&p;--n){var D=s[n].s;h[D]==r&&(--h[D],++p)}f=r}return{t:new Be(h),l:f}},Ct=function(e,r,a){return e.s==-1?Math.max(Ct(e.l,r,a+1),Ct(e.r,r,a+1)):r[e.s]=a},jn=function(e){for(var r=e.length;r&&!e[--r];);for(var a=new ke(++r),n=0,c=e[0],s=1,t=function(l){a[n++]=l},i=1;i<=r;++i)if(e[i]==c&&i!=r)++s;else{if(!c&&s>2){for(;s>138;s-=138)t(32754);s>2&&(t(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(t(c),--s;s>6;s-=6)t(8304);s>2&&(t(s-3<<5|8208),s=0)}for(;s--;)t(c);s=1,c=e[i]}return{c:a.subarray(0,n),n:r}},ra=function(e,r){for(var a=0,n=0;n<r.length;++n)a+=e[n]*r[n];return a},$n=function(e,r,a){var n=a.length,c=Kn(r+2);e[c]=n&255,e[c+1]=n>>8,e[c+2]=e[c]^255,e[c+3]=e[c+1]^255;for(var s=0;s<n;++s)e[c+s+4]=a[s];return(c+4+n)*8},On=function(e,r,a,n,c,s,t,i,l,d,o){We(r,o++,a),++c[256];for(var u=Pt(c,15),m=u.t,h=u.l,f=Pt(s,15),p=f.t,g=f.l,y=jn(m),k=y.c,E=y.n,D=jn(p),R=D.c,_=D.n,v=new ke(19),b=0;b<k.length;++b)++v[k[b]&31];for(var b=0;b<R.length;++b)++v[R[b]&31];for(var w=Pt(v,7),I=w.t,T=w.l,S=19;S>4&&!I[zn[S-1]];--S);var C=d+5<<3,F=ra(c,Tr)+ra(s,$a)+t,U=ra(c,m)+ra(s,p)+t+14+3*S+ra(v,I)+2*v[16]+3*v[17]+7*v[18];if(l>=0&&C<=F&&C<=U)return $n(r,o,e.subarray(l,l+d));var O,H,ae,X;if(We(r,o,1+(U<F)),o+=2,U<F){O=aa(m,h,0),H=m,ae=aa(p,g,0),X=p;var ve=aa(I,T,0);We(r,o,E-257),We(r,o+5,_-1),We(r,o+10,S-4),o+=14;for(var b=0;b<S;++b)We(r,o+3*b,I[zn[b]]);o+=3*S;for(var ce=[k,R],Ee=0;Ee<2;++Ee)for(var Ze=ce[Ee],b=0;b<Ze.length;++b){var Se=Ze[b]&31;We(r,o,ve[Se]),o+=I[Se],Se>15&&(We(r,o,Ze[b]>>5&127),o+=Ze[b]>>12)}}else O=_l,H=Tr,ae=Ll,X=$a;for(var b=0;b<i;++b){var le=n[b];if(le>255){var Se=le>>18&31;ea(r,o,O[Se+257]),o+=H[Se+257],Se>7&&(We(r,o,le>>23&31),o+=Mt[Se]);var Ue=le&31;ea(r,o,ae[Ue]),o+=X[Ue],Ue>3&&(ea(r,o,le>>5&8191),o+=_t[Ue])}else ea(r,o,O[le]),o+=H[le]}return ea(r,o,O[256]),o+H[256]},Al=new Ft([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Wn=new Be(0),zl=function(e,r,a,n,c,s){var t=s.z||e.length,i=new Be(n+t+5*(1+Math.ceil(t/7e3))+c),l=i.subarray(n,i.length-c),d=s.l,o=(s.r||0)&7;if(r){o&&(l[0]=s.r>>3);for(var u=Al[r-1],m=u>>13,h=u&8191,f=(1<<a)-1,p=s.p||new ke(32768),g=s.h||new ke(f+1),y=Math.ceil(a/3),k=2*y,E=function(ut){return(e[ut]^e[ut+1]<<y^e[ut+2]<<k)&f},D=new Ft(25e3),R=new ke(288),_=new ke(32),v=0,b=0,w=s.i||0,I=0,T=s.w||0,S=0;w+2<t;++w){var C=E(w),F=w&32767,U=g[C];if(p[F]=U,g[C]=F,T<=w){var O=t-w;if((v>7e3||I>24576)&&(O>423||!d)){o=On(e,l,0,D,R,_,b,I,S,w-S,o),I=v=b=0,S=w;for(var H=0;H<286;++H)R[H]=0;for(var H=0;H<30;++H)_[H]=0}var ae=2,X=0,ve=h,ce=F-U&32767;if(O>2&&C==E(w-ce))for(var Ee=Math.min(m,O)-1,Ze=Math.min(32767,w),Se=Math.min(258,O);ce<=Ze&&--ve&&F!=U;){if(e[w+ae]==e[w+ae-ce]){for(var le=0;le<Se&&e[w+le]==e[w+le-ce];++le);if(le>ae){if(ae=le,X=ce,le>Ee)break;for(var Ue=Math.min(ce,le-2),ha=0,H=0;H<Ue;++H){var pr=w-ce+H&32767,Cl=p[pr],mi=pr-Cl&32767;mi>ha&&(ha=mi,U=pr)}}}F=U,U=p[F],ce+=F-U&32767}if(X){D[I++]=268435456|Dt[ae]<<18|Nn[X];var hi=Dt[ae]&31,fi=Nn[X]&31;b+=Mt[hi]+_t[fi],++R[257+hi],++_[fi],T=w+ae,++v}else D[I++]=e[w],++R[e[w]]}}for(w=Math.max(w,T);w<t;++w)D[I++]=e[w],++R[e[w]];o=On(e,l,d,D,R,_,b,I,S,w-S,o),d||(s.r=o&7|l[o/8|0]<<3,o-=7,s.h=g,s.p=p,s.i=w,s.w=T)}else{for(var w=s.w||0;w<t+d;w+=65535){var ct=w+65535;ct>=t&&(l[o/8|0]=d,ct=t),o=$n(l,o+1,e.subarray(w,ct))}s.i=t}return Bl(i,0,n+Kn(o)+c)},qn=function(){var e=1,r=0;return{p:function(a){for(var n=e,c=r,s=a.length|0,t=0;t!=s;){for(var i=Math.min(t+2655,s);t<i;++t)c+=n+=a[t];n=(n&65535)+15*(n>>16),c=(c&65535)+15*(c>>16)}e=n,r=c},d:function(){return e%=65521,r%=65521,(e&255)<<24|(e&65280)<<8|(r&255)<<8|r>>8}}},Nl=function(e,r,a,n,c){if(!c&&(c={l:1},r.dictionary)){var s=r.dictionary.subarray(-32768),t=new Be(s.length+e.length);t.set(s),t.set(e,s.length),e=t,c.w=s.length}return zl(e,r.level==null?6:r.level,r.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+r.mem,a,n,c)},Gn=function(e,r,a){for(;a;++r)e[r]=a,a>>>=8},jl=function(e,r){var a=r.level,n=a==0?0:a<6?1:a==9?3:2;if(e[0]=120,e[1]=n<<6|(r.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,r.dictionary){var c=qn();c.p(r.dictionary),Gn(e,2,c.d())}};function Jn(e,r){r||(r={});var a=qn();a.p(e);var n=Nl(e,r,r.dictionary?6:2,4);return jl(n,r),Gn(n,n.length-4,a.d()),n}var Ol=typeof TextDecoder<"u"&&new TextDecoder,Hl=0;try{Ol.decode(Wn,{stream:!0}),Hl=1}catch{}x();var tr=P(j(),1),Ul={root:"alinea-Statusbar",status:"alinea-Statusbar-status"},Zn=V(Ul),oe;(e=>{({Provider:e.Provider,Portal:e.Portal,Slot:e.Slot}=La());function r({children:n}){return(0,tr.jsxs)("footer",{className:Zn.root(),children:[(0,tr.jsx)(e.Portal,{}),n]})}e.Root=r;function a({children:n,icon:c}){return(0,tr.jsx)("div",{className:Zn.status(),children:(0,tr.jsxs)($,{center:!0,gap:5,children:[(0,tr.jsx)(G,{icon:c}),(0,tr.jsx)("span",{children:n})]})})}e.Status=a})(oe||(oe={}));x();x();var Yn=P(q(),1);function jr(e){if(e)return(0,Yn.useMemo)(()=>Ba(e),[e])}var Xn=P(j(),1);function Lt({color:e}){let r=jr(e),a=bi(`
    <svg
      width="36"
      height="36"
      view-box="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <linearGradient
          id="grad1"
          x1="0%"
          y1="0%"
          x2="100%"
          y2="0%"
          gradient-transform="rotate(65)"
        >
          <stop offset="0%" style="stop-color: ${e}; stop-opacity: 1" />
          <stop
            offset="100%"
            style="stop-color: ${e}; stop-opacity: 1"
          />
        </linearGradient>
      </defs>
      <path
        d="M18 36C25.884 36 29.9427 36 32.8047 33.138C35.6667 30.276 36 25.884 36 18C36 10.116 35.6667 6.05733 32.8047 3.19533C29.9427 0.333333 25.884 0 18 0C10.116 0 6.05733 0.333333 3.19533 3.19533C0.333333 6.05733 0 10.116 0 18C0 25.884 0.333333 29.9427 3.19533 32.8047C6.05733 35.6667 10.116 36 18 36Z"
        fill="url(#grad1)"
      />
      <path 
        fill="${r}" 
        d="M20.8178 10.3977V11.733C19.8978 10.6534 18.5316 10 16.6636 10C13.0112 10 10 13.267 10 17.5C10 21.733 13.0112 25 16.6636 25C18.5316 25 19.8978 24.3466 20.8178 23.267V24.6023H25V10.3977H20.8178ZM17.5 20.9659C15.5762 20.9659 14.1822 19.6307 14.1822 17.5C14.1822 15.3693 15.5762 14.0341 17.5 14.0341C19.4238 14.0341 20.8178 15.3693 20.8178 17.5C20.8178 19.6307 19.4238 20.9659 17.5 20.9659Z"
      />
      </svg>
  `);return(0,Xn.jsx)("link",{rel:"icon",type:"image/svg",href:`data:image/svg+xml;base64,${a}`})}x();var Bt=P(j(),1);function Qn(e){return(0,Bt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Bt.jsx)("path",{fill:"currentColor",d:"M12 11q3.75 0 6.375-1.175T21 7q0-1.65-2.625-2.825T12 3Q8.25 3 5.625 4.175T3 7q0 1.65 2.625 2.825T12 11Zm0 2.5q1.025 0 2.563-.213t2.962-.687q1.425-.475 2.45-1.237T21 9.5V12q0 1.1-1.025 1.863t-2.45 1.237q-1.425.475-2.962.688T12 16q-1.025 0-2.563-.213T6.476 15.1q-1.425-.475-2.45-1.237T3 12V9.5q0 1.1 1.025 1.863t2.45 1.237q1.425.475 2.963.688T12 13.5Zm0 5q1.025 0 2.563-.213t2.962-.687q1.425-.475 2.45-1.238T21 14.5V17q0 1.1-1.025 1.863t-2.45 1.237q-1.425.475-2.962.688T12 21q-1.025 0-2.563-.213T6.476 20.1q-1.425-.475-2.45-1.238T3 17v-2.5q0 1.1 1.025 1.863t2.45 1.237q1.425.475 2.963.688T12 18.5Z"})})}var Il=P(q(),1);x();var Wa=P(j(),1);function eo(e){let r=e.fullPage!==!1;Ii({fullPage:r,...e});let a=N(Ei);return(0,Wa.jsxs)(xi,{client:a,children:[e.children,(0,Wa.jsx)(In,{})]})}x();var Xo=P(q(),1);x();var ir=P(q(),1);var Or=P(j(),1),qa=class{constructor(e){this.data=e}get component(){return this.data.component}},ro=class{constructor(e){this.data=e,this.matchers=this.data.routes.map(r=>({route:r,matcher:Da({route:r.data.path})}))}matchers;matchingRoute=te(e=>{for(let{route:r,matcher:a}of this.matchers){let n=e(a);if(n)return{route:r,params:n}}});matchingRouteWithData=te(async e=>{let r=e(this.matchingRoute);if(!r)return;let{loader:a}=r.route.data,n=a?await e(a(r.params)):{};return{route:r.route,data:n,params:r.params}});currentRoute=te(void 0);prevLocation=te(void 0);blockers=te(new Set);expected;cancelled=te(!1);match=te((e,{setSelf:r})=>{let a=e(this.currentRoute),n=e(this.matchingRouteWithData);return this.expected=n.then(c=>(r(this.expected,c),c)),a??this.expected},(e,r,a,n)=>{if(e(this.cancelled)){r(this.cancelled,!1);return}let s=e(this.blockers);if(a!==this.expected)return;let t=e(Ir),i=e(this.prevLocation),l=()=>{for(let o of s)r(o,void 0);r(this.currentRoute,n),r(this.prevLocation,t)},d=()=>{r(this.cancelled,!0);for(let o of s)r(o,void 0);if(i){let o=i.pathname+i.search;r(Ir,o)}};if(s.size)for(let o of s)r(o,{nextRoute:n,confirm:l,cancel:d});else l()})},ao=(0,ir.createContext)(void 0);function to({children:e,router:r}){return(0,Or.jsx)(ao.Provider,{value:r,children:e})}function io(){let e=(0,ir.useContext)(ao);if(!e)throw new Error("No router context found");return e}function no(e,r){let a=io(),[n]=(0,ir.useState)(()=>te(void 0)),c=ie(a.blockers);(0,ir.useEffect)(()=>{if(r)return c(t=>new Set(t).add(n)),window.onbeforeunload=()=>!0,()=>{window.onbeforeunload=null,c(t=>{let i=new Set(t);return i.delete(n),i})}},[e,r]);let s=N(n);return{isBlocking:!!s,...s}}function Vl(){let e=io();return N(e.match)}function Kl(){let e=Vl();return e?(0,Or.jsx)(e.route.component,{...e.data}):null}function oo({fallback:e}){let r=Kl();return(0,Or.jsx)(Or.Fragment,{children:r??e??null})}x();x();var Ga=P(q(),1),At=P(j(),1);function $l({name:e,children:r}){return(0,Ga.useEffect)(()=>{console.log(`SuspenseBoundary ${e} fallback triggered`)},[]),r}function nr(e){return(0,At.jsx)(Ga.Suspense,{...e,fallback:(0,At.jsx)($l,{name:e.name,children:e.fallback??null})})}x();x();var zt=P(j(),1);function lo(e){return(0,zt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,zt.jsx)("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 2v3H5V5h14zm0 5v4H5v-4h14zM5 19v-3h14v3H5z"})})}var mr=P(q(),1);x();var Nt=P(j(),1),Wl={root:"alinea-Preview"},ql=V(Wl);function so({children:e}){return(0,Nt.jsx)(Pe.Preview,{children:(0,Nt.jsx)("div",{className:ql.root(),children:e})})}x();x();function jt(e,r){if(e===r)return!0;if(!e||!r)return!1;if(Array.isArray(e)&&Array.isArray(r)){if(e.length!==r.length)return!1;for(let a=0;a<e.length;a++)if(!jt(e[a],r[a]))return!1;return!0}if(typeof e=="object"&&typeof r=="object"){let a=Object.keys(e);if(a.length!==Object.keys(r).length)return!1;for(let n of a)if(!jt(e[n],r[n]))return!1;return!0}return!1}function Gl(e,r,a){let n=e.length,c=r.length,s=Array.from(Array(n+1),()=>Array(c+1));for(let t=0;t<=n;t++)for(let i=0;i<=c;i++)t==0||i==0?s[t][i]=0:a(e[t-1],r[i-1])?s[t][i]=1+s[t-1][i-1]:s[t][i]=Math.max(s[t-1][i],s[t][i-1]);return s}function Ja(e,r,a){let n=Gl(e,r,a),c=[],s=e.length,t=r.length;for(;s!==0||t!==0;)s===0?(c.push({type:"addition",value:r[t-1]}),t-=1):t===0?(c.push({type:"removal",value:e[s-1]}),s-=1):a(e[s-1],r[t-1])?(c.push({type:"keep",old:e[s-1],value:r[t-1]}),s-=1,t-=1):n[s-1][t]<=n[s][t-1]?(c.push({type:"addition",value:r[t-1]}),t-=1):(c.push({type:"removal",value:e[s-1]}),s-=1);return c.reverse()}function or(e,r,a){return Object.entries(e.shapes).filter(([c,s])=>s instanceof Ha?r?.[c]!==a?.[c]:!jt(r?.[c],a?.[c]))}x();x();x();x();x();var Ot=P(j(),1);function co(e){return(0,Ot.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Ot.jsx)("path",{fill:"currentColor",d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2z"})})}var ta=P(j(),1),Jl={root:"alinea-ChangeBox","root-content":"alinea-ChangeBox-content",rootContent:"alinea-ChangeBox-content","is-equal":"alinea-ChangeBox-is-equal",isEqual:"alinea-ChangeBox-is-equal","is-addition":"alinea-ChangeBox-is-addition",isAddition:"alinea-ChangeBox-is-addition","is-removal":"alinea-ChangeBox-is-removal",isRemoval:"alinea-ChangeBox-is-removal","root-header":"alinea-ChangeBox-header",rootHeader:"alinea-ChangeBox-header"},uo=V(Jl);function lr({change:e,children:r}){return(0,ta.jsx)($,{gap:8,className:uo.root(e),children:e!=="equal"?(0,ta.jsx)("div",{className:uo.root.content(),children:r}):(0,ta.jsx)($,{center:!0,justify:"center",full:!0,children:(0,ta.jsx)(G,{icon:co})})})}var ia=P(j(),1);function mo({FieldsDiff:e,shape:r,valueA:a,valueB:n}){let s=Ja(a||[],n||[],(t,i)=>t._id===i._id);return(0,ia.jsx)(Va.Root,{children:s.map((t,i)=>{let l=t.value,d=r.shapes[l[Dn.type]],o=t.type==="keep"?[t.old,t.value]:t.type==="removal"?[t.value,{}]:[{},t.value],u=or(d,o[0],o[1]);return u.length===0?(0,ia.jsx)(lr,{change:"equal"},i):(0,ia.jsx)(lr,{change:t.type,children:(0,ia.jsx)(e,{changes:u,targetA:o[0],targetB:o[1]})},i)})})}x();var bo=P(q(),1);x();gi();var go=P(q(),1),na=P(j(),1),Zl=pi({"node_modules/diff-match-patch/index.js"(e,r){var a=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,c=1,s=0;a.Diff=function(t,i){return[t,i]},a.prototype.diff_main=function(t,i,l,d){typeof d>"u"&&(this.Diff_Timeout<=0?d=Number.MAX_VALUE:d=new Date().getTime()+this.Diff_Timeout*1e3);var o=d;if(t==null||i==null)throw new Error("Null input. (diff_main)");if(t==i)return t?[new a.Diff(s,t)]:[];typeof l>"u"&&(l=!0);var u=l,m=this.diff_commonPrefix(t,i),h=t.substring(0,m);t=t.substring(m),i=i.substring(m),m=this.diff_commonSuffix(t,i);var f=t.substring(t.length-m);t=t.substring(0,t.length-m),i=i.substring(0,i.length-m);var p=this.diff_compute_(t,i,u,o);return h&&p.unshift(new a.Diff(s,h)),f&&p.push(new a.Diff(s,f)),this.diff_cleanupMerge(p),p},a.prototype.diff_compute_=function(t,i,l,d){var o;if(!t)return[new a.Diff(c,i)];if(!i)return[new a.Diff(n,t)];var u=t.length>i.length?t:i,m=t.length>i.length?i:t,h=u.indexOf(m);if(h!=-1)return o=[new a.Diff(c,u.substring(0,h)),new a.Diff(s,m),new a.Diff(c,u.substring(h+m.length))],t.length>i.length&&(o[0][0]=o[2][0]=n),o;if(m.length==1)return[new a.Diff(n,t),new a.Diff(c,i)];var f=this.diff_halfMatch_(t,i);if(f){var p=f[0],g=f[1],y=f[2],k=f[3],E=f[4],D=this.diff_main(p,y,l,d),R=this.diff_main(g,k,l,d);return D.concat([new a.Diff(s,E)],R)}return l&&t.length>100&&i.length>100?this.diff_lineMode_(t,i,d):this.diff_bisect_(t,i,d)},a.prototype.diff_lineMode_=function(t,i,l){var d=this.diff_linesToChars_(t,i);t=d.chars1,i=d.chars2;var o=d.lineArray,u=this.diff_main(t,i,!1,l);this.diff_charsToLines_(u,o),this.diff_cleanupSemantic(u),u.push(new a.Diff(s,""));for(var m=0,h=0,f=0,p="",g="";m<u.length;){switch(u[m][0]){case c:f++,g+=u[m][1];break;case n:h++,p+=u[m][1];break;case s:if(h>=1&&f>=1){u.splice(m-h-f,h+f),m=m-h-f;for(var y=this.diff_main(p,g,!1,l),k=y.length-1;k>=0;k--)u.splice(m,0,y[k]);m=m+y.length}f=0,h=0,p="",g="";break}m++}return u.pop(),u},a.prototype.diff_bisect_=function(t,i,l){for(var d=t.length,o=i.length,u=Math.ceil((d+o)/2),m=u,h=2*u,f=new Array(h),p=new Array(h),g=0;g<h;g++)f[g]=-1,p[g]=-1;f[m+1]=0,p[m+1]=0;for(var y=d-o,k=y%2!=0,E=0,D=0,R=0,_=0,v=0;v<u&&!(new Date().getTime()>l);v++){for(var b=-v+E;b<=v-D;b+=2){var w=m+b,I;b==-v||b!=v&&f[w-1]<f[w+1]?I=f[w+1]:I=f[w-1]+1;for(var T=I-b;I<d&&T<o&&t.charAt(I)==i.charAt(T);)I++,T++;if(f[w]=I,I>d)D+=2;else if(T>o)E+=2;else if(k){var S=m+y-b;if(S>=0&&S<h&&p[S]!=-1){var C=d-p[S];if(I>=C)return this.diff_bisectSplit_(t,i,I,T,l)}}}for(var F=-v+R;F<=v-_;F+=2){var S=m+F,C;F==-v||F!=v&&p[S-1]<p[S+1]?C=p[S+1]:C=p[S-1]+1;for(var U=C-F;C<d&&U<o&&t.charAt(d-C-1)==i.charAt(o-U-1);)C++,U++;if(p[S]=C,C>d)_+=2;else if(U>o)R+=2;else if(!k){var w=m+y-F;if(w>=0&&w<h&&f[w]!=-1){var I=f[w],T=m+I-w;if(C=d-C,I>=C)return this.diff_bisectSplit_(t,i,I,T,l)}}}}return[new a.Diff(n,t),new a.Diff(c,i)]},a.prototype.diff_bisectSplit_=function(t,i,l,d,o){var u=t.substring(0,l),m=i.substring(0,d),h=t.substring(l),f=i.substring(d),p=this.diff_main(u,m,!1,o),g=this.diff_main(h,f,!1,o);return p.concat(g)},a.prototype.diff_linesToChars_=function(t,i){var l=[],d={};l[0]="";function o(f){for(var p="",g=0,y=-1,k=l.length;y<f.length-1;){y=f.indexOf(`
`,g),y==-1&&(y=f.length-1);var E=f.substring(g,y+1);(d.hasOwnProperty?d.hasOwnProperty(E):d[E]!==void 0)?p+=String.fromCharCode(d[E]):(k==u&&(E=f.substring(g),y=f.length),p+=String.fromCharCode(k),d[E]=k,l[k++]=E),g=y+1}return p}var u=4e4,m=o(t);u=65535;var h=o(i);return{chars1:m,chars2:h,lineArray:l}},a.prototype.diff_charsToLines_=function(t,i){for(var l=0;l<t.length;l++){for(var d=t[l][1],o=[],u=0;u<d.length;u++)o[u]=i[d.charCodeAt(u)];t[l][1]=o.join("")}},a.prototype.diff_commonPrefix=function(t,i){if(!t||!i||t.charAt(0)!=i.charAt(0))return 0;for(var l=0,d=Math.min(t.length,i.length),o=d,u=0;l<o;)t.substring(u,o)==i.substring(u,o)?(l=o,u=l):d=o,o=Math.floor((d-l)/2+l);return o},a.prototype.diff_commonSuffix=function(t,i){if(!t||!i||t.charAt(t.length-1)!=i.charAt(i.length-1))return 0;for(var l=0,d=Math.min(t.length,i.length),o=d,u=0;l<o;)t.substring(t.length-o,t.length-u)==i.substring(i.length-o,i.length-u)?(l=o,u=l):d=o,o=Math.floor((d-l)/2+l);return o},a.prototype.diff_commonOverlap_=function(t,i){var l=t.length,d=i.length;if(l==0||d==0)return 0;l>d?t=t.substring(l-d):l<d&&(i=i.substring(0,l));var o=Math.min(l,d);if(t==i)return o;for(var u=0,m=1;;){var h=t.substring(o-m),f=i.indexOf(h);if(f==-1)return u;m+=f,(f==0||t.substring(o-m)==i.substring(0,m))&&(u=m,m++)}},a.prototype.diff_halfMatch_=function(t,i){if(this.Diff_Timeout<=0)return null;var l=t.length>i.length?t:i,d=t.length>i.length?i:t;if(l.length<4||d.length*2<l.length)return null;var o=this;function u(D,R,_){for(var v=D.substring(_,_+Math.floor(D.length/4)),b=-1,w="",I,T,S,C;(b=R.indexOf(v,b+1))!=-1;){var F=o.diff_commonPrefix(D.substring(_),R.substring(b)),U=o.diff_commonSuffix(D.substring(0,_),R.substring(0,b));w.length<U+F&&(w=R.substring(b-U,b)+R.substring(b,b+F),I=D.substring(0,_-U),T=D.substring(_+F),S=R.substring(0,b-U),C=R.substring(b+F))}return w.length*2>=D.length?[I,T,S,C,w]:null}var m=u(l,d,Math.ceil(l.length/4)),h=u(l,d,Math.ceil(l.length/2)),f;if(!m&&!h)return null;h?m?f=m[4].length>h[4].length?m:h:f=h:f=m;var p,g,y,k;t.length>i.length?(p=f[0],g=f[1],y=f[2],k=f[3]):(y=f[0],k=f[1],p=f[2],g=f[3]);var E=f[4];return[p,g,y,k,E]},a.prototype.diff_cleanupSemantic=function(t){for(var i=!1,l=[],d=0,o=null,u=0,m=0,h=0,f=0,p=0;u<t.length;)t[u][0]==s?(l[d++]=u,m=f,h=p,f=0,p=0,o=t[u][1]):(t[u][0]==c?f+=t[u][1].length:p+=t[u][1].length,o&&o.length<=Math.max(m,h)&&o.length<=Math.max(f,p)&&(t.splice(l[d-1],0,new a.Diff(n,o)),t[l[d-1]+1][0]=c,d--,d--,u=d>0?l[d-1]:-1,m=0,h=0,f=0,p=0,o=null,i=!0)),u++;for(i&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),u=1;u<t.length;){if(t[u-1][0]==n&&t[u][0]==c){var g=t[u-1][1],y=t[u][1],k=this.diff_commonOverlap_(g,y),E=this.diff_commonOverlap_(y,g);k>=E?(k>=g.length/2||k>=y.length/2)&&(t.splice(u,0,new a.Diff(s,y.substring(0,k))),t[u-1][1]=g.substring(0,g.length-k),t[u+1][1]=y.substring(k),u++):(E>=g.length/2||E>=y.length/2)&&(t.splice(u,0,new a.Diff(s,g.substring(0,E))),t[u-1][0]=c,t[u-1][1]=y.substring(0,y.length-E),t[u+1][0]=n,t[u+1][1]=g.substring(E),u++),u++}u++}},a.prototype.diff_cleanupSemanticLossless=function(t){function i(E,D){if(!E||!D)return 6;var R=E.charAt(E.length-1),_=D.charAt(0),v=R.match(a.nonAlphaNumericRegex_),b=_.match(a.nonAlphaNumericRegex_),w=v&&R.match(a.whitespaceRegex_),I=b&&_.match(a.whitespaceRegex_),T=w&&R.match(a.linebreakRegex_),S=I&&_.match(a.linebreakRegex_),C=T&&E.match(a.blanklineEndRegex_),F=S&&D.match(a.blanklineStartRegex_);return C||F?5:T||S?4:v&&!w&&I?3:w||I?2:v||b?1:0}for(var l=1;l<t.length-1;){if(t[l-1][0]==s&&t[l+1][0]==s){var d=t[l-1][1],o=t[l][1],u=t[l+1][1],m=this.diff_commonSuffix(d,o);if(m){var h=o.substring(o.length-m);d=d.substring(0,d.length-m),o=h+o.substring(0,o.length-m),u=h+u}for(var f=d,p=o,g=u,y=i(d,o)+i(o,u);o.charAt(0)===u.charAt(0);){d+=o.charAt(0),o=o.substring(1)+u.charAt(0),u=u.substring(1);var k=i(d,o)+i(o,u);k>=y&&(y=k,f=d,p=o,g=u)}t[l-1][1]!=f&&(f?t[l-1][1]=f:(t.splice(l-1,1),l--),t[l][1]=p,g?t[l+1][1]=g:(t.splice(l+1,1),l--))}l++}},a.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,a.whitespaceRegex_=/\s/,a.linebreakRegex_=/[\r\n]/,a.blanklineEndRegex_=/\n\r?\n$/,a.blanklineStartRegex_=/^\r?\n\r?\n/,a.prototype.diff_cleanupEfficiency=function(t){for(var i=!1,l=[],d=0,o=null,u=0,m=!1,h=!1,f=!1,p=!1;u<t.length;)t[u][0]==s?(t[u][1].length<this.Diff_EditCost&&(f||p)?(l[d++]=u,m=f,h=p,o=t[u][1]):(d=0,o=null),f=p=!1):(t[u][0]==n?p=!0:f=!0,o&&(m&&h&&f&&p||o.length<this.Diff_EditCost/2&&m+h+f+p==3)&&(t.splice(l[d-1],0,new a.Diff(n,o)),t[l[d-1]+1][0]=c,d--,o=null,m&&h?(f=p=!0,d=0):(d--,u=d>0?l[d-1]:-1,f=p=!1),i=!0)),u++;i&&this.diff_cleanupMerge(t)},a.prototype.diff_cleanupMerge=function(t){t.push(new a.Diff(s,""));for(var i=0,l=0,d=0,o="",u="",m;i<t.length;)switch(t[i][0]){case c:d++,u+=t[i][1],i++;break;case n:l++,o+=t[i][1],i++;break;case s:l+d>1?(l!==0&&d!==0&&(m=this.diff_commonPrefix(u,o),m!==0&&(i-l-d>0&&t[i-l-d-1][0]==s?t[i-l-d-1][1]+=u.substring(0,m):(t.splice(0,0,new a.Diff(s,u.substring(0,m))),i++),u=u.substring(m),o=o.substring(m)),m=this.diff_commonSuffix(u,o),m!==0&&(t[i][1]=u.substring(u.length-m)+t[i][1],u=u.substring(0,u.length-m),o=o.substring(0,o.length-m))),i-=l+d,t.splice(i,l+d),o.length&&(t.splice(i,0,new a.Diff(n,o)),i++),u.length&&(t.splice(i,0,new a.Diff(c,u)),i++),i++):i!==0&&t[i-1][0]==s?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,d=0,l=0,o="",u="";break}t[t.length-1][1]===""&&t.pop();var h=!1;for(i=1;i<t.length-1;)t[i-1][0]==s&&t[i+1][0]==s&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),h=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),h=!0)),i++;h&&this.diff_cleanupMerge(t)},a.prototype.diff_xIndex=function(t,i){var l=0,d=0,o=0,u=0,m;for(m=0;m<t.length&&(t[m][0]!==c&&(l+=t[m][1].length),t[m][0]!==n&&(d+=t[m][1].length),!(l>i));m++)o=l,u=d;return t.length!=m&&t[m][0]===n?u:u+(i-o)},a.prototype.diff_prettyHtml=function(t){for(var i=[],l=/&/g,d=/</g,o=/>/g,u=/\n/g,m=0;m<t.length;m++){var h=t[m][0],f=t[m][1],p=f.replace(l,"&amp;").replace(d,"&lt;").replace(o,"&gt;").replace(u,"&para;<br>");switch(h){case c:i[m]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case n:i[m]='<del style="background:#ffe6e6;">'+p+"</del>";break;case s:i[m]="<span>"+p+"</span>";break}}return i.join("")},a.prototype.diff_text1=function(t){for(var i=[],l=0;l<t.length;l++)t[l][0]!==c&&(i[l]=t[l][1]);return i.join("")},a.prototype.diff_text2=function(t){for(var i=[],l=0;l<t.length;l++)t[l][0]!==n&&(i[l]=t[l][1]);return i.join("")},a.prototype.diff_levenshtein=function(t){for(var i=0,l=0,d=0,o=0;o<t.length;o++){var u=t[o][0],m=t[o][1];switch(u){case c:l+=m.length;break;case n:d+=m.length;break;case s:i+=Math.max(l,d),l=0,d=0;break}}return i+=Math.max(l,d),i},a.prototype.diff_toDelta=function(t){for(var i=[],l=0;l<t.length;l++)switch(t[l][0]){case c:i[l]="+"+encodeURI(t[l][1]);break;case n:i[l]="-"+t[l][1].length;break;case s:i[l]="="+t[l][1].length;break}return i.join("	").replace(/%20/g," ")},a.prototype.diff_fromDelta=function(t,i){for(var l=[],d=0,o=0,u=i.split(/\t/g),m=0;m<u.length;m++){var h=u[m].substring(1);switch(u[m].charAt(0)){case"+":try{l[d++]=new a.Diff(c,decodeURI(h))}catch{throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var f=parseInt(h,10);if(isNaN(f)||f<0)throw new Error("Invalid number in diff_fromDelta: "+h);var p=t.substring(o,o+=f);u[m].charAt(0)=="="?l[d++]=new a.Diff(s,p):l[d++]=new a.Diff(n,p);break;default:if(u[m])throw new Error("Invalid diff operation in diff_fromDelta: "+u[m])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return l},a.prototype.match_main=function(t,i,l){if(t==null||i==null||l==null)throw new Error("Null input. (match_main)");return l=Math.max(0,Math.min(l,t.length)),t==i?0:t.length?t.substring(l,l+i.length)==i?l:this.match_bitap_(t,i,l):-1},a.prototype.match_bitap_=function(t,i,l){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var d=this.match_alphabet_(i),o=this;function u(I,T){var S=I/i.length,C=Math.abs(l-T);return o.Match_Distance?S+C/o.Match_Distance:C?1:S}var m=this.Match_Threshold,h=t.indexOf(i,l);h!=-1&&(m=Math.min(u(0,h),m),h=t.lastIndexOf(i,l+i.length),h!=-1&&(m=Math.min(u(0,h),m)));var f=1<<i.length-1;h=-1;for(var p,g,y=i.length+t.length,k,E=0;E<i.length;E++){for(p=0,g=y;p<g;)u(E,l+g)<=m?p=g:y=g,g=Math.floor((y-p)/2+p);y=g;var D=Math.max(1,l-g+1),R=Math.min(l+g,t.length)+i.length,_=Array(R+2);_[R+1]=(1<<E)-1;for(var v=R;v>=D;v--){var b=d[t.charAt(v-1)];if(E===0?_[v]=(_[v+1]<<1|1)&b:_[v]=(_[v+1]<<1|1)&b|((k[v+1]|k[v])<<1|1)|k[v+1],_[v]&f){var w=u(E,v-1);if(w<=m)if(m=w,h=v-1,h>l)D=Math.max(1,2*l-h);else break}}if(u(E+1,l)>m)break;k=_}return h},a.prototype.match_alphabet_=function(t){for(var i={},l=0;l<t.length;l++)i[t.charAt(l)]=0;for(var l=0;l<t.length;l++)i[t.charAt(l)]|=1<<t.length-l-1;return i},a.prototype.patch_addContext_=function(t,i){if(i.length!=0){if(t.start2===null)throw Error("patch not initialized");for(var l=i.substring(t.start2,t.start2+t.length1),d=0;i.indexOf(l)!=i.lastIndexOf(l)&&l.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)d+=this.Patch_Margin,l=i.substring(t.start2-d,t.start2+t.length1+d);d+=this.Patch_Margin;var o=i.substring(t.start2-d,t.start2);o&&t.diffs.unshift(new a.Diff(s,o));var u=i.substring(t.start2+t.length1,t.start2+t.length1+d);u&&t.diffs.push(new a.Diff(s,u)),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+u.length,t.length2+=o.length+u.length}},a.prototype.patch_make=function(t,i,l){var d,o;if(typeof t=="string"&&typeof i=="string"&&typeof l>"u")d=t,o=this.diff_main(d,i,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&typeof t=="object"&&typeof i>"u"&&typeof l>"u")o=t,d=this.diff_text1(o);else if(typeof t=="string"&&i&&typeof i=="object"&&typeof l>"u")d=t,o=i;else if(typeof t=="string"&&typeof i=="string"&&l&&typeof l=="object")d=t,o=l;else throw new Error("Unknown call format to patch_make.");if(o.length===0)return[];for(var u=[],m=new a.patch_obj,h=0,f=0,p=0,g=d,y=d,k=0;k<o.length;k++){var E=o[k][0],D=o[k][1];switch(!h&&E!==s&&(m.start1=f,m.start2=p),E){case c:m.diffs[h++]=o[k],m.length2+=D.length,y=y.substring(0,p)+D+y.substring(p);break;case n:m.length1+=D.length,m.diffs[h++]=o[k],y=y.substring(0,p)+y.substring(p+D.length);break;case s:D.length<=2*this.Patch_Margin&&h&&o.length!=k+1?(m.diffs[h++]=o[k],m.length1+=D.length,m.length2+=D.length):D.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(m,g),u.push(m),m=new a.patch_obj,h=0,g=y,f=p);break}E!==c&&(f+=D.length),E!==n&&(p+=D.length)}return h&&(this.patch_addContext_(m,g),u.push(m)),u},a.prototype.patch_deepCopy=function(t){for(var i=[],l=0;l<t.length;l++){var d=t[l],o=new a.patch_obj;o.diffs=[];for(var u=0;u<d.diffs.length;u++)o.diffs[u]=new a.Diff(d.diffs[u][0],d.diffs[u][1]);o.start1=d.start1,o.start2=d.start2,o.length1=d.length1,o.length2=d.length2,i[l]=o}return i},a.prototype.patch_apply=function(t,i){if(t.length==0)return[i,[]];t=this.patch_deepCopy(t);var l=this.patch_addPadding(t);i=l+i+l,this.patch_splitMax(t);for(var d=0,o=[],u=0;u<t.length;u++){var m=t[u].start2+d,h=this.diff_text1(t[u].diffs),f,p=-1;if(h.length>this.Match_MaxBits?(f=this.match_main(i,h.substring(0,this.Match_MaxBits),m),f!=-1&&(p=this.match_main(i,h.substring(h.length-this.Match_MaxBits),m+h.length-this.Match_MaxBits),(p==-1||f>=p)&&(f=-1))):f=this.match_main(i,h,m),f==-1)o[u]=!1,d-=t[u].length2-t[u].length1;else{o[u]=!0,d=f-m;var g;if(p==-1?g=i.substring(f,f+h.length):g=i.substring(f,p+this.Match_MaxBits),h==g)i=i.substring(0,f)+this.diff_text2(t[u].diffs)+i.substring(f+h.length);else{var y=this.diff_main(h,g,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(y)/h.length>this.Patch_DeleteThreshold)o[u]=!1;else{this.diff_cleanupSemanticLossless(y);for(var k=0,E,D=0;D<t[u].diffs.length;D++){var R=t[u].diffs[D];R[0]!==s&&(E=this.diff_xIndex(y,k)),R[0]===c?i=i.substring(0,f+E)+R[1]+i.substring(f+E):R[0]===n&&(i=i.substring(0,f+E)+i.substring(f+this.diff_xIndex(y,k+R[1].length))),R[0]!==n&&(k+=R[1].length)}}}}}return i=i.substring(l.length,i.length-l.length),[i,o]},a.prototype.patch_addPadding=function(t){for(var i=this.Patch_Margin,l="",d=1;d<=i;d++)l+=String.fromCharCode(d);for(var d=0;d<t.length;d++)t[d].start1+=i,t[d].start2+=i;var o=t[0],u=o.diffs;if(u.length==0||u[0][0]!=s)u.unshift(new a.Diff(s,l)),o.start1-=i,o.start2-=i,o.length1+=i,o.length2+=i;else if(i>u[0][1].length){var m=i-u[0][1].length;u[0][1]=l.substring(u[0][1].length)+u[0][1],o.start1-=m,o.start2-=m,o.length1+=m,o.length2+=m}if(o=t[t.length-1],u=o.diffs,u.length==0||u[u.length-1][0]!=s)u.push(new a.Diff(s,l)),o.length1+=i,o.length2+=i;else if(i>u[u.length-1][1].length){var m=i-u[u.length-1][1].length;u[u.length-1][1]+=l.substring(0,m),o.length1+=m,o.length2+=m}return l},a.prototype.patch_splitMax=function(t){for(var i=this.Match_MaxBits,l=0;l<t.length;l++)if(!(t[l].length1<=i)){var d=t[l];t.splice(l--,1);for(var o=d.start1,u=d.start2,m="";d.diffs.length!==0;){var h=new a.patch_obj,f=!0;for(h.start1=o-m.length,h.start2=u-m.length,m!==""&&(h.length1=h.length2=m.length,h.diffs.push(new a.Diff(s,m)));d.diffs.length!==0&&h.length1<i-this.Patch_Margin;){var p=d.diffs[0][0],g=d.diffs[0][1];p===c?(h.length2+=g.length,u+=g.length,h.diffs.push(d.diffs.shift()),f=!1):p===n&&h.diffs.length==1&&h.diffs[0][0]==s&&g.length>2*i?(h.length1+=g.length,o+=g.length,f=!1,h.diffs.push(new a.Diff(p,g)),d.diffs.shift()):(g=g.substring(0,i-h.length1-this.Patch_Margin),h.length1+=g.length,o+=g.length,p===s?(h.length2+=g.length,u+=g.length):f=!1,h.diffs.push(new a.Diff(p,g)),g==d.diffs[0][1]?d.diffs.shift():d.diffs[0][1]=d.diffs[0][1].substring(g.length))}m=this.diff_text2(h.diffs),m=m.substring(m.length-this.Patch_Margin);var y=this.diff_text1(d.diffs).substring(0,this.Patch_Margin);y!==""&&(h.length1+=y.length,h.length2+=y.length,h.diffs.length!==0&&h.diffs[h.diffs.length-1][0]===s?h.diffs[h.diffs.length-1][1]+=y:h.diffs.push(new a.Diff(s,y))),f||t.splice(++l,0,h)}}},a.prototype.patch_toText=function(t){for(var i=[],l=0;l<t.length;l++)i[l]=t[l];return i.join("")},a.prototype.patch_fromText=function(t){var i=[];if(!t)return i;for(var l=t.split(`
`),d=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;d<l.length;){var u=l[d].match(o);if(!u)throw new Error("Invalid patch string: "+l[d]);var m=new a.patch_obj;for(i.push(m),m.start1=parseInt(u[1],10),u[2]===""?(m.start1--,m.length1=1):u[2]=="0"?m.length1=0:(m.start1--,m.length1=parseInt(u[2],10)),m.start2=parseInt(u[3],10),u[4]===""?(m.start2--,m.length2=1):u[4]=="0"?m.length2=0:(m.start2--,m.length2=parseInt(u[4],10)),d++;d<l.length;){var h=l[d].charAt(0);try{var f=decodeURI(l[d].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+f)}if(h=="-")m.diffs.push(new a.Diff(n,f));else if(h=="+")m.diffs.push(new a.Diff(c,f));else if(h==" ")m.diffs.push(new a.Diff(s,f));else{if(h=="@")break;if(h!=="")throw new Error('Invalid patch mode "'+h+'" in: '+f)}d++}}return i},a.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},a.patch_obj.prototype.toString=function(){var t,i;this.length1===0?t=this.start1+",0":this.length1==1?t=this.start1+1:t=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var l=["@@ -"+t+" +"+i+` @@
`],d,o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case c:d="+";break;case n:d="-";break;case s:d=" ";break}l[o+1]=d+encodeURI(this.diffs[o][1])+`
`}return l.join("").replace(/%20/g," ")},r.exports=a,r.exports.diff_match_patch=a,r.exports.DIFF_DELETE=n,r.exports.DIFF_INSERT=c,r.exports.DIFF_EQUAL=s}}),Yl=fa(Zl(),1),Xl={root:"alinea-ScalarDiff","root-segment":"alinea-ScalarDiff-segment",rootSegment:"alinea-ScalarDiff-segment","is-insert":"alinea-ScalarDiff-is-insert",isInsert:"alinea-ScalarDiff-is-insert","is-delete":"alinea-ScalarDiff-is-delete",isDelete:"alinea-ScalarDiff-is-delete"},ho=V(Xl),fo=new Yl.default.diff_match_patch;function po(e){return typeof e=="number"||e?String(e):""}function Za({valueA:e,valueB:r}){let a=po(e),n=po(r),c=(0,go.useMemo)(()=>{let s=fo.diff_main(a,n);return fo.diff_cleanupSemantic(s),s},[a,n]);return(0,na.jsxs)("div",{className:ho.root(),children:[c.length===0&&(0,na.jsx)("br",{}),c.map(([s,t],i)=>(0,na.jsx)("span",{className:ho.root.segment({insert:s===1,delete:s===-1,equal:s===0}),children:t},i))]})}var sr=P(j(),1),Ql=new Set(["heading","paragraph","listItem"]);function wo({_type:e,content:r}){let a=Ql.has(e);return!r||!Array.isArray(r)?"":r.map(n=>Fr.isText(n)?n.text+" ":wo(n)).join("")+(a?`

`:"")}function vo(e){let r=[],a="";if(!Array.isArray(e))return r;for(let n of e)Fr.isText(n)?a+=n.text+" ":Fr.isElement(n)?a+=wo(n):Fr.isBlock(n)&&(a&&(r.push({type:"text",text:a}),a=""),r.push({type:"block",block:n}));return a&&r.push({type:"text",text:a}),r}function yo({FieldsDiff:e,shape:r,valueA:a,valueB:n}){let c=(0,bo.useMemo)(()=>({a:vo(a),b:vo(n)}),[a,n]),s=Math.max(c.a.length,c.b.length),t=[],i=(d,o)=>d.type!==d.type?!1:d.type==="block"&&o.type==="block"?d.block[pt.id]===o.block[pt.id]:!0,l=Ja(c.a,c.b,i);return(0,sr.jsx)(Va.Root,{children:l.map((d,o)=>{switch(d.value.type){case"block":{let u=d.value.block[Fr.type],m=r.blocks?.[u],h=d.type==="keep"?["block"in d.old&&d.old.block||{},d.value.block]:d.type==="removal"?[d.value.block,{}]:[{},d.value.block],f=or(m,h[0],h[1]);return f.length===0?(0,sr.jsx)(lr,{change:"equal"},o):(0,sr.jsx)(lr,{change:d.type,children:(0,sr.jsx)(e,{changes:f,targetA:h[0],targetB:h[1]})},o)}case"text":{let u=d.type==="keep"?["text"in d.old&&d.old.text,d.value.text]:d.type==="removal"?[d.value.text,""]:["",d.value.text];return u[0]===u[1]?(0,sr.jsx)(lr,{change:"equal"},o):(0,sr.jsx)(lr,{change:d.type,children:(0,sr.jsx)(Za,{valueA:u[0],valueB:u[1]})},o)}}})})}var oa=P(j(),1);function xo({FieldsDiff:e,shape:r,valueA:a,valueB:n}){if(r instanceof Ha)return(0,oa.jsx)(Za,{valueA:a,valueB:n});if(r instanceof Cn)return(0,oa.jsx)(yo,{FieldsDiff:e,shape:r,valueA:a,valueB:n});if(r instanceof Rn)return(0,oa.jsx)(mo,{FieldsDiff:e,shape:r,valueA:a,valueB:n});if(r instanceof Pi){let c=or(r,a,n);return(0,oa.jsx)(e,{changes:c,targetA:a,targetB:n})}else r instanceof Fn&&console.warn("UnionShape not supported yet");return null}var Hr=P(j(),1);function Ht({changes:e,targetA:r,targetB:a}){return(0,Hr.jsx)(ja,{children:(0,Hr.jsx)(ue,{gap:10,children:e.map(([n,c],s)=>(0,Hr.jsx)("div",{children:(0,Hr.jsx)(bn,{label:c.label,children:(0,Hr.jsx)(xo,{FieldsDiff:Ht,shape:c,valueA:r?.[n],valueB:a?.[n]})})},n))})})}var qe=P(j(),1),es={root:"alinea-EntryDiff"},rs=V(es);function ko({entryA:e,entryB:r}){let{schema:a}=Me(),n=a[e.type],c=a[r.type];if(n!==c)return(0,qe.jsxs)("div",{children:[(0,qe.jsx)(ft,{children:(0,qe.jsx)(br,{label:ne.label(n)})})," ","=>",(0,qe.jsx)(ft,{children:(0,qe.jsx)(br,{label:ne.label(c)})})]});let t=or(ne.shape(n),e.data,r.data);return(0,qe.jsx)("div",{className:rs.root(),children:(0,qe.jsx)(Ht,{changes:t,targetA:e.data,targetB:r.data})})}x();var Io=P(j(),1),as={root:"alinea-EditModeToggle","root-switch":"alinea-EditModeToggle-switch",rootSwitch:"alinea-EditModeToggle-switch","is-active":"alinea-EditModeToggle-is-active",isActive:"alinea-EditModeToggle-is-active"},ju=V(as),Ut=(e=>(e.Editing="editing",e.Diff="diff",e))(Ut||{});x();var Eo=P(q(),1),he=P(j(),1),ts={root:"alinea-EntryHistory",list:"alinea-EntryHistory-list","list-revision":"alinea-EntryHistory-list-revision",listRevision:"alinea-EntryHistory-list-revision","is-selected":"alinea-EntryHistory-is-selected",isSelected:"alinea-EntryHistory-is-selected"},Vt=V(ts);function So({editor:e}){return(0,he.jsx)("header",{className:Vt.root(),children:(0,he.jsx)(Eo.Suspense,{fallback:(0,he.jsx)(me,{absolute:!0}),children:(0,he.jsx)(is,{editor:e})})})}function is({editor:e}){let r=N(e.revisionsAtom);return(0,he.jsx)("ul",{className:Vt.list(),children:r.map((a,n)=>(0,he.jsx)(ns,{editor:e,revision:a,isCurrent:n===0},a.ref))})}function ns({editor:e,revision:r,isCurrent:a}){let n=new Date(r.createdAt),[c,s]=Kr(e.previewRevision);return(0,he.jsx)("button",{title:r.description,className:Vt.list.revision({selected:c?c.ref===r.ref:a,current:a}),onClick:()=>s(a?void 0:r),children:(0,he.jsxs)($,{center:!0,gap:10,children:[a?(0,he.jsx)(G,{icon:Ki,size:18}):(0,he.jsx)(G,{icon:Wi,size:18}),(0,he.jsxs)(ue,{align:"flex-start",children:[(0,he.jsx)("b",{children:n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}),(0,he.jsx)(Na,{children:r.user?.name})]})]})},r.ref)}x();var dr=P(j(),1),os={root:"alinea-EntryNotice","root-title":"alinea-EntryNotice-title",rootTitle:"alinea-EntryNotice-title","is-draft":"alinea-EntryNotice-is-draft",isDraft:"alinea-EntryNotice-is-draft","is-published":"alinea-EntryNotice-is-published",isPublished:"alinea-EntryNotice-is-published","is-archived":"alinea-EntryNotice-is-archived",isArchived:"alinea-EntryNotice-is-archived","is-publishing":"alinea-EntryNotice-is-publishing",isPublishing:"alinea-EntryNotice-is-publishing"},To=V(os);function Po({icon:e,title:r,variant:a,children:n}){return(0,dr.jsx)(ja,{className:To.root(a),children:(0,dr.jsxs)($,{center:!0,gap:22,children:[e&&(0,dr.jsx)("div",{children:(0,dr.jsx)(G,{icon:e,size:24})}),(0,dr.jsxs)("div",{children:[(0,dr.jsx)("h2",{className:To.root.title(),children:r}),n]})]})})}x();var Xa=P(q(),1);x();x();var cr=(e=>(e.Ping="[alinea-ping]",e.Pong="[alinea-pong]",e.Reload="[alinea-reload]",e.Refetch="[alinea-refetch]",e.Previous="[alinea-previous]",e.Next="[alinea-next]",e.Preview="[alinea-preview]",e))(cr||{});x();var Kt=P(j(),1);function Do(e){return(0,Kt.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Kt.jsx)("path",{fill:"currentColor",d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2s2 .9 2 2s-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"})})}x();var $t=P(j(),1);function Ro(e){return(0,$t.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,$t.jsx)("path",{fill:"currentColor",d:"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z"})})}var ur=P(q(),1),re=P(j(),1),ls={root:"alinea-BrowserPreview","root-bar":"alinea-BrowserPreview-bar",rootBar:"alinea-BrowserPreview-bar","root-iframe":"alinea-BrowserPreview-iframe",rootIframe:"alinea-BrowserPreview-iframe","root-loader":"alinea-BrowserPreview-loader",rootLoader:"alinea-BrowserPreview-loader","is-loading":"alinea-BrowserPreview-is-loading",isLoading:"alinea-BrowserPreview-is-loading",mini:"alinea-BrowserPreview-mini","mini-footer":"alinea-BrowserPreview-mini-footer",miniFooter:"alinea-BrowserPreview-mini-footer"},Ya=V(ls);function Co({url:e,registerLivePreview:r}){let a=(0,ur.useRef)(null),[n,c]=(0,ur.useState)(!0),s=(0,ur.useRef)(!1),t=new URL(e,window.location.href),i=`${t.protocol}//${t.host}`;(0,ur.useEffect)(()=>{c(!0);function h(f){!f.data||typeof f.data!="object"||f.data.action===cr.Pong&&(console.log("[Alinea preview window detected]"),s.current=!0,r({preview(p){l({action:cr.Preview,...p})}}))}return addEventListener("message",h),()=>removeEventListener("message",h)},[e]),(0,ur.useEffect)(()=>{if(n){let h=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(h)}},[n]);function l(h){a.current?.contentWindow?.postMessage(h,i)}function d(){l({action:cr.Previous})}function o(){l({action:cr.Next})}function u(){s.current?l({action:cr.Reload}):a.current?.setAttribute("src",e),c(!0)}let m=(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)("div",{style:{flexGrow:1,position:"relative",overflow:"hidden"},children:[(0,re.jsx)("div",{className:Ya.root.loader({loading:n}),children:(0,re.jsx)(me,{})}),(0,re.jsx)("iframe",{ref:a,className:Ya.root.iframe(),allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-top-navigation allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-downloads allow-pointer-lock",src:e,onLoad:()=>{c(!1);try{l({action:cr.Ping})}catch{s.current=!1}}},e)]})});return(0,re.jsxs)("div",{className:Ya.root(),children:[(0,re.jsx)(wr.Root,{className:Ya.root.bar(),children:(0,re.jsxs)($,{style:{height:"100%"},children:[(0,re.jsx)(wr.Item,{as:"button",icon:fn,onClick:d}),(0,re.jsx)(wr.Item,{as:"button",icon:va,onClick:o}),(0,re.jsx)(wr.Item,{as:"button",icon:Ro,onClick:u}),(0,re.jsx)(wr.Item,{full:!0,style:{flexGrow:1,minWidth:0},children:(0,re.jsx)(vr.Monospace,{style:{display:"block",width:"100%",background:"var(--alinea-highlight)",padding:`${Q(6)} ${Q(15)}`,borderRadius:Q(8)},children:(0,re.jsxs)($,{gap:8,center:!0,children:[(0,re.jsx)(Do,{style:{flexShrink:0}}),(0,re.jsx)("span",{style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e})]})})}),(0,re.jsx)(wr.Item,{as:"a",icon:wn,href:e+"&full",target:"_blank"})]})}),m]})}var la=P(j(),1);function Fo({editor:e,preview:r}){return r?typeof r=="string"?(0,la.jsx)(ss,{editor:e,preview:r}):(0,la.jsx)(ds,{editor:e,preview:r}):null}function ss({editor:e,preview:r}){let a=N(e.selectedPhase),n=`?token=${e.previewToken}&entryId=${e.entryId}&realm=${a}`,[c,s]=(0,Xa.useState)(void 0),t=N(e.yUpdate);(0,Xa.useEffect)(()=>{if(!c)return;let d=Jn(t,{level:9}),o=vi.stringify(d);c.preview({entryId:e.entryId,phase:a,update:o})},[c,t]);let i=new URL(r,location.href),l=new URL(n,i);return(0,la.jsx)(Co,{url:l.toString(),registerLivePreview:s})}function ds({editor:e,preview:r}){let a=N(e.draftEntry);return(0,la.jsx)(r,{entry:a,previewToken:e.previewToken})}var B=P(j(),1),cs={root:"alinea-EntryEdit","root-tabs":"alinea-EntryEdit-tabs",rootTabs:"alinea-EntryEdit-tabs"},Mo=V(cs);function us({editor:e}){let r=N(e.draftEntry),n=N(e.hasChanges)?e.activeVersion:e.phases[e.availablePhases.find(c=>c!==je.Draft)];return(0,B.jsx)(ko,{entryA:n,entryB:r})}function Qa({editor:e}){let{alineaDev:r}=gr(),a=_e(),n=Me(),{isPreviewOpen:c}=Aa(),s=de(),t=N(e.editMode),i=N(e.hasChanges),l=N(e.selectedPhase),d=(0,mr.useRef)(null);(0,mr.useEffect)(()=>{d.current?.scrollTo({top:0})},[e.entryId,t,l]);let o=a&&a!==e.activeVersion.locale,{isBlocking:u,nextRoute:m,confirm:h,cancel:f}=no("Are you sure you want to discard changes?",!o&&i),p=m?.data.editor?.entryId!==e.entryId,g=N(e.form),y=ie(e.saveDraft),k=ie(e.publishDraft),E=ie(e.publishEdits),D=ie(e.discardEdits),R=N(e.showHistory),_=ie(e.saveTranslation),v=N(e.previewRevision),b=e.preview,w=()=>_(a);(0,mr.useEffect)(()=>{function F(U){if((U.ctrlKey||U.metaKey)&&U.key==="s"){if(U.preventDefault(),v){alert("todo");return}o&&i?w():n.enableDrafts?i?y():l===je.Draft&&k():i&&E()}}return document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}},[e,i,y,n.enableDrafts]);let I=ne.sections(e.type),T=I.length===1&&I[0][bt.Data]instanceof Sn,S=T&&I[0][bt.Data],C=S&&S.types.filter(F=>!ne.isHidden(F));return(0,mr.useEffect)(()=>{u&&!p&&h?.()},[u,p,h]),(0,B.jsxs)(B.Fragment,{children:[r&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(oe.Slot,{children:(0,B.jsxs)(oe.Status,{children:["File path: ",e.activeVersion.filePath]})}),(0,B.jsx)(oe.Slot,{children:(0,B.jsxs)(oe.Status,{children:["Parent dir: ",e.activeVersion.parentDir]})}),(0,B.jsx)(oe.Slot,{children:(0,B.jsxs)(oe.Status,{children:["Children dir: ",e.activeVersion.childrenDir]})}),(0,B.jsx)(oe.Slot,{children:(0,B.jsxs)(oe.Status,{children:["Url: ",e.activeVersion.url]})}),(0,B.jsx)(oe.Slot,{children:(0,B.jsx)(oe.Status,{icon:mn,children:e.activeVersion.fileHash})}),(0,B.jsx)(oe.Slot,{children:(0,B.jsx)(oe.Status,{icon:lo,children:e.activeVersion.rowHash})})]}),u&&p&&(0,B.jsx)(zr,{open:!0,onClose:()=>f(),children:(0,B.jsxs)(ue,{gap:30,children:[(0,B.jsxs)("p",{children:["This document was changed, would you like to save your changes",p?" before navigating":"","?"]}),(0,B.jsx)($,{as:"footer",children:(0,B.jsx)(Cr.Right,{children:(0,B.jsxs)($,{gap:16,children:[(0,B.jsx)(Ye,{outline:!0,type:"button",onClick:()=>{D(),h()},children:"Discard my changes"}),n.enableDrafts?(0,B.jsx)(Ye,{onClick:()=>{y(),h()},children:"Save as draft"}):(0,B.jsx)(Ye,{onClick:()=>{E(),h()},children:"Publish changes"})]})})})]})}),(0,B.jsx)(Wr,{scrollRef:d,className:Mo.root(),children:(0,B.jsxs)(Et.Provider,{children:[(0,B.jsx)(hn,{editor:e}),R&&(0,B.jsx)(So,{editor:e}),(0,B.jsxs)(Ka.Root,{children:[(0,B.jsx)(xn,{editor:e,backLink:e.activeVersion.parent?s.entry({entryId:e.activeVersion.parent,workspace:e.activeVersion.workspace}):s.entry({entryId:void 0}),children:T&&(0,B.jsx)("div",{className:Mo.root.tabs(),children:(0,B.jsx)(Tn,{backdrop:!1,section:I[0]})})}),(0,B.jsxs)(Wr.Container,{children:[o&&(0,B.jsx)("div",{children:(0,B.jsxs)(Po,{icon:Ea,title:"Untranslated",variant:"untranslated",children:["This page has not yet been translated to this language,",(0,B.jsx)("br",{}),e.parentNeedsTranslation?"please translate the parent page first.":"please enter the details below and save to start translating."]})}),(0,B.jsx)(Pn,{editor:e,children:(0,B.jsx)(nr,{name:"input form",children:t===Ut.Diff?(0,B.jsx)(us,{editor:e}):T&&C?(0,B.jsx)(Ka.Panels,{children:C.map((F,U)=>(0,B.jsx)(Yi,{form:g,children:(0,B.jsx)(Ka.Panel,{unmount:!1,tabIndex:U,children:(0,B.jsx)(Qr,{type:F})})},U))}):(0,B.jsx)(ue,{gap:18,children:(0,B.jsx)(Qr,{form:g})})})})]})]}),(0,B.jsx)(Et.Root,{})]})}),b&&(0,B.jsx)(so,{children:(0,B.jsx)(mr.Suspense,{children:(0,B.jsx)(Fo,{preview:b,editor:e})})})]})}x();var Gt=P(q(),1);x();var Wt=P(j(),1);function _o(e){return(0,Wt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Wt.jsx)("path",{fill:"currentColor",d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})})}x();var qt=P(j(),1);function Lo(e){return(0,qt.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,qt.jsx)("path",{fill:"currentColor",d:"M12 6.5c2.76 0 5 2.24 5 5c0 .51-.1 1-.24 1.46l3.06 3.06c1.39-1.23 2.49-2.77 3.18-4.53C21.27 7.11 17 4 12 4c-1.27 0-2.49.2-3.64.57l2.17 2.17c.47-.14.96-.24 1.47-.24M2.71 3.16a.996.996 0 0 0 0 1.41l1.97 1.97A11.892 11.892 0 0 0 1 11.5C2.73 15.89 7 19 12 19c1.52 0 2.97-.3 4.31-.82l2.72 2.72a.996.996 0 1 0 1.41-1.41L4.13 3.16c-.39-.39-1.03-.39-1.42 0M12 16.5c-2.76 0-5-2.24-5-5c0-.77.18-1.5.49-2.14l1.57 1.57c-.03.18-.06.37-.06.57c0 1.66 1.34 3 3 3c.2 0 .38-.03.57-.07L14.14 16c-.65.32-1.37.5-2.14.5m2.97-5.33a2.97 2.97 0 0 0-2.64-2.64z"})})}var Vr=P(q(),1);x();gi();var Bo=P(q(),1);var ms=fa(Ji(),1);function Pr(e){return`@alinea/root-${e}`}var hs=te(e=>{let{schema:r}=e(ht);return Ve(r).filter(([a,n])=>!ne.isHidden(n)).map(([a])=>a)});async function fs(e,r,a,n){let c=M().where(M.workspace.is(r),M.root.is(a),M.parent.isNull(),M.active,M.type.isIn(n)).select(M.i18nId).groupBy(M.i18nId).orderBy(M.index.asc()),s=await e.find(c);return{id:Pr(a),index:"",type:"",isFolder:!0,entries:[],children:s}}var ps=te(async e=>{let r=await e(er),a=e(Ca),n=e(hs),{schema:c}=e(ht),s=e(tn),t=e(Lr);return new ms.default(async i=>{let l=new Map,d=i.filter(f=>f!==Pr(s.name)),o={id:M.i18nId,entryId:M.entryId,type:M.type,title:M.title,phase:M.phase,locale:M.locale,workspace:M.workspace,root:M.root,path:M.path,parentPaths({parents:f}){return f(M).select(M.path)}},u=M().select({id:M.i18nId,entryId:M.entryId,index:M.index,type:M.type,data:o,translations({translations:f}){return f().select(o)}}).groupBy(M.i18nId).where(M.i18nId.isIn(d)),m=await r.preferDraft.find(u);for(let f of m){let p=c[f.type],g=ne.meta(p).orderChildrenBy??M.index.asc(),y=f.translations.map(v=>v.entryId).concat(f.entryId),k=await r.preferDraft.find(M().where(M.parent.isIn(y),M.type.isIn(n)).select({locale:M.locale,i18nId:M.i18nId}).orderBy(g)),E=[f.data].concat(f.translations),D=new Set(k.filter(v=>v.locale===a).map(v=>v.i18nId)),R=new Set,_=k.filter(v=>D.has(v.i18nId)?v.locale===a:R.has(v.i18nId)?!1:(R.add(v.i18nId),!0));l.set(f.id,{id:f.id,type:f.type,index:f.index,entries:E,children:[...new Set(_.map(v=>v.i18nId))]})}let h=[];for(let f of i){if(f===Pr(s.name)){h.push(await fs(r.preferDraft,t.name,s.name,n));continue}let p=l.get(f);if(!p){h.push(void 0);continue}let g=p.entries[0].type,y=c[g],k=ne.isContainer(y);h.push({...p,isFolder:k})}return h})}),gs=te(e=>({loader:e(ps)}));function Ao(){let{loader:e}=N(gs),r=Pa(),{config:a}=gr();return(0,Bo.useMemo)(()=>({onDrop(n,{item:c,childIndex:s,insertionIndex:t}){if(n.length!==1)return;let[i]=n;if(s===null)return;if(i.getParent()!==c){console.log("Todo: move entries");return}let l=c.getChildren()[s-1],d=c.getChildren()[s],o=l?.getItemData()?.index??null,u=d?.getItemData()?.index??null;try{let m=Ma(o,u),h=[];for(let f of i.getItemData().entries)h.push({type:Sa.Order,entryId:f.entryId,file:wa(a,f,f.parentPaths),index:m});r(h,!0)}catch(m){console.error(m)}},async getItem(n){return await(await e).clear(n).load(n)},async getChildren(n){return this.getItem(n).then(c=>c?.children??[])}}),[e])}var fe=P(j(),1),Ho=P(q(),1),vs=(e,r)=>{let a,n=null;return()=>{let c=r();return a?(n&&n.length===c.length&&!n.some((t,i)=>t!==c[i])||(a=e(...c),n=c),a):(a=e(...c),n=c,a)}};function bs(e,r){return typeof e=="function"?e(r):e}function da(e,r){return a=>{r.setState(n=>Object.assign(Object.assign({},n),{[e]:bs(a,n[e])}))}}var zo=(e,r=100,a=1e3)=>new Promise(n=>{let c,s=setInterval(()=>{e()&&(n(),clearInterval(s),clearTimeout(c))},r);c=setTimeout(()=>{clearInterval(s)},a)}),No=function(e,r,a,n){function c(s){return s instanceof a?s:new a(function(t){t(s)})}return new(a||(a=Promise))(function(s,t){function i(o){try{d(n.next(o))}catch(u){t(u)}}function l(o){try{d(n.throw(o))}catch(u){t(u)}}function d(o){o.done?s(o.value):c(o.value).then(i,l)}d((n=n.apply(e,r||[])).next())})},ws={key:"tree",getInitialState:e=>Object.assign({expandedItems:[],focusedItem:null},e),getDefaultConfig:(e,r)=>Object.assign({setExpandedItems:da("expandedItems",r),setFocusedItem:da("focusedItem",r)},e),stateHandlerNames:{expandedItems:"setExpandedItems",focusedItem:"setFocusedItem"},createTreeInstance:(e,r)=>Object.assign(Object.assign({},e),{retrieveItemData:()=>{throw new Error("No data-loader registered")},retrieveChildrenIds:()=>{throw new Error("No data-loader registered")},isItemExpanded:a=>r.getState().expandedItems.includes(a),getItemsMeta:()=>{let{rootItemId:a}=r.getConfig(),{expandedItems:n}=r.getState(),c=[],s=(l,d,o,u,m)=>{var h;if(c.push({itemId:l,level:o,index:c.length,parentId:d,setSize:u,posInSet:m}),n.includes(l)){let f=(h=r.retrieveChildrenIds(l))!==null&&h!==void 0?h:[],p=0;for(let g of f)s(g,l,o+1,f.length,p++)}},t=r.retrieveChildrenIds(a),i=0;for(let l of t)s(l,a,0,t.length,i++);return c},expandItem:a=>{var n;r.getItemInstance(a).isFolder()&&(!((n=r.getState().loadingItems)===null||n===void 0)&&n.includes(a)||(r.applySubStateUpdate("expandedItems",c=>[...c,a]),r.rebuildTree()))},collapseItem:a=>{r.getItemInstance(a).isFolder()&&(r.applySubStateUpdate("expandedItems",n=>n.filter(c=>c!==a)),r.rebuildTree())},getFocusedItem:()=>{var a,n;return(n=r.getItemInstance((a=r.getState().focusedItem)!==null&&a!==void 0?a:""))!==null&&n!==void 0?n:r.getItems()[0]},focusItem:a=>{r.applySubStateUpdate("focusedItem",a)},focusNextItem:()=>{let{index:a}=r.getFocusedItem().getItemMeta(),n=Math.min(a+1,r.getItems().length-1);r.focusItem(r.getItems()[n].getId())},focusPreviousItem:()=>{let{index:a}=r.getFocusedItem().getItemMeta(),n=Math.max(a-1,0);r.focusItem(r.getItems()[n].getId())},updateDomFocus:()=>{setTimeout(()=>No(void 0,void 0,void 0,function*(){var a,n;let c=r.getFocusedItem();(n=(a=r.getConfig()).scrollToItem)===null||n===void 0||n.call(a,c),yield zo(()=>c.getElement()!==null,20);let s=c.getElement();s&&s.focus()}))},getContainerProps:()=>{var a;return Object.assign(Object.assign({},(a=e.getContainerProps)===null||a===void 0?void 0:a.call(e)),{role:"tree",ariaLabel:"",ariaActivedescendant:""})}}),createItemInstance:(e,r,a)=>Object.assign(Object.assign({},e),{isLoading:()=>{throw new Error("No data-loader registered")},scrollTo:n=>No(void 0,void 0,void 0,function*(){var c,s;(s=(c=a.getConfig()).scrollToItem)===null||s===void 0||s.call(c,r),yield zo(()=>r.getElement()!==null,20),r.getElement().scrollIntoView(n)}),getId:()=>r.getItemMeta().itemId,getProps:()=>{var n;let c=r.getItemMeta();return Object.assign(Object.assign({},(n=e.getProps)===null||n===void 0?void 0:n.call(e)),{role:"treeitem","aria-setsize":c.setSize,"aria-posinset":c.posInSet,"aria-selected":"false","aria-label":r.getItemName(),"aria-level":c.level,tabIndex:r.isFocused()?0:-1,onClick:r.getMemoizedProp("tree/onClick",()=>s=>{r.setFocused(),r.primaryAction(),!(s.ctrlKey||s.shiftKey||s.metaKey)&&r.isFolder()&&(r.isExpanded()?r.collapse():r.expand())})})},expand:()=>a.expandItem(r.getItemMeta().itemId),collapse:()=>a.collapseItem(r.getItemMeta().itemId),getItemData:()=>a.retrieveItemData(r.getItemMeta().itemId),isExpanded:()=>a.getState().expandedItems.includes(r.getItemMeta().itemId),isFocused:()=>a.getState().focusedItem===r.getItemMeta().itemId||a.getState().focusedItem===null&&r.getItemMeta().index===0,isFolder:()=>r.getItemMeta().level===-1||a.getConfig().isItemFolder(r),getItemName:()=>a.getConfig().getItemName(r),setFocused:()=>a.focusItem(r.getItemMeta().itemId),primaryAction:()=>{var n,c;return(c=(n=a.getConfig()).onPrimaryAction)===null||c===void 0?void 0:c.call(n,r)},getParent:vs(n=>{for(let c=n.index-1;c>=0;c--){let s=a.getItems()[c];if(s.getItemMeta().level<n.level)return s}return a.getItemInstance(a.getConfig().rootItemId)},()=>[r.getItemMeta()]),getIndexInParent:()=>r.getItemMeta().posInSet,getChildren:()=>a.retrieveChildrenIds(r.getItemMeta().itemId).map(n=>a.getItemInstance(n)),getTree:()=>a,getItemAbove:()=>a.getItems()[r.getItemMeta().index-1],getItemBelow:()=>a.getItems()[r.getItemMeta().index+1],getMemoizedProp:(n,c,s)=>{var t,i,l,d,o,u,m;let h=r.getDataRef(),f=(t=h.current.memoizedValues)===null||t===void 0?void 0:t[n];if(f&&(!s||!((l=(i=h.current.memoizedDeps)===null||i===void 0?void 0:i[n])===null||l===void 0)&&l.every((g,y)=>g===s[y])))return f;(d=(u=h.current).memoizedDeps)!==null&&d!==void 0||(u.memoizedDeps={}),(o=(m=h.current).memoizedValues)!==null&&o!==void 0||(m.memoizedValues={});let p=c();return h.current.memoizedDeps[n]=s,h.current.memoizedValues[n]=p,p}}),hotkeys:{focusNextItem:{hotkey:"ArrowDown",canRepeat:!0,preventDefault:!0,isEnabled:e=>{var r,a;return!((a=(r=e.isSearchOpen)===null||r===void 0?void 0:r.call(e))!==null&&a!==void 0&&a)&&!e.getState().dnd},handler:(e,r)=>{r.focusNextItem(),r.updateDomFocus()}},focusPreviousItem:{hotkey:"ArrowUp",canRepeat:!0,preventDefault:!0,isEnabled:e=>{var r,a;return!((a=(r=e.isSearchOpen)===null||r===void 0?void 0:r.call(e))!==null&&a!==void 0&&a)&&!e.getState().dnd},handler:(e,r)=>{r.focusPreviousItem(),r.updateDomFocus()}},expandOrDown:{hotkey:"ArrowRight",canRepeat:!0,handler:(e,r)=>{let a=r.getFocusedItem();a.isExpanded()||!a.isFolder()?(r.focusNextItem(),r.updateDomFocus()):a.expand()}},collapseOrUp:{hotkey:"ArrowLeft",canRepeat:!0,handler:(e,r)=>{var a;let n=r.getFocusedItem();(!n.isExpanded()||!n.isFolder())&&n.getItemMeta().level!==0?((a=n.getParent())===null||a===void 0||a.setFocused(),r.updateDomFocus()):n.collapse()}},focusFirstItem:{hotkey:"Home",handler:(e,r)=>{r.focusItem(r.getItems()[0].getId()),r.updateDomFocus()}},focusLastItem:{hotkey:"End",handler:(e,r)=>{r.focusItem(r.getItems()[r.getItems().length-1].getId()),r.updateDomFocus()}}}},jo=(e,r,a)=>{var n,c;let s={};for(let t of e)Object.assign(s,(c=(n=t.createItemInstance)===null||n===void 0?void 0:n.call(t,Object.assign({},s),s,r,a))!==null&&c!==void 0?c:{});return s},ys=e=>{var r;let a=e?.map(n=>n.key);for(let n of e??[]){let c=(r=n.deps)===null||r===void 0?void 0:r.find(s=>!a?.includes(s));if(c)throw new Error(`${n.key} needs ${c}`)}},xs=(e,r)=>{var a;return r.key&&(!((a=e.overwrites)===null||a===void 0)&&a.includes(r.key))?1:-1},ks=(e=[])=>e.sort(xs),Is=e=>{var r,a,n,c,s;let t={},i=[ws,...ks(e.features)];ys(i);let l=i.reduce((v,b)=>{var w,I;return(I=(w=b.getInitialState)===null||w===void 0?void 0:w.call(b,v,t))!==null&&I!==void 0?I:v},(a=(r=e.initialState)!==null&&r!==void 0?r:e.state)!==null&&a!==void 0?a:{}),d=i.reduce((v,b)=>{var w,I;return(I=(w=b.getDefaultConfig)===null||w===void 0?void 0:w.call(b,v,t))!==null&&I!==void 0?I:v},e),o=i.reduce((v,b)=>Object.assign(Object.assign({},v),b.stateHandlerNames),{}),u,m={current:{}},h={},f=[],p={},g={},y={},k={},E=v=>{f=[],y={};let b=jo([v,...i],t,d.rootItemId);h[d.rootItemId]=b,y[d.rootItemId]={itemId:d.rootItemId,index:-1,parentId:null,level:-1,posInSet:0,setSize:1};for(let w of t.getItemsMeta())if(y[w.itemId]=w,h[w.itemId])f.push(h[w.itemId]);else{let I=jo([v,...i],t,w.itemId);h[w.itemId]=I,f.push(I)}console.log("REBUILT")},D=v=>{for(let b of i)v(b)},R={key:"main",createTreeInstance:v=>Object.assign(Object.assign({},v),{getState:()=>l,setState:b=>{var w;(w=d.setState)===null||w===void 0||w.call(d,l)},applySubStateUpdate:(b,w)=>{l[b]=typeof w=="function"?w(l[b]):w,d[o[b]](l[b])},rebuildTree:()=>{var b;E(R),(b=d.setState)===null||b===void 0||b.call(d,l)},getConfig:()=>d,setConfig:b=>{d=typeof b=="function"?b(d):b,d.state&&(l=Object.assign(Object.assign({},l),d.state))},getItemInstance:b=>h[b],getItems:()=>f,registerElement:b=>{u!==b&&(u&&!b?D(w=>{var I;return(I=w.onTreeUnmount)===null||I===void 0?void 0:I.call(w,t,u)}):!u&&b&&D(w=>{var I;return(I=w.onTreeMount)===null||I===void 0?void 0:I.call(w,t,b)}),u=b)},getElement:()=>u,getDataRef:()=>m,getHotkeyPresets:()=>k}),createItemInstance:(v,b,w,I)=>Object.assign(Object.assign({},v),{registerElement:T=>{if(p[I]===T)return;let S=p[I];S&&!T?D(C=>{var F;return(F=C.onItemUnmount)===null||F===void 0?void 0:F.call(C,b,S,t)}):!S&&T&&D(C=>{var F;return(F=C.onItemMount)===null||F===void 0?void 0:F.call(C,b,T,t)}),p[I]=T},getElement:()=>p[I],getDataRef:()=>{var T;return(T=g[I])!==null&&T!==void 0?T:g[I]={current:{}}},getItemMeta:()=>y[I]})},_=[R,...i];for(let v of _)Object.assign(t,(c=(n=v.createTreeInstance)===null||n===void 0?void 0:n.call(v,Object.assign({},t),t))!==null&&c!==void 0?c:{}),Object.assign(k,(s=v.hotkeys)!==null&&s!==void 0?s:{});return E(R),t},Dr;(function(e){e.Top="top",e.Bottom="bottom",e.Item="item"})(Dr||(Dr={}));var Es={key:"selection",getInitialState:e=>Object.assign({selectedItems:[]},e),getDefaultConfig:(e,r)=>Object.assign({setSelectedItems:da("selectedItems",r)},e),stateHandlerNames:{selectedItems:"setSelectedItems"},createTreeInstance:(e,r)=>Object.assign(Object.assign({},e),{setSelectedItems:a=>{r.applySubStateUpdate("selectedItems",a)},getSelectedItems:()=>r.getState().selectedItems.map(r.getItemInstance)}),createItemInstance:(e,r,a)=>Object.assign(Object.assign({},e),{select:()=>{let{selectedItems:n}=a.getState();a.setSelectedItems(n.includes(r.getItemMeta().itemId)?n:[...n,r.getItemMeta().itemId])},deselect:()=>{let{selectedItems:n}=a.getState();a.setSelectedItems(n.filter(c=>c!==r.getItemMeta().itemId))},isSelected:()=>{let{selectedItems:n}=a.getState();return n.includes(r.getItemMeta().itemId)},selectUpTo:n=>{let c=r.getItemMeta().index,s=a.getFocusedItem().getItemMeta().index,[t,i]=c<s?[c,s]:[s,c],l=a.getItems().slice(t,i+1).map(u=>u.getItemMeta().itemId);if(!n){a.setSelectedItems(l);return}let{selectedItems:d}=a.getState(),o=[...new Set([...d,...l])];a.setSelectedItems(o)},toggleSelect:()=>{r.isSelected()?r.deselect():r.select()},getProps:()=>Object.assign(Object.assign({},e.getProps()),{"aria-selected":r.isSelected()?"true":"false",onClick:r.getMemoizedProp("selection/onClick",()=>n=>{var c,s;n.shiftKey?r.selectUpTo(n.ctrlKey||n.metaKey):n.ctrlKey||n.metaKey?r.toggleSelect():a.setSelectedItems([r.getItemMeta().itemId]),(s=(c=e.getProps()).onClick)===null||s===void 0||s.call(c,n)})})}),hotkeys:{toggleSelectItem:{hotkey:"ctrl+space",handler:(e,r)=>{r.getFocusedItem().toggleSelect()}},selectUpwards:{hotkey:"shift+ArrowUp",handler:()=>{}},selectDownwards:{hotkey:"shift+ArrowDown",handler:()=>{}},selectUpwardsCtrl:{hotkey:"shift+ctrl+ArrowUp",handler:()=>{}},selectDownwardsCtrl:{hotkey:"shift+ctrl+ArrowUp",handler:()=>{}},selectAll:{hotkey:"Control+a",preventDefault:!0,handler:(e,r)=>{r.setSelectedItems(r.getItems().map(a=>a.getId()))}}}},Ss={key:"async-data-loader",getInitialState:e=>Object.assign({loadingItems:[]},e),getDefaultConfig:(e,r)=>Object.assign({setLoadingItems:da("loadingItems",r)},e),stateHandlerNames:{loadingItems:"setLoadingItems"},createTreeInstance:(e,r)=>Object.assign(Object.assign({},e),{retrieveItemData:a=>{var n,c,s,t,i,l,d;let o=r.getConfig(),u=r.getDataRef();return(n=(l=u.current).itemData)!==null&&n!==void 0||(l.itemData={}),(c=(d=u.current).childrenIds)!==null&&c!==void 0||(d.childrenIds={}),u.current.itemData[a]?u.current.itemData[a]:(r.getState().loadingItems.includes(a)||(r.applySubStateUpdate("loadingItems",m=>[...m,a]),(s=o.asyncDataLoader)===null||s===void 0||s.getItem(a).then(m=>{var h;u.current.itemData[a]=m,(h=o.onLoadedItem)===null||h===void 0||h.call(o,a,m),r.applySubStateUpdate("loadingItems",f=>f.filter(p=>p!==a))})),(i=(t=o.createLoadingItemData)===null||t===void 0?void 0:t.call(o))!==null&&i!==void 0?i:null)},retrieveChildrenIds:a=>{var n,c,s,t,i,l,d;let o=r.getConfig(),u=r.getDataRef();return(n=(l=u.current).itemData)!==null&&n!==void 0||(l.itemData={}),(c=(d=u.current).childrenIds)!==null&&c!==void 0||(d.childrenIds={}),u.current.childrenIds[a]?u.current.childrenIds[a]:r.getState().loadingItems.includes(a)?[]:(r.applySubStateUpdate("loadingItems",m=>[...m,a]),!((s=o.asyncDataLoader)===null||s===void 0)&&s.getChildrenWithData?(t=o.asyncDataLoader)===null||t===void 0||t.getChildrenWithData(a).then(m=>{var h,f;for(let{id:g,data:y}of m)u.current.itemData[g]=y,(h=o.onLoadedItem)===null||h===void 0||h.call(o,g,y);let p=m.map(({id:g})=>g);u.current.childrenIds[a]=p,(f=o.onLoadedChildren)===null||f===void 0||f.call(o,a,p),r.applySubStateUpdate("loadingItems",g=>g.filter(y=>y!==a)),r.rebuildTree()}):(i=o.asyncDataLoader)===null||i===void 0||i.getChildren(a).then(m=>{var h;u.current.childrenIds[a]=m,(h=o.onLoadedChildren)===null||h===void 0||h.call(o,a,m),r.applySubStateUpdate("loadingItems",f=>f.filter(p=>p!==a)),r.rebuildTree()}),[])},invalidateItemData:a=>{var n;(n=r.getDataRef().current.itemData)===null||n===void 0||delete n[a],r.retrieveItemData(a)},invalidateChildrenIds:a=>{var n;(n=r.getDataRef().current.childrenIds)===null||n===void 0||delete n[a],r.retrieveChildrenIds(a)}}),createItemInstance:(e,r,a)=>Object.assign(Object.assign({},e),{isLoading:()=>a.getState().loadingItems.includes(r.getItemMeta().itemId),invalidateItemData:()=>a.invalidateItemData(r.getItemMeta().itemId),invalidateChildrenIds:()=>a.invalidateChildrenIds(r.getItemMeta().itemId)})},Ts=({item:e,childIndex:r})=>`${e.getId()}__${r??"none"}`,Ps=(e,r)=>{var a;let n=(a=r.getElement())===null||a===void 0?void 0:a.getBoundingClientRect();return n?(e.pageY-n.top)/n.height:.5},sa=(e,r,a)=>{var n,c,s,t;let i=(n=a.getState().dnd)===null||n===void 0?void 0:n.draggedItems,l=a.getConfig();return!(i&&!(!((s=(c=l.canDrop)===null||c===void 0?void 0:c.call(l,i,r))!==null&&s!==void 0)||s)||!i&&e&&!(!((t=l.canDropForeignDragObject)===null||t===void 0)&&t.call(l,e,r)))},Oo=(e,r,a)=>e<r?Dr.Top:e>a?Dr.Bottom:Dr.Item,rt=(e,r,a,n=a.getConfig().canDropInbetween)=>{var c,s,t,i;let l=a.getConfig(),d=(s=(c=a.getState().dnd)===null||c===void 0?void 0:c.draggedItems)!==null&&s!==void 0?s:[],o={item:r,childIndex:null,insertionIndex:null},u={item:r.getParent(),childIndex:null,insertionIndex:null};if(!n)return sa(e.dataTransfer,u,a)?o:rt(e,r.getParent(),a,!1);let m=sa(e.dataTransfer,o,a),h=Ps(e,r),f=m?Oo(h,(t=l.topLinePercentage)!==null&&t!==void 0?t:.3,(i=l.bottomLinePercentage)!==null&&i!==void 0?i:.7):Oo(h,.5,.5);if(f===Dr.Item)return o;if(!sa(e.dataTransfer,u,a))return rt(e,r.getParent(),a,!1);let p=r.getIndexInParent()+(f===Dr.Top?0:1),g=r.getParent().getChildren().slice(0,p).reduce((y,k)=>k&&d?.some(E=>E.getId()===k.getId())?++y:y,0);return{item:r.getParent(),childIndex:p,insertionIndex:p-g}},Ds={key:"dragAndDrop",deps:["selection"],getDefaultConfig:(e,r)=>Object.assign({canDrop:(a,n)=>n.item.isFolder(),canDropForeignDragObject:()=>!1,setDndState:da("dnd",r)},e),stateHandlerNames:{dnd:"setDndState"},createTreeInstance:(e,r)=>Object.assign(Object.assign({},e),{getDropTarget:()=>{var a,n;return(n=(a=r.getState().dnd)===null||a===void 0?void 0:a.dragTarget)!==null&&n!==void 0?n:null},getDragLineData:()=>{var a,n,c,s,t;let i=r.getDropTarget(),l=((a=i?.item.getItemMeta().level)!==null&&a!==void 0?a:0)+1;if(!i||i.childIndex===null)return null;let d=i.item.getChildren();if(i.childIndex===d.length){let u=(c=(n=d[i.childIndex-1])===null||n===void 0?void 0:n.getElement())===null||c===void 0?void 0:c.getBoundingClientRect();if(u)return{intend:l,top:u.bottom,left:u.left,right:u.right}}let o=(t=(s=d[i.childIndex])===null||s===void 0?void 0:s.getElement())===null||t===void 0?void 0:t.getBoundingClientRect();return o?{intend:l,top:o.top,left:o.left,right:o.right}:null}}),createItemInstance:(e,r,a)=>Object.assign(Object.assign({},e),{getProps:()=>{var n,c,s;return Object.assign(Object.assign({},e.getProps()),{draggable:(s=(c=(n=a.getConfig()).isItemDraggable)===null||c===void 0?void 0:c.call(n,r))!==null&&s!==void 0?s:!0,onDragStart:r.getMemoizedProp("dnd/onDragStart",()=>t=>{var i,l,d;let o=a.getSelectedItems(),u=o.includes(r)?o:[r],m=a.getConfig();if(o.includes(r)||a.setSelectedItems([r.getItemMeta().itemId]),!(!((l=(i=m.canDrag)===null||i===void 0?void 0:i.call(m,u))!==null&&l!==void 0)||l)){t.preventDefault();return}if(m.createForeignDragObject){let{format:h,data:f}=m.createForeignDragObject(u);(d=t.dataTransfer)===null||d===void 0||d.setData(h,f)}a.applySubStateUpdate("dnd",{draggedItems:u,draggingOverItem:a.getFocusedItem()})}),onDragOver:r.getMemoizedProp("dnd/onDragOver",()=>t=>{var i,l,d;let o=rt(t,r,a),u=a.getDataRef();if(!(!((i=a.getState().dnd)===null||i===void 0)&&i.draggedItems)&&!(!((d=(l=a.getConfig()).canDropForeignDragObject)===null||d===void 0)&&d.call(l,t.dataTransfer,o))||!sa(t.dataTransfer,o,a))return;t.preventDefault();let m=Ts(o);m!==u.current.lastDragCode&&(u.current.lastDragCode=m,a.applySubStateUpdate("dnd",h=>Object.assign(Object.assign({},h),{dragTarget:o,draggingOverItem:r})))}),onDragLeave:r.getMemoizedProp("dnd/onDragLeave",()=>()=>{let t=a.getDataRef();t.current.lastDragCode="no-drag",a.applySubStateUpdate("dnd",i=>Object.assign(Object.assign({},i),{draggingOverItem:void 0,dragTarget:void 0}))}),onDragEnd:r.getMemoizedProp("dnd/onDragEnd",()=>t=>{var i,l,d;let o=(i=a.getState().dnd)===null||i===void 0?void 0:i.draggedItems;a.applySubStateUpdate("dnd",null),!(t.dataTransfer.dropEffect==="none"||!o)&&((d=(l=a.getConfig()).onCompleteForeignDrop)===null||d===void 0||d.call(l,o))}),onDrop:r.getMemoizedProp("dnd/onDrop",()=>t=>{var i,l,d;let o=a.getDataRef(),u=rt(t,r,a);if(!sa(t.dataTransfer,u,a))return;t.preventDefault();let m=a.getConfig(),h=(i=a.getState().dnd)===null||i===void 0?void 0:i.draggedItems;o.current.lastDragCode=void 0,a.applySubStateUpdate("dnd",null),h?(l=m.onDrop)===null||l===void 0||l.call(m,h,u):(d=m.onDropForeignDragObject)===null||d===void 0||d.call(m,t.dataTransfer,u)})})},isDropTarget:()=>{let n=a.getDropTarget();return n?n.item.getId()===r.getId():!1},isDropTargetAbove:()=>{let n=a.getDropTarget();return!n||n.childIndex===null||n.item!==r.getParent()?!1:n.childIndex===r.getItemMeta().posInSet},isDropTargetBelow:()=>{let n=a.getDropTarget();return!n||n.childIndex===null||n.item!==r.getParent()?!1:n.childIndex-1===r.getItemMeta().posInSet},isDraggingOver:()=>{var n,c;return((c=(n=a.getState().dnd)===null||n===void 0?void 0:n.draggingOverItem)===null||c===void 0?void 0:c.getId())===r.getId()}})},Rs=e=>{let[r]=(0,Gt.useState)(()=>({current:Is(e)})),[a,n]=(0,Gt.useState)(()=>r.current.getState());return r.current.setConfig(c=>Object.assign(Object.assign(Object.assign({},c),e),{state:Object.assign(Object.assign({},a),e.state),setState:s=>{var t;n(s),(t=e.setState)===null||t===void 0||t.call(e,s)}})),r.current},Cs={tree:"alinea-EntryTree-tree","tree-item":"alinea-EntryTree-tree-item",treeItem:"alinea-EntryTree-tree-item","tree-item-icon":"alinea-EntryTree-tree-item-icon",treeItemIcon:"alinea-EntryTree-tree-item-icon","is-selected":"alinea-EntryTree-is-selected",isSelected:"alinea-EntryTree-is-selected","is-drop":"alinea-EntryTree-is-drop",isDrop:"alinea-EntryTree-is-drop","is-dropAbove":"alinea-EntryTree-is-dropAbove",isDropAbove:"alinea-EntryTree-is-dropAbove","is-dropBelow":"alinea-EntryTree-is-dropBelow",isDropBelow:"alinea-EntryTree-is-dropBelow","tree-item-label":"alinea-EntryTree-tree-item-label",treeItemLabel:"alinea-EntryTree-tree-item-label","tree-item-label-itemName":"alinea-EntryTree-tree-item-label-itemName",treeItemLabelItemName:"alinea-EntryTree-tree-item-label-itemName","is-archived":"alinea-EntryTree-is-archived",isArchived:"alinea-EntryTree-is-archived","tree-item-label-itemname":"alinea-EntryTree-tree-item-label-itemname",treeItemLabelItemname:"alinea-EntryTree-tree-item-label-itemname","is-unpublished":"alinea-EntryTree-is-unpublished",isUnpublished:"alinea-EntryTree-is-unpublished","is-untranslated":"alinea-EntryTree-is-untranslated",isUntranslated:"alinea-EntryTree-is-untranslated","tree-item-arrow":"alinea-EntryTree-tree-item-arrow",treeItemArrow:"alinea-EntryTree-tree-item-arrow","tree-title":"alinea-EntryTree-tree-title",treeTitle:"alinea-EntryTree-tree-title","tree-status":"alinea-EntryTree-tree-status",treeStatus:"alinea-EntryTree-tree-status","is-draft":"alinea-EntryTree-is-draft",isDraft:"alinea-EntryTree-is-draft"},Ur=V(Cs);function et(e,r){return r.entries.find(a=>a.locale===e)??r.entries[0]}function Fs({item:e,data:r}){let{entryId:a}=N(Fa),n=_e(),{schema:c}=Me(),s=(0,Vr.useRef)(r),t=r??s.current;if(!t)return null;s.current=t;let i=et(n,t),{icon:l}=ne.meta(c[i.type]),d=i.phase===je.Draft,o=n&&i.locale!==n,u=i.phase===je.Archived,m=i.phase===je.Archived,h=a&&t.id===a;return(0,Ho.createElement)("div",{...e.getProps(),ref:e.registerElement,className:Ur.tree.item({selected:h,unpublished:m,untranslated:o,drop:e.isDropTarget()&&e.isDraggingOver(),dropAbove:e.isDropTargetAbove()&&e.isDraggingOver(),dropBelow:e.isDropTargetBelow()&&e.isDraggingOver()}),key:e.getId(),"data-id":e.getId()},(0,fe.jsxs)("button",{className:Ur.tree.item.label(),title:et(n,t).title,style:{paddingLeft:Q((e.getItemMeta().level+1)*12)},children:[(0,fe.jsx)("span",{className:Ur.tree.item.icon(),children:(0,fe.jsx)(G,{icon:o?Ea:m?Lo:l??_o})}),(0,fe.jsx)("span",{className:Ur.tree.item.label.itemName(),children:et(n,t).title}),e.isFolder()&&(0,fe.jsx)("span",{className:Ur.tree.item.arrow(),children:e.isExpanded()?(0,fe.jsx)(G,{icon:Sr,size:18}):(0,fe.jsx)(G,{icon:pn,size:18})})]}))}function Uo({i18nId:e,selected:r=[]}){let a=Oe(),{schema:n}=Me(),c=Ao(),s=xe(),t=de(),i=_e(),l=Rs({rootItemId:Pr(a.name),canDropInbetween:!0,onDrop(o,u){return c.onDrop(o,u)},asyncDataLoader:c,getItemName:o=>o.getItemData()&&et(i,o.getItemData()).title,isItemFolder:o=>o.getItemData()&&!!o.getItemData().isFolder,onPrimaryAction:o=>{s(t.entry({entryId:o.getId()}))},initialState:{expandedItems:r},state:{selectedItems:e?[e]:[]},features:[Ss,Es,Ds]}),d=N(Ta);return(0,Vr.useEffect)(()=>{(async()=>{for(let o of r)await c.getChildren(o).then(()=>new Promise(requestAnimationFrame)),l.expandItem(o)})()},[r.join()]),(0,Vr.useEffect)(()=>{l.invalidateChildrenIds(Pr(a.name));for(let o of l.getItems()){let u=o.getItemData()?.type,m=n[u],{orderChildrenBy:h}=ne.meta(m);h&&l.invalidateChildrenIds(o.getId())}},[c]),(0,Vr.useEffect)(()=>{for(let o of d)try{let u=l.getItemInstance(o);if(!u){l.invalidateChildrenIds(Pr(a.name));continue}let h=u.getParent()?.getId();h&&l.invalidateChildrenIds(h),l.invalidateChildrenIds(o),l.invalidateItemData(o)}catch(u){console.error(u)}},[d]),(0,fe.jsx)(fe.Fragment,{children:(0,fe.jsx)("div",{ref:l.registerElement,className:Ur.tree(),children:l.getItems().map((o,u)=>{let m=o.getItemData();return(0,fe.jsx)(Fs,{item:o,data:m},o.getId())})})})}x();var pe=P(j(),1),Ms={root:"alinea-RootOverview","root-icon":"alinea-RootOverview-icon",rootIcon:"alinea-RootOverview-icon"},Vo=V(Ms);function Ko({root:e}){return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)($r,{children:(0,pe.jsx)("title",{children:e.label})}),(0,pe.jsx)(Wr,{children:(0,pe.jsxs)("div",{className:Vo.root(),children:[(0,pe.jsx)(G,{icon:e.icon||Ua,className:Vo.root.icon()}),(0,pe.jsx)(vr.H1,{children:(0,pe.jsx)(br,{label:e.label})}),(0,pe.jsxs)(vr.P,{style:{textAlign:"center"},children:["Select an entry in the navigation tree",(0,pe.jsx)("br",{}),"on the left to start editing"]})]})})]})}x();var hr=P(q(),1);var ge=P(j(),1),_s={root:"alinea-SearchBox","root-label":"alinea-SearchBox-label",rootLabel:"alinea-SearchBox-label","root-label-icon":"alinea-SearchBox-label-icon",rootLabelIcon:"alinea-SearchBox-label-icon","root-label-input":"alinea-SearchBox-label-input",rootLabelInput:"alinea-SearchBox-label-input","root-popover":"alinea-SearchBox-popover",rootPopover:"alinea-SearchBox-popover","root-popover-item":"alinea-SearchBox-popover-item",rootPopoverItem:"alinea-SearchBox-popover-item"},ca=V(_s);function $o(){let e=de(),r=xe(),a=Er(),{name:n}=He(),{name:c}=Oe(),s=_e(),[t,i]=(0,hr.useState)(""),[l,d]=(0,hr.useState)(!1),o=gn({onClear:()=>i("")}),u=(0,hr.useMemo)(()=>{let f=t.replace(/,/g," ").split(" ").filter(Boolean);return M({workspace:n,root:c}).where(s?M.locale.is(s):!0).search(...f)},[n,c,t,s]),[m,h]=(0,hr.useState)("row");return(0,hr.useLayoutEffect)(()=>{i("")},[a]),(0,ge.jsxs)("div",{className:ca.root(),onFocus:()=>{d(!0)},onBlur:({currentTarget:f,relatedTarget:p})=>{f.contains(p)||(d(!1),o.focusProps.onBlur())},children:[(0,ge.jsx)("div",{children:(0,ge.jsxs)("label",{className:ca.root.label(),...o.focusProps,children:[(0,ge.jsx)(Ln,{className:ca.root.label.icon()}),(0,ge.jsx)("input",{placeholder:"Search",value:t,onChange:f=>i(f.target.value),className:ca.root.label.input()}),l&&(0,ge.jsx)(Cr.Right,{children:(0,ge.jsxs)($,{gap:10,children:[(0,ge.jsx)(Le,{size:12,icon:_n,active:m==="row",onClick:()=>h("row")}),(0,ge.jsx)(Le,{size:12,icon:Mn,active:m==="thumb",onClick:()=>h("thumb")})]})})]})}),(0,ge.jsx)(o.Container,{children:l&&t&&(0,ge.jsx)("div",{className:ca.root.popover(),children:(0,ge.jsx)(vn,{border:!1,cursor:u,type:m,toggleSelect:f=>r(e.entry(f)),max:25})})})]})}x();x();var Wo=P(j(),1),Ls={root:"alinea-Link"},Bs=V(Ls);function qo({href:e,external:r,children:a,...n}){let s=e&&!r?Ra(e):{href:e};return(0,Wo.jsx)("a",{...n,...s,className:Bs.root.mergeProps(n)(),children:a})}var De=P(q(),1);var Re=P(j(),1),As={root:"alinea-NewEntry","root-header":"alinea-NewEntry-header",rootHeader:"alinea-NewEntry-header","root-footer":"alinea-NewEntry-footer",rootFooter:"alinea-NewEntry-footer","root-footer-link":"alinea-NewEntry-footer-link",rootFooterLink:"alinea-NewEntry-footer-link",form:"alinea-NewEntry-form","is-loading":"alinea-NewEntry-is-loading",isLoading:"alinea-NewEntry-is-loading"},at=V(As),Jt={id:M.entryId,i18nId:M.i18nId,type:M.type,path:M.path,url:M.url,level:M.level,parent:M.parent,parentPaths({parents:e}){return e().select(M.path)},childrenIndex({children:e}){return e().select(M.index).orderBy(M.index.asc()).first()}},zs=kn("Title",{autoFocus:!0});function Ns({parentId:e}){let r=Me(),a=N(er),{data:n}=pa(["parent-req",e],async()=>a.preferDraft.maybeGet(M({entryId:e}).select(Jt)),{suspense:!0,keepPreviousData:!0,staleTime:0}),c=n&&(ne.isContainer(r.schema[n.type])?n.id:n.parent),{pathname:s}=Er(),t=de(),i=xe(),l=_e(),d=Pa(),{name:o}=He(),u=Ve(r.schema).filter(([,S])=>ne.isContainer(S)).map(S=>S[0]),m=Oe(),h=(0,De.useMemo)(()=>Tt("Parent",{location:{workspace:o,root:m.name},condition:M.type.isIn(u),initialValue:c?{[St.id]:"parent",[St.type]:"entry",[Br.entry]:c}:void 0}),[]);async function f(S){if(S){let C=await a.preferDraft.get(M({entryId:S}).select(Jt)),F=C&&r.schema[C.type];return F?wt.contained(r.schema,ne.contains(F)):gt(r.schema)}else return m.contains?wt.contained(r.schema,m.contains):gt(r.schema)}let p=(0,De.useMemo)(()=>{let S=Nr("Select type",{options:{}});return It.options(S,async C=>{let U=C(h)?.[Br.entry],O=await f(U);return{options:Mr(O.map(H=>[H,r.schema[H]]).filter(H=>H[1]).map(([H,ae])=>[H,ne.label(ae)||H]))}})},[]),g=(0,De.useMemo)(()=>{let S=Tt("Copy content from");return It.options(S,C=>{let F=C(p);return{readOnly:!F,pickers:{entry:Bn({condition:M.type.is(F),withNavigation:!1,hint:void 0,title:"Copy content from",max:1,selection:An})}}})},[]),[y,k]=(0,De.useState)(!1),E=ie(Ta),D=(0,De.useMemo)(()=>Di({fields:{parent:h,title:zs,type:p,copyFrom:g}}),[]),R=Zi(D),_=R.fieldInfo(h),v=R.fieldInfo(p),b=R.fieldInfo(g),w=N(v.value),I=N(_.value);(0,De.useEffect)(()=>{f(I?.[Br.entry]).then(S=>{S.length>0&&v.mutator(S[0])})},[I]),(0,De.useEffect)(()=>{b.mutator.replace(void 0)},[w]);async function T(S){S.preventDefault();let{title:C,type:F}=R.data();if(!F||!C)return;k(!0);let U=Si(C),O=vt(),H={workspace:o,root:m.name,locale:l??null,path:U,phase:r.enableDrafts?je.Draft:je.Published},ae=R.data().parent?.[Br.entry],X=await a.preferPublished.maybeGet(M({entryId:ae}).select(Jt)),ve=X?X.parentPaths.concat(X.path):[],ce=Mi(r,H,ve),Ee=Fi(r,H,ve),Ze=Ci(ce),Se=r.schema[F],le=_i(Se,{...H,parentPaths:ve}),Ue=R.data().copyFrom?.[Br.entry],ha=Ue?await a.preferPublished.maybeGet(M({entryId:Ue}).select(M.data)):{},pr=await Gi(r,{entryId:O,...H,filePath:ce,type:F,path:U,title:C,url:le,index:Ma(null,X?.childrenIndex||null),parent:X?.id??null,seeded:null,level:X?X.level+1:0,parentDir:Ze,childrenDir:Ee,i18nId:m.i18n?vt():O,modifiedAt:Date.now(),active:!0,main:!1,data:{...ha,title:C,path:U},searchableText:""});return d([{type:Sa.Create,entryId:pr.entryId,entry:pr,file:wa(r,H,ve)}]).then(()=>{k(!1),i(t.entry({entryId:pr.i18nId})),X&&E([X.i18nId])})}return(0,Re.jsxs)("form",{onSubmit:T,className:at.form({loading:y}),children:[y&&(0,Re.jsx)(me,{absolute:!0}),(0,Re.jsx)(Qr,{border:!1,form:R}),(0,Re.jsxs)("div",{className:at.root.footer(),children:[(0,Re.jsx)(qo,{href:s,className:at.root.footer.link(),children:"Cancel"}),(0,Re.jsx)(Ye,{children:"Create"})]})]})}function Go({parentId:e}){let r=xe(),{pathname:a}=Er();function n(){r(a)}return(0,Re.jsx)(zr,{open:!0,onClose:n,className:at.root(),children:(0,Re.jsx)(De.Suspense,{fallback:(0,Re.jsx)(me,{}),children:(0,Re.jsx)(Ns,{parentId:e})})})}var se=P(j(),1),js={"root-sidebar":"alinea-ContentView-sidebar",rootSidebar:"alinea-ContentView-sidebar","root-create":"alinea-ContentView-create",rootCreate:"alinea-ContentView-create","root-create-button":"alinea-ContentView-create-button",rootCreateButton:"alinea-ContentView-create-button"},Jo=V(js);function Zo({editor:e}){let r=He(),a=Oe(),{search:n}=Er(),c=e?.view??Qa,s=a?.view??Ko,t=de(),i=xe(),{schema:l}=Me(),d=e&&l[e.activeVersion.type];return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(Pe.Tree,{children:[(0,se.jsx)($o,{}),(0,se.jsx)(Uo,{i18nId:e?.activeVersion.i18nId,selected:e?.activeVersion.parents}),(0,se.jsx)("div",{className:Jo.root.create(),children:(0,se.jsx)("button",{className:Jo.root.create.button(),onClick:()=>i(t.create({entryId:e?.activeVersion.i18nId,workspace:r.name,root:a.name})),children:(0,se.jsxs)($,{center:!0,gap:8,align:"center",children:[(0,se.jsx)(G,{icon:En,size:17}),(0,se.jsx)("span",{children:"Create new"})]})})})]}),n==="?new"&&(0,se.jsx)(Go,{parentId:e?.entryId}),(0,se.jsx)(nr,{name:"content view",fallback:(0,se.jsx)(me,{absolute:!0}),children:d&&e?(0,se.jsx)(c,{type:d,editor:e}):(0,se.jsx)(s,{root:a})})]})}x();var Ie=P(j(),1),Os={root:"alinea-DraftsOverview","root-inner":"alinea-DraftsOverview-inner",rootInner:"alinea-DraftsOverview-inner","root-header":"alinea-DraftsOverview-header",rootHeader:"alinea-DraftsOverview-header","root-list":"alinea-DraftsOverview-list",rootList:"alinea-DraftsOverview-list",diff:"alinea-DraftsOverview-diff"},wp=V(Os);function Yo({editor:e}){let r=N(er),a=de(),n=He(),{data:c,refetch:s}=pa(["drafts-overview"],()=>r.drafts.find(M({workspace:n.name})),{suspense:!0}),t=c,i=e?.entryId&&t.find(d=>d.entryId===e?.entryId);function l(){}return(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsxs)(Pe.Tree,{children:[(0,Ie.jsxs)($,{center:!0,style:{padding:`${Q(10)} ${Q(20)}`},children:[(0,Ie.jsx)(vr.H4,{flat:!0,children:"DRAFTS"}),(0,Ie.jsx)(Cr.Right,{children:(0,Ie.jsx)(Ye,{iconRight:va,onClick:l,children:"Publish all"})})]}),(0,Ie.jsx)(ue,{children:t.map(d=>(0,Ie.jsx)("div",{children:d.title},d.entryId))})]}),i&&e&&(0,Ie.jsx)(Qa,{editor:e})]})}var Qo=P(j(),1),el=mt(()=>te(async e=>{let r=e(Fa),a=e(Ca)??null;return{editor:await e(rn({locale:a,i18nId:r?.entryId}))}})),Hs=new qa({path:"*",loader:el,component:Zo}),Us=new qa({path:"/draft/:workspace?/:root?/:id?",loader:el,component:Yo}),Vs=mt(()=>te(async e=>{let r=e(Ir),a=new URLSearchParams(r.search),n=a.get("url"),c=a.get("workspace")??void 0,s=a.get("root")??void 0,t={url:n};return c&&(t.workspace=c),s&&(t.root=s),await(await e(er)).preferDraft.maybeGet(M(t).select({entryId:M.entryId,root:M.root,workspace:M.workspace}))})),Ks=new qa({path:"/edit",loader:Vs,component:$s});function $s(e){let r=de(),a=xe();return(0,Xo.useLayoutEffect)(()=>{e&&a(r.entry(e))},[e]),(0,Qo.jsx)(me,{absolute:!0})}var Ws=[Us,Ks,Hs],rl=new ro({routes:Ws});x();x();var ee=P(q(),1),Ae=P(q(),1),ze=P(q(),1),al=(0,Ae.createContext)(null);function tl(){let e=(0,Ae.useContext)(al);if(e===null){let r=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,tl),r}return e}function qs(){let[e,r]=(0,Ae.useState)([]);return[e.length>0?e.join(" "):void 0,(0,Ae.useMemo)(()=>function(a){let n=J(s=>(r(t=>[...t,s]),()=>r(t=>{let i=t.slice(),l=i.indexOf(s);return l!==-1&&i.splice(l,1),i}))),c=(0,Ae.useMemo)(()=>({register:n,slot:a.slot,name:a.name,props:a.props}),[n,a.slot,a.name,a.props]);return Ae.default.createElement(al.Provider,{value:c},a.children)},[r])]}var Gs="label";function Js(e,r){let a=Ce(),{id:n=`headlessui-label-${a}`,passive:c=!1,...s}=e,t=tl(),i=be(r);yr(()=>t.register(n),[n,t.register]);let l={ref:i,...t.props,id:n};return c&&("onClick"in l&&(delete l.htmlFor,delete l.onClick),"onClick"in s&&delete s.onClick),we({ourProps:l,theirProps:s,slot:t.slot||{},defaultTag:Gs,name:t.name||"Label"})}var Zs=Te(Js),Ys=Object.assign(Zs,{}),il=(0,ze.createContext)(null);function nl(){let e=(0,ze.useContext)(il);if(e===null){let r=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(r,nl),r}return e}function Xs(){let[e,r]=(0,ze.useState)([]);return[e.length>0?e.join(" "):void 0,(0,ze.useMemo)(()=>function(a){let n=J(s=>(r(t=>[...t,s]),()=>r(t=>{let i=t.slice(),l=i.indexOf(s);return l!==-1&&i.splice(l,1),i}))),c=(0,ze.useMemo)(()=>({register:n,slot:a.slot,name:a.name,props:a.props}),[n,a.slot,a.name,a.props]);return ze.default.createElement(il.Provider,{value:c},a.children)},[r])]}var Qs="p";function ed(e,r){let a=Ce(),{id:n=`headlessui-description-${a}`,...c}=e,s=nl(),t=be(r);yr(()=>s.register(n),[n,s.register]);let i={ref:t,...s.props,id:n};return we({ourProps:i,theirProps:c,slot:s.slot||{},defaultTag:Qs,name:s.name||"Description"})}var rd=Te(ed),ad=Object.assign(rd,{}),Zt=(0,ee.createContext)(null);Zt.displayName="GroupContext";var td=ee.Fragment;function id(e){var r;let[a,n]=(0,ee.useState)(null),[c,s]=qs(),[t,i]=Xs(),l=(0,ee.useMemo)(()=>({switch:a,setSwitch:n,labelledby:c,describedby:t}),[a,n,c,t]),d={},o=e;return ee.default.createElement(i,{name:"Switch.Description"},ee.default.createElement(s,{name:"Switch.Label",props:{htmlFor:(r=l.switch)==null?void 0:r.id,onClick(u){a&&(u.currentTarget.tagName==="LABEL"&&u.preventDefault(),a.click(),a.focus({preventScroll:!0}))}}},ee.default.createElement(Zt.Provider,{value:l},we({ourProps:d,theirProps:o,defaultTag:td,name:"Switch.Group"}))))}var nd="button";function od(e,r){let a=Ce(),{id:n=`headlessui-switch-${a}`,checked:c,defaultChecked:s=!1,onChange:t,name:i,value:l,form:d,...o}=e,u=(0,ee.useContext)(Zt),m=(0,ee.useRef)(null),h=be(m,r,u===null?null:u.setSwitch),[f,p]=un(c,t,s),g=J(()=>p?.(!f)),y=J(v=>{if(Jr(v.currentTarget))return v.preventDefault();v.preventDefault(),g()}),k=J(v=>{v.key===Fe.Space?(v.preventDefault(),g()):v.key===Fe.Enter&&cn(v.currentTarget)}),E=J(v=>v.preventDefault()),D=(0,ee.useMemo)(()=>({checked:f}),[f]),R={id:n,ref:h,role:"switch",type:xa(e,m),tabIndex:0,"aria-checked":f,"aria-labelledby":u?.labelledby,"aria-describedby":u?.describedby,onClick:y,onKeyUp:k,onKeyPress:E},_=Vi();return(0,ee.useEffect)(()=>{var v;let b=(v=m.current)==null?void 0:v.closest("form");b&&s!==void 0&&_.addEventListener(b,"reset",()=>{p(s)})},[m,p]),ee.default.createElement(ee.default.Fragment,null,i!=null&&f&&ee.default.createElement(ar,{features:rr.Hidden,...Ai({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:d,checked:f,name:i,value:l})}),we({ourProps:R,theirProps:o,slot:D,defaultTag:nd,name:"Switch"}))}var ld=Te(od),sd=id,tt=Object.assign(ld,{Group:sd,Label:Ys,Description:ad});x();var Yt=P(j(),1);function ol({user:e}){let r=e.sub.charAt(0).toUpperCase(),a=Ri(e.sub),n=jr(a);return(0,Yt.jsx)("div",{style:{borderRadius:"100%",background:a,color:n,width:Q(24),height:Q(24),display:"flex",justifyContent:"center",alignItems:"center",fontSize:Q(13),fontWeight:"bold"},children:(0,Yt.jsx)("span",{children:r})})}x();var ll=P(q(),1),dl=P(q(),1),it=P(q(),1),Z=P(q(),1),cl=P(yi(),1),nt=P(q(),1),Je=P(q(),1),A=P(q(),1);var fr=P(j(),1),Ge=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ge||{});function sl(){let e=(0,ll.useRef)(0);return Oi("keydown",r=>{r.key==="Tab"&&(e.current=r.shiftKey?1:0)},!0),e}function dd(e,r,a,n){let c=ya(a);(0,dl.useEffect)(()=>{e=e??window;function s(t){c.current(t)}return e.addEventListener(r,s,n),()=>e.removeEventListener(r,s,n)},[e,r,n])}function cd(e){let r=J(e),a=(0,it.useRef)(!1);(0,it.useEffect)(()=>(a.current=!1,()=>{a.current=!0,Li(()=>{a.current&&r()})}),[r])}var ud=(0,nt.createContext)(!1);function md(){return(0,nt.useContext)(ud)}function hd(e){let r=md(),a=(0,Z.useContext)(ul),n=xr(e),[c,s]=(0,Z.useState)(()=>{if(!r&&a!==null||yt.isServer)return null;let t=n?.getElementById("headlessui-portal-root");if(t)return t;if(n===null)return null;let i=n.createElement("div");return i.setAttribute("id","headlessui-portal-root"),n.body.appendChild(i)});return(0,Z.useEffect)(()=>{c!==null&&(n!=null&&n.body.contains(c)||n==null||n.body.appendChild(c))},[c,n]),(0,Z.useEffect)(()=>{r||a!==null&&s(a.current)},[a,s,r]),c}var fd=Z.Fragment;function pd(e,r){let a=e,n=(0,Z.useRef)(null),c=be(xt(o=>{n.current=o}),r),s=xr(n),t=hd(n),[i]=(0,Z.useState)(()=>{var o;return yt.isServer?null:(o=s?.createElement("div"))!=null?o:null}),l=(0,Z.useContext)(Qt),d=Bi();return yr(()=>{!t||!i||t.contains(i)||(i.setAttribute("data-headlessui-portal",""),t.appendChild(i))},[t,i]),yr(()=>{if(i&&l)return l.register(i)},[l,i]),cd(()=>{var o;!t||!i||(i instanceof Node&&t.contains(i)&&t.removeChild(i),t.childNodes.length<=0&&((o=t.parentElement)==null||o.removeChild(t)))}),d?!t||!i?null:(0,cl.createPortal)(we({ourProps:{ref:c},theirProps:a,defaultTag:fd,name:"Portal"}),i):null}var gd=Z.Fragment,ul=(0,Z.createContext)(null);function vd(e,r){let{target:a,...n}=e,c={ref:be(r)};return Z.default.createElement(ul.Provider,{value:a},we({ourProps:c,theirProps:n,defaultTag:gd,name:"Popover.Group"}))}var Qt=(0,Z.createContext)(null);function bd(){let e=(0,Z.useContext)(Qt),r=(0,Z.useRef)([]),a=J(s=>(r.current.push(s),e&&e.register(s),()=>n(s))),n=J(s=>{let t=r.current.indexOf(s);t!==-1&&r.current.splice(t,1),e&&e.unregister(s)}),c=(0,Z.useMemo)(()=>({register:a,unregister:n,portals:r}),[a,n,r]);return[r,(0,Z.useMemo)(()=>function({children:s}){return Z.default.createElement(Qt.Provider,{value:c},s)},[c])]}var wd=Te(pd),yd=Te(vd),rg=Object.assign(wd,{Group:yd});function xd({defaultContainers:e=[],portals:r,mainTreeNodeRef:a}={}){var n;let c=(0,Je.useRef)((n=a?.current)!=null?n:null),s=xr(c),t=J(()=>{var i;let l=[];for(let d of e)d!==null&&(d instanceof HTMLElement?l.push(d):"current"in d&&d.current instanceof HTMLElement&&l.push(d.current));if(r!=null&&r.current)for(let d of r.current)l.push(d);for(let d of(i=s?.querySelectorAll("html > *, body > *"))!=null?i:[])d!==document.body&&d!==document.head&&d instanceof HTMLElement&&d.id!=="headlessui-portal-root"&&(d.contains(c.current)||l.some(o=>d.contains(o))||l.push(d));return l});return{resolveContainers:t,contains:J(i=>t().some(l=>l.contains(i))),mainTreeNodeRef:c,MainTreeNode:(0,Je.useMemo)(()=>function(){return a!=null?null:Je.default.createElement(ar,{features:rr.Hidden,ref:c})},[c,a])}}function kd(){let e=(0,Je.useRef)(null);return{mainTreeNodeRef:e,MainTreeNode:(0,Je.useMemo)(()=>function(){return Je.default.createElement(ar,{features:rr.Hidden,ref:e})},[e])}}var Id=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Id||{}),Ed=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Ed||{}),Sd={0:e=>{let r={...e,popoverState:Xe(e.popoverState,{0:1,1:0})};return r.popoverState===0&&(r.__demoMode=!1),r},1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,r){return e.button===r.button?e:{...e,button:r.button}},3(e,r){return e.buttonId===r.buttonId?e:{...e,buttonId:r.buttonId}},4(e,r){return e.panel===r.panel?e:{...e,panel:r.panel}},5(e,r){return e.panelId===r.panelId?e:{...e,panelId:r.panelId}}},ei=(0,A.createContext)(null);ei.displayName="PopoverContext";function ot(e){let r=(0,A.useContext)(ei);if(r===null){let a=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,ot),a}return r}var ri=(0,A.createContext)(null);ri.displayName="PopoverAPIContext";function ai(e){let r=(0,A.useContext)(ri);if(r===null){let a=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(a,ai),a}return r}var ti=(0,A.createContext)(null);ti.displayName="PopoverGroupContext";function ml(){return(0,A.useContext)(ti)}var lt=(0,A.createContext)(null);lt.displayName="PopoverPanelContext";function Td(){return(0,A.useContext)(lt)}function Pd(e,r){return Xe(r.type,Sd,e,r)}var Dd="div";function Rd(e,r){var a;let{__demoMode:n=!1,...c}=e,s=(0,A.useRef)(null),t=be(r,xt(O=>{s.current=O})),i=(0,A.useRef)([]),l=(0,A.useReducer)(Pd,{__demoMode:n,popoverState:n?0:1,buttons:i,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:(0,A.createRef)(),afterPanelSentinel:(0,A.createRef)()}),[{popoverState:d,button:o,buttonId:u,panel:m,panelId:h,beforePanelSentinel:f,afterPanelSentinel:p},g]=l,y=xr((a=s.current)!=null?a:o),k=(0,A.useMemo)(()=>{if(!o||!m)return!1;for(let Ee of document.querySelectorAll("body > *"))if(Number(Ee?.contains(o))^Number(Ee?.contains(m)))return!0;let O=Ia(),H=O.indexOf(o),ae=(H+O.length-1)%O.length,X=(H+1)%O.length,ve=O[ae],ce=O[X];return!m.contains(ve)&&!m.contains(ce)},[o,m]),E=ya(u),D=ya(h),R=(0,A.useMemo)(()=>({buttonId:E,panelId:D,close:()=>g({type:1})}),[E,D,g]),_=ml(),v=_?.registerPopover,b=J(()=>{var O;return(O=_?.isFocusWithinPopoverGroup())!=null?O:y?.activeElement&&(o?.contains(y.activeElement)||m?.contains(y.activeElement))});(0,A.useEffect)(()=>v?.(R),[v,R]);let[w,I]=bd(),T=xd({mainTreeNodeRef:_?.mainTreeNodeRef,portals:w,defaultContainers:[o,m]});dd(y?.defaultView,"focus",O=>{var H,ae,X,ve;O.target!==window&&O.target instanceof HTMLElement&&d===0&&(b()||o&&m&&(T.contains(O.target)||(ae=(H=f.current)==null?void 0:H.contains)!=null&&ae.call(H,O.target)||(ve=(X=p.current)==null?void 0:X.contains)!=null&&ve.call(X,O.target)||g({type:1})))},!0),Hi(T.resolveContainers,(O,H)=>{g({type:1}),ji(H,Ni.Loose)||(O.preventDefault(),o?.focus())},d===0);let S=J(O=>{g({type:1});let H=O?O instanceof HTMLElement?O:"current"in O&&O.current instanceof HTMLElement?O.current:o:o;H?.focus()}),C=(0,A.useMemo)(()=>({close:S,isPortalled:k}),[S,k]),F=(0,A.useMemo)(()=>({open:d===0,close:S}),[d,S]),U={ref:t};return A.default.createElement(lt.Provider,{value:null},A.default.createElement(ei.Provider,{value:l},A.default.createElement(ri.Provider,{value:C},A.default.createElement(Ui,{value:Xe(d,{0:kr.Open,1:kr.Closed})},A.default.createElement(I,null,we({ourProps:U,theirProps:c,slot:F,defaultTag:Dd,name:"Popover"}),A.default.createElement(T.MainTreeNode,null))))))}var Cd="button";function Fd(e,r){let a=Ce(),{id:n=`headlessui-popover-button-${a}`,...c}=e,[s,t]=ot("Popover.Button"),{isPortalled:i}=ai("Popover.Button"),l=(0,A.useRef)(null),d=`headlessui-focus-sentinel-${Ce()}`,o=ml(),u=o?.closeOthers,m=Td()!==null;(0,A.useEffect)(()=>{if(!m)return t({type:3,buttonId:n}),()=>{t({type:3,buttonId:null})}},[m,n,t]);let[h]=(0,A.useState)(()=>Symbol()),f=be(l,r,m?null:T=>{if(T)s.buttons.current.push(h);else{let S=s.buttons.current.indexOf(h);S!==-1&&s.buttons.current.splice(S,1)}s.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),T&&t({type:2,button:T})}),p=be(l,r),g=xr(l),y=J(T=>{var S,C,F;if(m){if(s.popoverState===1)return;switch(T.key){case Fe.Space:case Fe.Enter:T.preventDefault(),(C=(S=T.target).click)==null||C.call(S),t({type:1}),(F=s.button)==null||F.focus();break}}else switch(T.key){case Fe.Space:case Fe.Enter:T.preventDefault(),T.stopPropagation(),s.popoverState===1&&u?.(s.buttonId),t({type:0});break;case Fe.Escape:if(s.popoverState!==0)return u?.(s.buttonId);if(!l.current||g!=null&&g.activeElement&&!l.current.contains(g.activeElement))return;T.preventDefault(),T.stopPropagation(),t({type:1});break}}),k=J(T=>{m||T.key===Fe.Space&&T.preventDefault()}),E=J(T=>{var S,C;Jr(T.currentTarget)||e.disabled||(m?(t({type:1}),(S=s.button)==null||S.focus()):(T.preventDefault(),T.stopPropagation(),s.popoverState===1&&u?.(s.buttonId),t({type:0}),(C=s.button)==null||C.focus()))}),D=J(T=>{T.preventDefault(),T.stopPropagation()}),R=s.popoverState===0,_=(0,A.useMemo)(()=>({open:R}),[R]),v=xa(e,l),b=m?{ref:p,type:v,onKeyDown:y,onClick:E}:{ref:f,id:s.buttonId,type:v,"aria-expanded":s.popoverState===0,"aria-controls":s.panel?s.panelId:void 0,onKeyDown:y,onKeyUp:k,onClick:E,onMouseDown:D},w=sl(),I=J(()=>{let T=s.panel;if(!T)return;function S(){Xe(w.current,{[Ge.Forwards]:()=>Qe(T,Ke.First),[Ge.Backwards]:()=>Qe(T,Ke.Last)})===ka.Error&&Qe(Ia().filter(C=>C.dataset.headlessuiFocusGuard!=="true"),Xe(w.current,{[Ge.Forwards]:Ke.Next,[Ge.Backwards]:Ke.Previous}),{relativeTo:s.button})}S()});return A.default.createElement(A.default.Fragment,null,we({ourProps:b,theirProps:c,slot:_,defaultTag:Cd,name:"Popover.Button"}),R&&!m&&i&&A.default.createElement(ar,{id:d,features:rr.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:I}))}var Md="div",_d=Gr.RenderStrategy|Gr.Static;function Ld(e,r){let a=Ce(),{id:n=`headlessui-popover-overlay-${a}`,...c}=e,[{popoverState:s},t]=ot("Popover.Overlay"),i=be(r),l=kt(),d=l!==null?(l&kr.Open)===kr.Open:s===0,o=J(m=>{if(Jr(m.currentTarget))return m.preventDefault();t({type:1})}),u=(0,A.useMemo)(()=>({open:s===0}),[s]);return we({ourProps:{ref:i,id:n,"aria-hidden":!0,onClick:o},theirProps:c,slot:u,defaultTag:Md,features:_d,visible:d,name:"Popover.Overlay"})}var Bd="div",Ad=Gr.RenderStrategy|Gr.Static;function zd(e,r){let a=Ce(),{id:n=`headlessui-popover-panel-${a}`,focus:c=!1,...s}=e,[t,i]=ot("Popover.Panel"),{close:l,isPortalled:d}=ai("Popover.Panel"),o=`headlessui-focus-sentinel-before-${Ce()}`,u=`headlessui-focus-sentinel-after-${Ce()}`,m=(0,A.useRef)(null),h=be(m,r,v=>{i({type:4,panel:v})}),f=xr(m);yr(()=>(i({type:5,panelId:n}),()=>{i({type:5,panelId:null})}),[n,i]);let p=kt(),g=p!==null?(p&kr.Open)===kr.Open:t.popoverState===0,y=J(v=>{var b;switch(v.key){case Fe.Escape:if(t.popoverState!==0||!m.current||f!=null&&f.activeElement&&!m.current.contains(f.activeElement))return;v.preventDefault(),v.stopPropagation(),i({type:1}),(b=t.button)==null||b.focus();break}});(0,A.useEffect)(()=>{var v;e.static||t.popoverState===1&&((v=e.unmount)==null||v)&&i({type:4,panel:null})},[t.popoverState,e.unmount,e.static,i]),(0,A.useEffect)(()=>{if(t.__demoMode||!c||t.popoverState!==0||!m.current)return;let v=f?.activeElement;m.current.contains(v)||Qe(m.current,Ke.First)},[t.__demoMode,c,m,t.popoverState]);let k=(0,A.useMemo)(()=>({open:t.popoverState===0,close:l}),[t,l]),E={ref:h,id:n,onKeyDown:y,onBlur:c&&t.popoverState===0?v=>{var b,w,I,T,S;let C=v.relatedTarget;C&&m.current&&((b=m.current)!=null&&b.contains(C)||(i({type:1}),((I=(w=t.beforePanelSentinel.current)==null?void 0:w.contains)!=null&&I.call(w,C)||(S=(T=t.afterPanelSentinel.current)==null?void 0:T.contains)!=null&&S.call(T,C))&&C.focus({preventScroll:!0})))}:void 0,tabIndex:-1},D=sl(),R=J(()=>{let v=m.current;if(!v)return;function b(){Xe(D.current,{[Ge.Forwards]:()=>{var w;Qe(v,Ke.First)===ka.Error&&((w=t.afterPanelSentinel.current)==null||w.focus())},[Ge.Backwards]:()=>{var w;(w=t.button)==null||w.focus({preventScroll:!0})}})}b()}),_=J(()=>{let v=m.current;if(!v)return;function b(){Xe(D.current,{[Ge.Forwards]:()=>{var w;if(!t.button)return;let I=Ia(),T=I.indexOf(t.button),S=I.slice(0,T+1),C=[...I.slice(T+1),...S];for(let F of C.slice())if(F.dataset.headlessuiFocusGuard==="true"||(w=t.panel)!=null&&w.contains(F)){let U=C.indexOf(F);U!==-1&&C.splice(U,1)}Qe(C,Ke.First,{sorted:!1})},[Ge.Backwards]:()=>{var w;Qe(v,Ke.Previous)===ka.Error&&((w=t.button)==null||w.focus())}})}b()});return A.default.createElement(lt.Provider,{value:n},g&&d&&A.default.createElement(ar,{id:o,ref:t.beforePanelSentinel,features:rr.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:R}),we({ourProps:E,theirProps:s,slot:k,defaultTag:Bd,features:Ad,visible:g,name:"Popover.Panel"}),g&&d&&A.default.createElement(ar,{id:u,ref:t.afterPanelSentinel,features:rr.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_}))}var Nd="div";function jd(e,r){let a=(0,A.useRef)(null),n=be(a,r),[c,s]=(0,A.useState)([]),t=kd(),i=J(p=>{s(g=>{let y=g.indexOf(p);if(y!==-1){let k=g.slice();return k.splice(y,1),k}return g})}),l=J(p=>(s(g=>[...g,p]),()=>i(p))),d=J(()=>{var p;let g=zi(a);if(!g)return!1;let y=g.activeElement;return(p=a.current)!=null&&p.contains(y)?!0:c.some(k=>{var E,D;return((E=g.getElementById(k.buttonId.current))==null?void 0:E.contains(y))||((D=g.getElementById(k.panelId.current))==null?void 0:D.contains(y))})}),o=J(p=>{for(let g of c)g.buttonId.current!==p&&g.close()}),u=(0,A.useMemo)(()=>({registerPopover:l,unregisterPopover:i,isFocusWithinPopoverGroup:d,closeOthers:o,mainTreeNodeRef:t.mainTreeNodeRef}),[l,i,d,o,t.mainTreeNodeRef]),m=(0,A.useMemo)(()=>({}),[]),h=e,f={ref:n};return A.default.createElement(ti.Provider,{value:u},we({ourProps:f,theirProps:h,slot:m,defaultTag:Nd,name:"Popover.Group"}),A.default.createElement(t.MainTreeNode,null))}var Od=Te(Rd),Hd=Te(Fd),Ud=Te(Ld),Vd=Te(zd),Kd=Te(jd),Xt=Object.assign(Od,{Button:Hd,Overlay:Ud,Panel:Vd,Group:Kd}),$d={root:"alinea-PopoverMenu",trigger:"alinea-PopoverMenu-trigger",items:"alinea-PopoverMenu-items","is-left":"alinea-PopoverMenu-is-left",isLeft:"alinea-PopoverMenu-is-left","is-right":"alinea-PopoverMenu-is-right",isRight:"alinea-PopoverMenu-is-right",header:"alinea-PopoverMenu-header",footer:"alinea-PopoverMenu-footer"},ua=V($d),Ne;(e=>{function r(s){return(0,fr.jsx)(Xt,{children:(0,fr.jsx)("div",{...s,className:ua.root.mergeProps(s)()})})}e.Root=r,e.Trigger=ua.trigger.toElement(Xt.Button);function a({left:s,right:t,...i}){return(0,fr.jsx)(Xt.Panel,{...i,className:ua.items.mergeProps(i)({left:s,right:t})})}e.Items=a;function n({children:s}){return(0,fr.jsx)("div",{className:ua.header(),children:(0,fr.jsx)("header",{children:s})})}e.Header=n;function c({children:s}){return(0,fr.jsx)("div",{className:ua.footer(),children:(0,fr.jsx)("footer",{children:s})})}e.Footer=c})(Ne||(Ne={}));x();var ii=P(j(),1);function hl(e){return(0,ii.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,ii.jsx)("path",{fill:"currentColor",d:"M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 21H7v-1h10v1zm0-3H7V6h10v12zm0-14H7V3h10v1zM9.5 8.5H12V7H8v4h1.5V8.5zM12 17h4v-4h-1.5v2.5H12V17z"})})}x();var ni=P(j(),1);function st(e){return(0,ni.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,ni.jsx)("path",{fill:"currentColor",d:"M20 15.31L23.31 12L20 8.69V4h-4.69L12 .69L8.69 4H4v4.69L.69 12L4 15.31V20h4.69L12 23.31L15.31 20H20v-4.69zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6z"})})}x();var fl=te(e=>{let{color:r}=e(Lr);return r});x();var oi=P(j(),1);function pl(e){return(0,oi.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,oi.jsx)("path",{d:"M15.9814 3.47727V5.07955C14.8773 3.78409 13.2379 3 10.9963 3C6.61338 3 3 6.92045 3 12C3 17.0795 6.61338 21 10.9963 21C13.2379 21 14.8773 20.2159 15.9814 18.9205V20.5227H21V3.47727H15.9814ZM12 16.1591C9.69145 16.1591 8.01859 14.5568 8.01859 12C8.01859 9.44318 9.69145 7.84091 12 7.84091C14.3086 7.84091 15.9814 9.44318 15.9814 12C15.9814 14.5568 14.3086 16.1591 12 16.1591Z",fill:"currentColor"})})}var z=P(j(),1),Wd={root:"alinea-Toolbar","root-menu":"alinea-Toolbar-menu",rootMenu:"alinea-Toolbar-menu","root-portal":"alinea-Toolbar-portal",rootPortal:"alinea-Toolbar-portal","root-portal-slot":"alinea-Toolbar-portal-slot",rootPortalSlot:"alinea-Toolbar-portal-slot","root-switch":"alinea-Toolbar-switch",rootSwitch:"alinea-Toolbar-switch","is-checked":"alinea-Toolbar-is-checked",isChecked:"alinea-Toolbar-is-checked","root-switch-slider":"alinea-Toolbar-switch-slider",rootSwitchSlider:"alinea-Toolbar-switch-slider","root-workspace":"alinea-Toolbar-workspace",rootWorkspace:"alinea-Toolbar-workspace"},Rr=V(Wd);function li({label:e,color:r,icon:a}){let n=a?(0,z.jsx)(a,{}):(0,z.jsx)(dn,{});return(0,z.jsxs)($,{center:!0,gap:12,children:[(0,z.jsx)(Ti,{foreground:Ba(r),background:r,children:(0,z.jsx)(pl,{})}),(0,z.jsx)("div",{style:{fontSize:"13px",fontWeight:600},children:(0,z.jsx)(br,{label:e})})]})}var dt;(e=>{({Provider:e.Provider,Portal:e.Portal,Slot:e.Slot}=La());function r(){let a=N(fl),n=_a(),{config:c}=N(ga),s=N(nn),t=N(_r),i=t.size||16,l=t?.scheme==="dark",d=N(Lr),o=xe(),{isNavOpen:u,isPreviewOpen:m,toggleNav:h,togglePreview:f}=Aa(),p=Object.entries(c.workspaces),[g,y,k]=sn(a),E={"--alinea-hue":g,"--alinea-saturation":`${y*100}%`,"--alinea-lightness":`${k*100}%`},D=Nr("Default workspace",Mr(Ve(c.workspaces).map(([b,w])=>[b,qr.label(w)||b]))),R=ie(Zr),_=ie(Xr),v=ie(Yr);return(0,z.jsxs)($,{center:!0,gap:12,className:Rr.root(),style:E,children:[(0,z.jsx)("div",{className:Rr.root.menu(),onClick:h,children:(0,z.jsx)(Le,{icon:$i,active:u})}),p.length>1?(0,z.jsxs)(ye.Root,{bottom:!0,children:[(0,z.jsx)(ye.Trigger,{children:(0,z.jsxs)($,{center:!0,gap:4,children:[(0,z.jsx)(li,{label:d.label,color:d.color,icon:d.icon}),(0,z.jsx)(G,{icon:qi})]})}),(0,z.jsx)(ye.Items,{children:p.map(([b,w])=>{let{roots:I,label:T,color:S,icon:C}=qr.data(w),[F,U]=Ve(I)[0];return(0,z.jsx)(ye.Item,{onClick:()=>o(s.entry({workspace:b,root:F,locale:ba.defaultLocale(U)})),children:(0,z.jsx)(li,{label:T,color:S,icon:C})},b)})})]}):(0,z.jsx)("a",{...Ra(s.root({workspace:d.name})),className:Rr.root.workspace(),children:(0,z.jsx)(li,{label:d.label,color:d.color,icon:d.icon})}),(0,z.jsx)("div",{className:Rr.root.portal(),children:(0,z.jsx)(e.Portal,{className:Rr.root.portal.slot()})}),(0,z.jsx)("div",{children:(0,z.jsxs)($,{center:!0,gap:10,children:[(0,z.jsxs)(Ne.Root,{children:[(0,z.jsx)(Ne.Trigger,{children:(0,z.jsxs)($,{center:!0,gap:4,children:[(0,z.jsx)(ol,{user:n.user}),(0,z.jsx)(Sr,{})]})}),(0,z.jsx)(Ne.Items,{right:!0,children:(0,z.jsxs)(ue,{gap:25,children:[Ar.hasAuth(c)&&(0,z.jsx)(Ne.Header,{children:(0,z.jsx)("p",{children:n.user.sub.charAt(0).toUpperCase()+n.user.sub.slice(1)})}),(0,z.jsx)(ue,{gap:15,children:(0,z.jsxs)($,{justify:"space-between",style:{padding:Q(6)},children:[(0,z.jsxs)($,{center:!0,gap:16,children:[(0,z.jsx)(G,{icon:st,size:20}),(0,z.jsx)(tt,{checked:l,onChange:R,className:Rr.root.switch({checked:l}),children:(0,z.jsx)("span",{className:Rr.root.switch.slider({checked:l})})})]}),(0,z.jsxs)($,{center:!0,gap:4,children:[(0,z.jsx)(G,{icon:Oa,size:20,style:{marginRight:Q(12)}}),(0,z.jsx)(Le,{icon:Sr,onClick:()=>_(i-1),disabled:i<=16}),(0,z.jsx)(Le,{icon:za,onClick:()=>_(i+1),disabled:i>=40})]})]})}),Ar.hasAuth(c)&&(0,z.jsx)(Ne.Footer,{children:(0,z.jsx)(ye.Root,{children:(0,z.jsx)(ye.Item,{onClick:n.end,children:"Logout"})})})]})})]}),(0,z.jsx)(Le,{icon:hl,onClick:f,active:m})]})})]})}e.Root=r})(dt||(dt={}));x();var ma=P(q(),1);x();var gl=()=>N(_r);var wl=P(j(),1),qd={root:"alinea-Viewport","is-light":"alinea-Viewport-is-light",isLight:"alinea-Viewport-is-light","is-dark":"alinea-Viewport-is-dark",isDark:"alinea-Viewport-is-dark",main:"alinea-Viewport-main","is-contain":"alinea-Viewport-is-contain",isContain:"alinea-Viewport-is-contain"},vl=V(qd),bl=typeof window<"u"?ma.useLayoutEffect:ma.useEffect;function yl({children:e,color:r="#6673FC",contain:a,attachToBody:n,...c}){let s=r,t=jr(s),{scheme:i,size:l}=gl();(0,ma.useEffect)(()=>{l&&(document.documentElement.style.fontSize=`${l}px`)},[l]);let d={"--alinea-accent":s,"--alinea-accent-foreground":t},o=vl.root(i),u=Object.entries(d).map(([h,f])=>`${h}: ${f}`).join("; ");return bl(()=>{n&&(document.body.className=o,document.body.style.cssText=u)},[n,u,o]),bl(()=>{let h=document.createElement("meta");return h.setAttribute("content",s),h.setAttribute("name","theme-color"),document.head.appendChild(h),()=>{document.head.removeChild(h)}},[s]),(0,wl.jsx)("main",{...n?{}:{className:o,style:d},className:vl.main.mergeProps(c)({contain:a}),children:e})}x();x();var si=P(j(),1);function di(e){return(0,si.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,si.jsx)("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88a9.947 9.947 0 0 1 12.28 0C16.43 19.18 14.03 20 12 20z"})})}var xl=P(q(),1);var Y=P(j(),1),Gd={"root-switch":"alinea-SidebarSettings-switch",rootSwitch:"alinea-SidebarSettings-switch","is-checked":"alinea-SidebarSettings-is-checked",isChecked:"alinea-SidebarSettings-is-checked","root-switch-slider":"alinea-SidebarSettings-switch-slider",rootSwitchSlider:"alinea-SidebarSettings-switch-slider","root-username":"alinea-SidebarSettings-username",rootUsername:"alinea-SidebarSettings-username"},ci=V(Gd);function kl(){let e=_a(),{config:r}=N(ga),a=N(_r),n=a.size||16,c=a?.scheme==="dark",s=Object.entries(r.workspaces),t=(0,xl.useMemo)(()=>Nr("Default workspace",Mr(Ve(r.workspaces).map(([u,m])=>[u,qr.label(m)||u]))),[r.workspaces]),i=ie(Zr),l=ie(Xr),d=ie(Yr);function o(u){document.body.setAttribute("data-disable-transition","true"),u(),setTimeout(()=>document.body.removeAttribute("data-disable-transition"))}return(0,Y.jsxs)(ye.Root,{top:!0,style:{margin:"auto",marginBottom:0},children:[(0,Y.jsx)(ye.Trigger,{style:{width:"100%"},children:(0,Y.jsx)(Pe.Nav.Item,{"aria-label":"Settings",children:(0,Y.jsx)(G,{icon:di})})}),(0,Y.jsx)(ye.Items,{style:{maxWidth:Q(200)},children:(0,Y.jsxs)(ue,{gap:10,children:[e.user.name&&(0,Y.jsx)(Ne.Header,{children:(0,Y.jsxs)($,{center:!0,gap:10,className:ci.root.username(),children:[(0,Y.jsx)(G,{icon:di,size:26}),(0,Y.jsx)(Na,{children:e.user.name})]})}),(0,Y.jsx)(ue,{gap:8,children:(0,Y.jsxs)($,{justify:"space-between",style:{padding:Q(6)},children:[(0,Y.jsxs)($,{center:!0,gap:16,children:[(0,Y.jsx)(G,{icon:st,size:20,title:"Switch theme"}),(0,Y.jsx)(tt,{checked:c,onChange:()=>{o(i)},className:ci.root.switch({checked:c}),children:(0,Y.jsx)("span",{className:ci.root.switch.slider({checked:c})})})]}),(0,Y.jsxs)($,{center:!0,gap:4,children:[(0,Y.jsx)(G,{icon:Oa,size:20,style:{marginRight:Q(12)},title:"Font size"}),(0,Y.jsx)(Le,{icon:Sr,onClick:()=>o(()=>l(n-1)),disabled:n<=16,title:"Decrease font size"}),(0,Y.jsx)(Le,{icon:za,onClick:()=>o(()=>l(n+1)),disabled:n>=40,title:"Increase font size"})]})]})}),e.end&&(0,Y.jsx)(Ne.Footer,{children:(0,Y.jsx)(ye.Root,{children:(0,Y.jsx)(ye.Item,{onClick:e.end,children:"Logout"})})})]})})]})}var K=P(j(),1),Jd=te(e=>{let r=e(Ir);return!!e(Da({route:an.matchEntry}))||r.pathname==="/"});function Zd(){Qi();let{alineaDev:e,fullPage:r}=gr(),a=de(),n=N(Jd),{name:c,color:s,roots:t}=He(),{name:i}=Oe(),l=ln(),d=_e(),[o,u]=on(),[m,h]=Kr(en),f=N(Xi);return(0,Il.useEffect)(()=>{u(d)},[d]),(0,K.jsxs)(K.Fragment,{children:[m&&(0,K.jsx)(zr,{open:!0,onClose:()=>h(null),children:(0,K.jsx)("div",{style:{padding:Q(16)},children:m})}),(0,K.jsx)(oe.Provider,{children:(0,K.jsx)(dt.Provider,{children:(0,K.jsxs)(Pe.Provider,{children:[(0,K.jsx)($r,{children:(0,K.jsx)(Lt,{color:s})}),(0,K.jsxs)("div",{style:{flex:"1",display:"flex",minHeight:0,position:"relative"},children:[(0,K.jsxs)(Pe.Nav,{children:[Object.entries(t).map(([p,g],y)=>{let k=p===i,{entryId:E,...D}=l,R=D.root===p?a.entry(D):a.root({workspace:c,root:p,locale:o}),{label:_,icon:v}=ba.data(g);return(0,K.jsx)(Pe.Nav.Item,{selected:n&&k,href:R,"aria-label":_,children:(0,K.jsx)(G,{icon:v??Ua})},p)}),(0,K.jsx)(kl,{})]}),(0,K.jsx)(yn,{children:(0,K.jsx)(nr,{name:"main",fallback:(0,K.jsx)(me,{absolute:!0}),children:(0,K.jsx)(oo,{fallback:null})})})]}),e&&(0,K.jsx)(oe.Root,{children:(0,K.jsx)(oe.Status,{icon:Qn,children:f})})]})})})]})}function Yd(){let[e,r]=Kr(ki),{fullPage:a,config:n}=gr(),{color:c}=Ar.mainWorkspace(n),s=n.dashboard?.auth;return e?(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(nr,{name:"router",fallback:(0,K.jsx)(me,{absolute:!0}),children:(0,K.jsx)(to,{router:rl,children:(0,K.jsx)(Zd,{})})})}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)($r,{children:(0,K.jsx)(Lt,{color:c})}),s&&(0,K.jsx)(nr,{name:"auth",fallback:(0,K.jsx)(me,{absolute:!0}),children:(0,K.jsx)(s,{setSession:r})})]})}function El(e){let r=e.fullPage!==!1,{color:a}=Ar.mainWorkspace(e.config);return(0,K.jsx)(eo,{...e,children:(0,K.jsx)(yl,{attachToBody:r,contain:!0,color:a,children:(0,K.jsx)(Yd,{})})})}var Rl=P(j(),1);x();var Pl=P(Tl(),1);function Dl(e,r){let a=(0,Pl.createRoot)(r);return a.render(e),()=>a.unmount()}async function xv(e){let r=document.getElementsByTagName("script"),a=r[r.length-1],n=document.createElement("div");n.id="root",a.parentElement.replaceChild(n,a);let c=await Xd(),s=new wi({config:c,url:e});Dl((0,Rl.jsx)(El,{config:c,client:s}),n)}async function Xd(){let r=await import("./config.js?"+Math.random());if("cms"in r)return r.cms.config;if("config"in r)return r.config;throw new Error('No config found in "/config.js"')}export{xv as boot};
