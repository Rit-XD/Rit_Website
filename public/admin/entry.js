import{$ as xi,$b as dn,A as j,Aa as Ce,Ab as Lr,B as V,Ba as Ri,Bb as Xi,Bc as In,C as Q,Ca as Ke,Cb as Qi,Cc as Sn,D as q,Da as ya,Db as Da,Dc as En,E as me,Ea as xa,Eb as en,Ec as Tn,F as $,Fa as Ci,Fb as rn,Fc as Pn,G as Cr,Ga as Mi,Gb as an,Gc as bt,H as Ye,Ha as Qe,Hb as Me,Hc as Dn,I as ut,Ia as kr,Ib as ce,Ic as Fn,J as br,Ja as _i,Jb as tn,Jc as Rn,K as he,Ka as Li,Kb as Fa,Kc as Cn,L as vi,La as Ir,Lb as Ra,Lc as Mn,M as wr,Ma as gt,Mb as Ca,N as bi,Na as Bi,Nb as je,Nc as wt,O as pa,Oa as zi,Ob as Oe,Oc as Ar,P as Ue,Pa as qr,Pb as nn,Q as Mr,Qa as ye,Qb as Ma,R as wi,Ra as Ai,Rb as on,S as Kr,Sa as Ni,Sb as ln,T as mt,Ta as ji,Tb as rr,U as M,Ua as Oi,Ub as ar,V as Ve,Va as Hi,Vb as Pe,Wa as ka,Wb as _a,X as ht,Xa as Ui,Xb as Tr,Y as yi,Ya as Ia,Yb as La,Z as de,Zb as Ba,_b as sn,a as El,aa as ga,ab as Vi,ac as cn,bc as un,c as P,ca as ki,cc as mn,d as x,da as $r,dc as hn,e as li,eb as Ki,ec as _e,f as ma,fa as Ii,fb as vt,g as si,ga as Si,gb as $i,gc as za,h as di,ha as Ei,hb as Wi,hc as fn,i as ci,ia as va,ib as qi,ic as pn,j as ui,ja as Ti,jb as er,jc as gn,k as te,ka as yr,kb as Sa,kc as Yr,l as G,la as ft,lb as Ea,lc as vn,m as N,ma as xr,mb as Gi,mc as bn,n as ie,na as ba,nb as Ji,nc as Aa,o as Ur,oa as Pi,ob as Sr,oc as Na,p as mi,pa as J,pb as Ta,pc as wn,q as hi,qa as Di,qb as Er,r as ha,ra as Re,rb as xe,rc as Br,s as dt,sa as Xe,sb as Pa,t as fi,ta as wa,tb as Zi,tc as zr,u as fa,ua as pt,ub as Ne,uc as yn,v as pi,va as be,vb as Yi,vc as xn,w as gi,wa as Wr,wb as _r,wc as ja,x as ct,xa as we,xb as Gr,xc as Oa,y as vr,ya as Te,yb as Jr,yc as kn,z as Vr,za as Fi,zb as Zr}from"./chunk-VTLY3ZQF.js";var yl=El(ti=>{"use strict";x();var wl=mi();ti.createRoot=wl.createRoot,ti.hydrateRoot=wl.hydrateRoot;var Z0});x();x();x();var Le=Uint8Array,ke=Uint16Array,St=Int32Array,Et=new Le([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tt=new Le([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_n=new Le([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),An=function(e,a){for(var r=new ke(31),n=0;n<31;++n)r[n]=a+=1<<e[n-1];for(var c=new St(r[30]),n=1;n<30;++n)for(var d=r[n];d<r[n+1];++d)c[d]=d-r[n]<<5|n;return{b:r,r:c}},Nn=An(Et,2),Tl=Nn.b,xt=Nn.r;Tl[28]=258,xt[258]=28;var jn=An(Tt,0),Zd=jn.b,Ln=jn.r,kt=new ke(32768);for(W=0;W<32768;++W)$e=(W&43690)>>1|(W&21845)<<1,$e=($e&52428)>>2|($e&13107)<<2,$e=($e&61680)>>4|($e&3855)<<4,kt[W]=(($e&65280)>>8|($e&255)<<8)>>1;var $e,W,ea=function(e,a,r){for(var n=e.length,c=0,d=new ke(a);c<n;++c)e[c]&&++d[e[c]-1];var t=new ke(a);for(c=1;c<a;++c)t[c]=t[c-1]+d[c-1]<<1;var i;if(r){i=new ke(1<<a);var l=15-a;for(c=0;c<n;++c)if(e[c])for(var s=c<<4|e[c],o=a-e[c],u=t[e[c]-1]++<<o,m=u|(1<<o)-1;u<=m;++u)i[kt[u]>>l]=s}else for(i=new ke(n),c=0;c<n;++c)e[c]&&(i[c]=kt[t[e[c]-1]++]>>15-e[c]);return i},Pr=new Le(288);for(W=0;W<144;++W)Pr[W]=8;var W;for(W=144;W<256;++W)Pr[W]=9;var W;for(W=256;W<280;++W)Pr[W]=7;var W;for(W=280;W<288;++W)Pr[W]=8;var W,Ha=new Le(32);for(W=0;W<32;++W)Ha[W]=5;var W,Pl=ea(Pr,9,0);var Dl=ea(Ha,5,0);var On=function(e){return(e+7)/8|0},Fl=function(e,a,r){(a==null||a<0)&&(a=0),(r==null||r>e.length)&&(r=e.length);var n=new Le(r-a);return n.set(e.subarray(a,r)),n};var We=function(e,a,r){r<<=a&7;var n=a/8|0;e[n]|=r,e[n+1]|=r>>8},Xr=function(e,a,r){r<<=a&7;var n=a/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},yt=function(e,a){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var c=r.length,d=r.slice();if(!c)return{t:Un,l:0};if(c==1){var t=new Le(r[0].s+1);return t[r[0].s]=1,{t,l:1}}r.sort(function(R,_){return R.f-_.f}),r.push({s:-1,f:25001});var i=r[0],l=r[1],s=0,o=1,u=2;for(r[0]={s:-1,f:i.f+l.f,l:i,r:l};o!=c-1;)i=r[r[s].f<r[u].f?s++:u++],l=r[s!=o&&r[s].f<r[u].f?s++:u++],r[o++]={s:-1,f:i.f+l.f,l:i,r:l};for(var m=d[0].s,n=1;n<c;++n)d[n].s>m&&(m=d[n].s);var h=new ke(m+1),f=It(r[o-1],h,0);if(f>a){var n=0,p=0,g=f-a,y=1<<g;for(d.sort(function(_,w){return h[w.s]-h[_.s]||_.f-w.f});n<c;++n){var k=d[n].s;if(h[k]>a)p+=y-(1<<f-h[k]),h[k]=a;else break}for(p>>=g;p>0;){var T=d[n].s;h[T]<a?p-=1<<a-h[T]++-1:++n}for(;n>=0&&p;--n){var D=d[n].s;h[D]==a&&(--h[D],++p)}f=a}return{t:new Le(h),l:f}},It=function(e,a,r){return e.s==-1?Math.max(It(e.l,a,r+1),It(e.r,a,r+1)):a[e.s]=r},Bn=function(e){for(var a=e.length;a&&!e[--a];);for(var r=new ke(++a),n=0,c=e[0],d=1,t=function(l){r[n++]=l},i=1;i<=a;++i)if(e[i]==c&&i!=a)++d;else{if(!c&&d>2){for(;d>138;d-=138)t(32754);d>2&&(t(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(t(c),--d;d>6;d-=6)t(8304);d>2&&(t(d-3<<5|8208),d=0)}for(;d--;)t(c);d=1,c=e[i]}return{c:r.subarray(0,n),n:a}},Qr=function(e,a){for(var r=0,n=0;n<a.length;++n)r+=e[n]*a[n];return r},Hn=function(e,a,r){var n=r.length,c=On(a+2);e[c]=n&255,e[c+1]=n>>8,e[c+2]=e[c]^255,e[c+3]=e[c+1]^255;for(var d=0;d<n;++d)e[c+d+4]=r[d];return(c+4+n)*8},zn=function(e,a,r,n,c,d,t,i,l,s,o){We(a,o++,r),++c[256];for(var u=yt(c,15),m=u.t,h=u.l,f=yt(d,15),p=f.t,g=f.l,y=Bn(m),k=y.c,T=y.n,D=Bn(p),R=D.c,_=D.n,w=new ke(19),v=0;v<k.length;++v)++w[k[v]&31];for(var v=0;v<R.length;++v)++w[R[v]&31];for(var b=yt(w,7),I=b.t,E=b.l,S=19;S>4&&!I[_n[S-1]];--S);var F=s+5<<3,C=Qr(c,Pr)+Qr(d,Ha)+t,U=Qr(c,m)+Qr(d,p)+t+14+3*S+Qr(w,I)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&F<=C&&F<=U)return Hn(a,o,e.subarray(l,l+s));var H,O,ae,X;if(We(a,o,1+(U<C)),o+=2,U<C){H=ea(m,h,0),O=m,ae=ea(p,g,0),X=p;var ve=ea(I,E,0);We(a,o,T-257),We(a,o+5,_-1),We(a,o+10,S-4),o+=14;for(var v=0;v<S;++v)We(a,o+3*v,I[_n[v]]);o+=3*S;for(var ue=[k,R],Se=0;Se<2;++Se)for(var Ze=ue[Se],v=0;v<Ze.length;++v){var Ee=Ze[v]&31;We(a,o,ve[Ee]),o+=I[Ee],Ee>15&&(We(a,o,Ze[v]>>5&127),o+=Ze[v]>>12)}}else H=Pl,O=Pr,ae=Dl,X=Ha;for(var v=0;v<i;++v){var oe=n[v];if(oe>255){var Ee=oe>>18&31;Xr(a,o,H[Ee+257]),o+=O[Ee+257],Ee>7&&(We(a,o,oe>>23&31),o+=Et[Ee]);var He=oe&31;Xr(a,o,ae[He]),o+=X[He],He>3&&(Xr(a,o,oe>>5&8191),o+=Tt[He])}else Xr(a,o,H[oe]),o+=O[oe]}return Xr(a,o,H[256]),o+O[256]},Rl=new St([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Un=new Le(0),Cl=function(e,a,r,n,c,d){var t=d.z||e.length,i=new Le(n+t+5*(1+Math.ceil(t/7e3))+c),l=i.subarray(n,i.length-c),s=d.l,o=(d.r||0)&7;if(a){o&&(l[0]=d.r>>3);for(var u=Rl[a-1],m=u>>13,h=u&8191,f=(1<<r)-1,p=d.p||new ke(32768),g=d.h||new ke(f+1),y=Math.ceil(r/3),k=2*y,T=function(st){return(e[st]^e[st+1]<<y^e[st+2]<<k)&f},D=new St(25e3),R=new ke(288),_=new ke(32),w=0,v=0,b=d.i||0,I=0,E=d.w||0,S=0;b+2<t;++b){var F=T(b),C=b&32767,U=g[F];if(p[C]=U,g[F]=C,E<=b){var H=t-b;if((w>7e3||I>24576)&&(H>423||!s)){o=zn(e,l,0,D,R,_,v,I,S,b-S,o),I=w=v=0,S=b;for(var O=0;O<286;++O)R[O]=0;for(var O=0;O<30;++O)_[O]=0}var ae=2,X=0,ve=h,ue=C-U&32767;if(H>2&&F==T(b-ue))for(var Se=Math.min(m,H)-1,Ze=Math.min(32767,b),Ee=Math.min(258,H);ue<=Ze&&--ve&&C!=U;){if(e[b+ae]==e[b+ae-ue]){for(var oe=0;oe<Ee&&e[b+oe]==e[b+oe-ue];++oe);if(oe>ae){if(ae=oe,X=ue,oe>Se)break;for(var He=Math.min(ue,oe-2),ua=0,O=0;O<He;++O){var gr=b-ue+O&32767,Sl=p[gr],ii=gr-Sl&32767;ii>ua&&(ua=ii,U=gr)}}}C=U,U=p[C],ue+=C-U&32767}if(X){D[I++]=268435456|xt[ae]<<18|Ln[X];var ni=xt[ae]&31,oi=Ln[X]&31;v+=Et[ni]+Tt[oi],++R[257+ni],++_[oi],E=b+ae,++w}else D[I++]=e[b],++R[e[b]]}}for(b=Math.max(b,E);b<t;++b)D[I++]=e[b],++R[e[b]];o=zn(e,l,s,D,R,_,v,I,S,b-S,o),s||(d.r=o&7|l[o/8|0]<<3,o-=7,d.h=g,d.p=p,d.i=b,d.w=E)}else{for(var b=d.w||0;b<t+s;b+=65535){var lt=b+65535;lt>=t&&(l[o/8|0]=s,lt=t),o=Hn(l,o+1,e.subarray(b,lt))}d.i=t}return Fl(i,0,n+On(o)+c)},Vn=function(){var e=1,a=0;return{p:function(r){for(var n=e,c=a,d=r.length|0,t=0;t!=d;){for(var i=Math.min(t+2655,d);t<i;++t)c+=n+=r[t];n=(n&65535)+15*(n>>16),c=(c&65535)+15*(c>>16)}e=n,a=c},d:function(){return e%=65521,a%=65521,(e&255)<<24|(e&65280)<<8|(a&255)<<8|a>>8}}},Ml=function(e,a,r,n,c){if(!c&&(c={l:1},a.dictionary)){var d=a.dictionary.subarray(-32768),t=new Le(d.length+e.length);t.set(d),t.set(e,d.length),e=t,c.w=d.length}return Cl(e,a.level==null?6:a.level,a.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+a.mem,r,n,c)},Kn=function(e,a,r){for(;r;++a)e[a]=r,r>>>=8},_l=function(e,a){var r=a.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(a.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,a.dictionary){var c=Vn();c.p(a.dictionary),Kn(e,2,c.d())}};function $n(e,a){a||(a={});var r=Vn();r.p(e);var n=Ml(e,a,a.dictionary?6:2,4);return _l(n,a),Kn(n,n.length-4,r.d()),n}var Ll=typeof TextDecoder<"u"&&new TextDecoder,Bl=0;try{Ll.decode(Un,{stream:!0}),Bl=1}catch{}x();var tr=P(j(),1),zl={root:"alinea-Statusbar",status:"alinea-Statusbar-status"},Wn=V(zl),ne;(e=>{({Provider:e.Provider,Portal:e.Portal,Slot:e.Slot}=Ca());function a({children:n}){return(0,tr.jsxs)("footer",{className:Wn.root(),children:[(0,tr.jsx)(e.Portal,{}),n]})}e.Root=a;function r({children:n,icon:c}){return(0,tr.jsx)("div",{className:Wn.status(),children:(0,tr.jsxs)($,{center:!0,gap:5,children:[(0,tr.jsx)(q,{icon:c}),(0,tr.jsx)("span",{children:n})]})})}e.Status=r})(ne||(ne={}));x();x();var qn=P(G(),1);function Nr(e){if(e)return(0,qn.useMemo)(()=>Ma(e),[e])}var Gn=P(j(),1);function Pt({color:e}){let a=Nr(e),r=ci(`
    <svg
      width="36"
      height="36"
      view-box="0 0 36 36"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <linearGradient
          id="grad1"
          x1="0%"
          y1="0%"
          x2="100%"
          y2="0%"
          gradient-transform="rotate(65)"
        >
          <stop offset="0%" style="stop-color: ${e}; stop-opacity: 1" />
          <stop
            offset="100%"
            style="stop-color: ${e}; stop-opacity: 1"
          />
        </linearGradient>
      </defs>
      <path
        d="M18 36C25.884 36 29.9427 36 32.8047 33.138C35.6667 30.276 36 25.884 36 18C36 10.116 35.6667 6.05733 32.8047 3.19533C29.9427 0.333333 25.884 0 18 0C10.116 0 6.05733 0.333333 3.19533 3.19533C0.333333 6.05733 0 10.116 0 18C0 25.884 0.333333 29.9427 3.19533 32.8047C6.05733 35.6667 10.116 36 18 36Z"
        fill="url(#grad1)"
      />
      <path 
        fill="${a}" 
        d="M20.8178 10.3977V11.733C19.8978 10.6534 18.5316 10 16.6636 10C13.0112 10 10 13.267 10 17.5C10 21.733 13.0112 25 16.6636 25C18.5316 25 19.8978 24.3466 20.8178 23.267V24.6023H25V10.3977H20.8178ZM17.5 20.9659C15.5762 20.9659 14.1822 19.6307 14.1822 17.5C14.1822 15.3693 15.5762 14.0341 17.5 14.0341C19.4238 14.0341 20.8178 15.3693 20.8178 17.5C20.8178 19.6307 19.4238 20.9659 17.5 20.9659Z"
      />
      </svg>
  `);return(0,Gn.jsx)("link",{rel:"icon",type:"image/svg",href:`data:image/svg+xml;base64,${r}`})}x();var Dt=P(j(),1);function Ua(e){return(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Dt.jsx)("path",{fill:"currentColor",d:"M14.59 2.59c-.38-.38-.89-.59-1.42-.59H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8.83c0-.53-.21-1.04-.59-1.41l-4.82-4.83zM15 18H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1zm0-4H9c-.55 0-1-.45-1-1s.45-1 1-1h6c.55 0 1 .45 1 1s-.45 1-1 1zm-2-6V3.5L18.5 9H14c-.55 0-1-.45-1-1z"})})}x();var Ft=P(j(),1);function Jn(e){return(0,Ft.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Ft.jsx)("path",{fill:"currentColor",d:"M12 11q3.75 0 6.375-1.175T21 7q0-1.65-2.625-2.825T12 3Q8.25 3 5.625 4.175T3 7q0 1.65 2.625 2.825T12 11Zm0 2.5q1.025 0 2.563-.213t2.962-.687q1.425-.475 2.45-1.237T21 9.5V12q0 1.1-1.025 1.863t-2.45 1.237q-1.425.475-2.962.688T12 16q-1.025 0-2.563-.213T6.476 15.1q-1.425-.475-2.45-1.237T3 12V9.5q0 1.1 1.025 1.863t2.45 1.237q1.425.475 2.963.688T12 13.5Zm0 5q1.025 0 2.563-.213t2.962-.687q1.425-.475 2.45-1.238T21 14.5V17q0 1.1-1.025 1.863t-2.45 1.237q-1.425.475-2.962.688T12 21q-1.025 0-2.563-.213T6.476 20.1q-1.425-.475-2.45-1.238T3 17v-2.5q0 1.1 1.025 1.863t2.45 1.237q1.425.475 2.963.688T12 18.5Z"})})}var vl=P(G(),1);x();var Va=P(j(),1);function Zn(e){let a=e.fullPage!==!1;pi({fullPage:a,...e});let r=N(gi);return(0,Va.jsxs)(hi,{client:r,children:[e.children,(0,Va.jsx)(yn,{})]})}x();var Wo=P(G(),1);x();var ir=P(G(),1);var jr=P(j(),1),Ka=class{constructor(e){this.data=e}get component(){return this.data.component}},Yn=class{constructor(e){this.data=e,this.matchers=this.data.routes.map(a=>({route:a,matcher:Ta({route:a.data.path})}))}matchers;matchingRoute=te(e=>{for(let{route:a,matcher:r}of this.matchers){let n=e(r);if(n)return{route:a,params:n}}});matchingRouteWithData=te(async e=>{let a=e(this.matchingRoute);if(!a)return;let{loader:r}=a.route.data,n=r?await e(r(a.params)):{};return{route:a.route,data:n,params:a.params}});currentRoute=te(void 0);prevLocation=te(void 0);blockers=te(new Set);expected;cancelled=te(!1);match=te((e,{setSelf:a})=>{let r=e(this.currentRoute),n=e(this.matchingRouteWithData);return this.expected=n.then(c=>(a(this.expected,c),c)),r??this.expected},(e,a,r,n)=>{if(e(this.cancelled)){a(this.cancelled,!1);return}let d=e(this.blockers);if(r!==this.expected)return;let t=e(Sr),i=e(this.prevLocation),l=()=>{for(let o of d)a(o,void 0);a(this.currentRoute,n),a(this.prevLocation,t)},s=()=>{a(this.cancelled,!0);for(let o of d)a(o,void 0);if(i){let o=i.pathname+i.search;a(Sr,o)}};if(d.size)for(let o of d)a(o,{nextRoute:n,confirm:l,cancel:s});else l()})},Xn=(0,ir.createContext)(void 0);function Qn({children:e,router:a}){return(0,jr.jsx)(Xn.Provider,{value:a,children:e})}function eo(){let e=(0,ir.useContext)(Xn);if(!e)throw new Error("No router context found");return e}function ro(e,a){let r=eo(),[n]=(0,ir.useState)(()=>te(void 0)),c=ie(r.blockers);(0,ir.useEffect)(()=>{if(a)return c(t=>new Set(t).add(n)),window.onbeforeunload=()=>!0,()=>{window.onbeforeunload=null,c(t=>{let i=new Set(t);return i.delete(n),i})}},[e,a]);let d=N(n);return{isBlocking:!!d,...d}}function Al(){let e=eo();return N(e.match)}function Nl(){let e=Al();return e?(0,jr.jsx)(e.route.component,{...e.data}):null}function ao({fallback:e}){let a=Nl();return(0,jr.jsx)(jr.Fragment,{children:a??e??null})}x();x();var $a=P(G(),1),Rt=P(j(),1);function jl({name:e,children:a}){return(0,$a.useEffect)(()=>{console.log(`SuspenseBoundary ${e} fallback triggered`)},[]),a}function nr(e){return(0,Rt.jsx)($a.Suspense,{...e,fallback:(0,Rt.jsx)(jl,{name:e.name,children:e.fallback??null})})}x();x();var Ct=P(j(),1);function to(e){return(0,Ct.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Ct.jsx)("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 2v3H5V5h14zm0 5v4H5v-4h14zM5 19v-3h14v3H5z"})})}var mr=P(G(),1);x();var Mt=P(j(),1),Ol={root:"alinea-Preview"},Hl=V(Ol);function io({children:e}){return(0,Mt.jsx)(Pe.Preview,{children:(0,Mt.jsx)("div",{className:Hl.root(),children:e})})}x();x();function _t(e,a){if(e===a)return!0;if(!e||!a)return!1;if(Array.isArray(e)&&Array.isArray(a)){if(e.length!==a.length)return!1;for(let r=0;r<e.length;r++)if(!_t(e[r],a[r]))return!1;return!0}if(typeof e=="object"&&typeof a=="object"){let r=Object.keys(e);if(r.length!==Object.keys(a).length)return!1;for(let n of r)if(!_t(e[n],a[n]))return!1;return!0}return!1}function Ul(e,a,r){let n=e.length,c=a.length,d=Array.from(Array(n+1),()=>Array(c+1));for(let t=0;t<=n;t++)for(let i=0;i<=c;i++)t==0||i==0?d[t][i]=0:r(e[t-1],a[i-1])?d[t][i]=1+d[t-1][i-1]:d[t][i]=Math.max(d[t-1][i],d[t][i-1]);return d}function Wa(e,a,r){let n=Ul(e,a,r),c=[],d=e.length,t=a.length;for(;d!==0||t!==0;)d===0?(c.push({type:"addition",value:a[t-1]}),t-=1):t===0?(c.push({type:"removal",value:e[d-1]}),d-=1):r(e[d-1],a[t-1])?(c.push({type:"keep",old:e[d-1],value:a[t-1]}),d-=1,t-=1):n[d-1][t]<=n[d][t-1]?(c.push({type:"addition",value:a[t-1]}),t-=1):(c.push({type:"removal",value:e[d-1]}),d-=1);return c.reverse()}function or(e,a,r){return Object.entries(e.properties).filter(([c,d])=>d instanceof Na?a?.[c]!==r?.[c]:!_t(a?.[c],r?.[c]))}x();x();x();x();x();var Lt=P(j(),1);function no(e){return(0,Lt.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Lt.jsx)("path",{fill:"currentColor",d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2s2-.9 2-2s-.9-2-2-2z"})})}var ra=P(j(),1),Vl={root:"alinea-ChangeBox","root-content":"alinea-ChangeBox-content",rootContent:"alinea-ChangeBox-content","is-equal":"alinea-ChangeBox-is-equal",isEqual:"alinea-ChangeBox-is-equal","is-addition":"alinea-ChangeBox-is-addition",isAddition:"alinea-ChangeBox-is-addition","is-removal":"alinea-ChangeBox-is-removal",isRemoval:"alinea-ChangeBox-is-removal","root-header":"alinea-ChangeBox-header",rootHeader:"alinea-ChangeBox-header"},oo=V(Vl);function lr({change:e,children:a}){return(0,ra.jsx)($,{gap:8,className:oo.root(e),children:e!=="equal"?(0,ra.jsx)("div",{className:oo.root.content(),children:a}):(0,ra.jsx)($,{center:!0,justify:"center",full:!0,children:(0,ra.jsx)(q,{icon:no})})})}var aa=P(j(),1);function lo({FieldsDiff:e,shape:a,valueA:r,valueB:n}){let d=Wa(r||[],n||[],(t,i)=>t.id===i.id);return(0,aa.jsx)(ja.Root,{children:d.map((t,i)=>{let l=t.value,s=a.values[l.type],o=t.type==="keep"?[t.old,t.value]:t.type==="removal"?[t.value,{}]:[{},t.value],u=or(s,o[0],o[1]);return u.length===0?(0,aa.jsx)(lr,{change:"equal"},i):(0,aa.jsx)(lr,{change:t.type,children:(0,aa.jsx)(e,{changes:u,targetA:o[0],targetB:o[1]})},i)})})}x();var fo=P(G(),1);x();si();var mo=P(G(),1),ta=P(j(),1),Kl=li({"node_modules/diff-match-patch/index.js"(e,a){var r=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1,c=1,d=0;r.Diff=function(t,i){return[t,i]},r.prototype.diff_main=function(t,i,l,s){typeof s>"u"&&(this.Diff_Timeout<=0?s=Number.MAX_VALUE:s=new Date().getTime()+this.Diff_Timeout*1e3);var o=s;if(t==null||i==null)throw new Error("Null input. (diff_main)");if(t==i)return t?[new r.Diff(d,t)]:[];typeof l>"u"&&(l=!0);var u=l,m=this.diff_commonPrefix(t,i),h=t.substring(0,m);t=t.substring(m),i=i.substring(m),m=this.diff_commonSuffix(t,i);var f=t.substring(t.length-m);t=t.substring(0,t.length-m),i=i.substring(0,i.length-m);var p=this.diff_compute_(t,i,u,o);return h&&p.unshift(new r.Diff(d,h)),f&&p.push(new r.Diff(d,f)),this.diff_cleanupMerge(p),p},r.prototype.diff_compute_=function(t,i,l,s){var o;if(!t)return[new r.Diff(c,i)];if(!i)return[new r.Diff(n,t)];var u=t.length>i.length?t:i,m=t.length>i.length?i:t,h=u.indexOf(m);if(h!=-1)return o=[new r.Diff(c,u.substring(0,h)),new r.Diff(d,m),new r.Diff(c,u.substring(h+m.length))],t.length>i.length&&(o[0][0]=o[2][0]=n),o;if(m.length==1)return[new r.Diff(n,t),new r.Diff(c,i)];var f=this.diff_halfMatch_(t,i);if(f){var p=f[0],g=f[1],y=f[2],k=f[3],T=f[4],D=this.diff_main(p,y,l,s),R=this.diff_main(g,k,l,s);return D.concat([new r.Diff(d,T)],R)}return l&&t.length>100&&i.length>100?this.diff_lineMode_(t,i,s):this.diff_bisect_(t,i,s)},r.prototype.diff_lineMode_=function(t,i,l){var s=this.diff_linesToChars_(t,i);t=s.chars1,i=s.chars2;var o=s.lineArray,u=this.diff_main(t,i,!1,l);this.diff_charsToLines_(u,o),this.diff_cleanupSemantic(u),u.push(new r.Diff(d,""));for(var m=0,h=0,f=0,p="",g="";m<u.length;){switch(u[m][0]){case c:f++,g+=u[m][1];break;case n:h++,p+=u[m][1];break;case d:if(h>=1&&f>=1){u.splice(m-h-f,h+f),m=m-h-f;for(var y=this.diff_main(p,g,!1,l),k=y.length-1;k>=0;k--)u.splice(m,0,y[k]);m=m+y.length}f=0,h=0,p="",g="";break}m++}return u.pop(),u},r.prototype.diff_bisect_=function(t,i,l){for(var s=t.length,o=i.length,u=Math.ceil((s+o)/2),m=u,h=2*u,f=new Array(h),p=new Array(h),g=0;g<h;g++)f[g]=-1,p[g]=-1;f[m+1]=0,p[m+1]=0;for(var y=s-o,k=y%2!=0,T=0,D=0,R=0,_=0,w=0;w<u&&!(new Date().getTime()>l);w++){for(var v=-w+T;v<=w-D;v+=2){var b=m+v,I;v==-w||v!=w&&f[b-1]<f[b+1]?I=f[b+1]:I=f[b-1]+1;for(var E=I-v;I<s&&E<o&&t.charAt(I)==i.charAt(E);)I++,E++;if(f[b]=I,I>s)D+=2;else if(E>o)T+=2;else if(k){var S=m+y-v;if(S>=0&&S<h&&p[S]!=-1){var F=s-p[S];if(I>=F)return this.diff_bisectSplit_(t,i,I,E,l)}}}for(var C=-w+R;C<=w-_;C+=2){var S=m+C,F;C==-w||C!=w&&p[S-1]<p[S+1]?F=p[S+1]:F=p[S-1]+1;for(var U=F-C;F<s&&U<o&&t.charAt(s-F-1)==i.charAt(o-U-1);)F++,U++;if(p[S]=F,F>s)_+=2;else if(U>o)R+=2;else if(!k){var b=m+y-C;if(b>=0&&b<h&&f[b]!=-1){var I=f[b],E=m+I-b;if(F=s-F,I>=F)return this.diff_bisectSplit_(t,i,I,E,l)}}}}return[new r.Diff(n,t),new r.Diff(c,i)]},r.prototype.diff_bisectSplit_=function(t,i,l,s,o){var u=t.substring(0,l),m=i.substring(0,s),h=t.substring(l),f=i.substring(s),p=this.diff_main(u,m,!1,o),g=this.diff_main(h,f,!1,o);return p.concat(g)},r.prototype.diff_linesToChars_=function(t,i){var l=[],s={};l[0]="";function o(f){for(var p="",g=0,y=-1,k=l.length;y<f.length-1;){y=f.indexOf(`
`,g),y==-1&&(y=f.length-1);var T=f.substring(g,y+1);(s.hasOwnProperty?s.hasOwnProperty(T):s[T]!==void 0)?p+=String.fromCharCode(s[T]):(k==u&&(T=f.substring(g),y=f.length),p+=String.fromCharCode(k),s[T]=k,l[k++]=T),g=y+1}return p}var u=4e4,m=o(t);u=65535;var h=o(i);return{chars1:m,chars2:h,lineArray:l}},r.prototype.diff_charsToLines_=function(t,i){for(var l=0;l<t.length;l++){for(var s=t[l][1],o=[],u=0;u<s.length;u++)o[u]=i[s.charCodeAt(u)];t[l][1]=o.join("")}},r.prototype.diff_commonPrefix=function(t,i){if(!t||!i||t.charAt(0)!=i.charAt(0))return 0;for(var l=0,s=Math.min(t.length,i.length),o=s,u=0;l<o;)t.substring(u,o)==i.substring(u,o)?(l=o,u=l):s=o,o=Math.floor((s-l)/2+l);return o},r.prototype.diff_commonSuffix=function(t,i){if(!t||!i||t.charAt(t.length-1)!=i.charAt(i.length-1))return 0;for(var l=0,s=Math.min(t.length,i.length),o=s,u=0;l<o;)t.substring(t.length-o,t.length-u)==i.substring(i.length-o,i.length-u)?(l=o,u=l):s=o,o=Math.floor((s-l)/2+l);return o},r.prototype.diff_commonOverlap_=function(t,i){var l=t.length,s=i.length;if(l==0||s==0)return 0;l>s?t=t.substring(l-s):l<s&&(i=i.substring(0,l));var o=Math.min(l,s);if(t==i)return o;for(var u=0,m=1;;){var h=t.substring(o-m),f=i.indexOf(h);if(f==-1)return u;m+=f,(f==0||t.substring(o-m)==i.substring(0,m))&&(u=m,m++)}},r.prototype.diff_halfMatch_=function(t,i){if(this.Diff_Timeout<=0)return null;var l=t.length>i.length?t:i,s=t.length>i.length?i:t;if(l.length<4||s.length*2<l.length)return null;var o=this;function u(D,R,_){for(var w=D.substring(_,_+Math.floor(D.length/4)),v=-1,b="",I,E,S,F;(v=R.indexOf(w,v+1))!=-1;){var C=o.diff_commonPrefix(D.substring(_),R.substring(v)),U=o.diff_commonSuffix(D.substring(0,_),R.substring(0,v));b.length<U+C&&(b=R.substring(v-U,v)+R.substring(v,v+C),I=D.substring(0,_-U),E=D.substring(_+C),S=R.substring(0,v-U),F=R.substring(v+C))}return b.length*2>=D.length?[I,E,S,F,b]:null}var m=u(l,s,Math.ceil(l.length/4)),h=u(l,s,Math.ceil(l.length/2)),f;if(!m&&!h)return null;h?m?f=m[4].length>h[4].length?m:h:f=h:f=m;var p,g,y,k;t.length>i.length?(p=f[0],g=f[1],y=f[2],k=f[3]):(y=f[0],k=f[1],p=f[2],g=f[3]);var T=f[4];return[p,g,y,k,T]},r.prototype.diff_cleanupSemantic=function(t){for(var i=!1,l=[],s=0,o=null,u=0,m=0,h=0,f=0,p=0;u<t.length;)t[u][0]==d?(l[s++]=u,m=f,h=p,f=0,p=0,o=t[u][1]):(t[u][0]==c?f+=t[u][1].length:p+=t[u][1].length,o&&o.length<=Math.max(m,h)&&o.length<=Math.max(f,p)&&(t.splice(l[s-1],0,new r.Diff(n,o)),t[l[s-1]+1][0]=c,s--,s--,u=s>0?l[s-1]:-1,m=0,h=0,f=0,p=0,o=null,i=!0)),u++;for(i&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),u=1;u<t.length;){if(t[u-1][0]==n&&t[u][0]==c){var g=t[u-1][1],y=t[u][1],k=this.diff_commonOverlap_(g,y),T=this.diff_commonOverlap_(y,g);k>=T?(k>=g.length/2||k>=y.length/2)&&(t.splice(u,0,new r.Diff(d,y.substring(0,k))),t[u-1][1]=g.substring(0,g.length-k),t[u+1][1]=y.substring(k),u++):(T>=g.length/2||T>=y.length/2)&&(t.splice(u,0,new r.Diff(d,g.substring(0,T))),t[u-1][0]=c,t[u-1][1]=y.substring(0,y.length-T),t[u+1][0]=n,t[u+1][1]=g.substring(T),u++),u++}u++}},r.prototype.diff_cleanupSemanticLossless=function(t){function i(T,D){if(!T||!D)return 6;var R=T.charAt(T.length-1),_=D.charAt(0),w=R.match(r.nonAlphaNumericRegex_),v=_.match(r.nonAlphaNumericRegex_),b=w&&R.match(r.whitespaceRegex_),I=v&&_.match(r.whitespaceRegex_),E=b&&R.match(r.linebreakRegex_),S=I&&_.match(r.linebreakRegex_),F=E&&T.match(r.blanklineEndRegex_),C=S&&D.match(r.blanklineStartRegex_);return F||C?5:E||S?4:w&&!b&&I?3:b||I?2:w||v?1:0}for(var l=1;l<t.length-1;){if(t[l-1][0]==d&&t[l+1][0]==d){var s=t[l-1][1],o=t[l][1],u=t[l+1][1],m=this.diff_commonSuffix(s,o);if(m){var h=o.substring(o.length-m);s=s.substring(0,s.length-m),o=h+o.substring(0,o.length-m),u=h+u}for(var f=s,p=o,g=u,y=i(s,o)+i(o,u);o.charAt(0)===u.charAt(0);){s+=o.charAt(0),o=o.substring(1)+u.charAt(0),u=u.substring(1);var k=i(s,o)+i(o,u);k>=y&&(y=k,f=s,p=o,g=u)}t[l-1][1]!=f&&(f?t[l-1][1]=f:(t.splice(l-1,1),l--),t[l][1]=p,g?t[l+1][1]=g:(t.splice(l+1,1),l--))}l++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(t){for(var i=!1,l=[],s=0,o=null,u=0,m=!1,h=!1,f=!1,p=!1;u<t.length;)t[u][0]==d?(t[u][1].length<this.Diff_EditCost&&(f||p)?(l[s++]=u,m=f,h=p,o=t[u][1]):(s=0,o=null),f=p=!1):(t[u][0]==n?p=!0:f=!0,o&&(m&&h&&f&&p||o.length<this.Diff_EditCost/2&&m+h+f+p==3)&&(t.splice(l[s-1],0,new r.Diff(n,o)),t[l[s-1]+1][0]=c,s--,o=null,m&&h?(f=p=!0,s=0):(s--,u=s>0?l[s-1]:-1,f=p=!1),i=!0)),u++;i&&this.diff_cleanupMerge(t)},r.prototype.diff_cleanupMerge=function(t){t.push(new r.Diff(d,""));for(var i=0,l=0,s=0,o="",u="",m;i<t.length;)switch(t[i][0]){case c:s++,u+=t[i][1],i++;break;case n:l++,o+=t[i][1],i++;break;case d:l+s>1?(l!==0&&s!==0&&(m=this.diff_commonPrefix(u,o),m!==0&&(i-l-s>0&&t[i-l-s-1][0]==d?t[i-l-s-1][1]+=u.substring(0,m):(t.splice(0,0,new r.Diff(d,u.substring(0,m))),i++),u=u.substring(m),o=o.substring(m)),m=this.diff_commonSuffix(u,o),m!==0&&(t[i][1]=u.substring(u.length-m)+t[i][1],u=u.substring(0,u.length-m),o=o.substring(0,o.length-m))),i-=l+s,t.splice(i,l+s),o.length&&(t.splice(i,0,new r.Diff(n,o)),i++),u.length&&(t.splice(i,0,new r.Diff(c,u)),i++),i++):i!==0&&t[i-1][0]==d?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,s=0,l=0,o="",u="";break}t[t.length-1][1]===""&&t.pop();var h=!1;for(i=1;i<t.length-1;)t[i-1][0]==d&&t[i+1][0]==d&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),h=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),h=!0)),i++;h&&this.diff_cleanupMerge(t)},r.prototype.diff_xIndex=function(t,i){var l=0,s=0,o=0,u=0,m;for(m=0;m<t.length&&(t[m][0]!==c&&(l+=t[m][1].length),t[m][0]!==n&&(s+=t[m][1].length),!(l>i));m++)o=l,u=s;return t.length!=m&&t[m][0]===n?u:u+(i-o)},r.prototype.diff_prettyHtml=function(t){for(var i=[],l=/&/g,s=/</g,o=/>/g,u=/\n/g,m=0;m<t.length;m++){var h=t[m][0],f=t[m][1],p=f.replace(l,"&amp;").replace(s,"&lt;").replace(o,"&gt;").replace(u,"&para;<br>");switch(h){case c:i[m]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case n:i[m]='<del style="background:#ffe6e6;">'+p+"</del>";break;case d:i[m]="<span>"+p+"</span>";break}}return i.join("")},r.prototype.diff_text1=function(t){for(var i=[],l=0;l<t.length;l++)t[l][0]!==c&&(i[l]=t[l][1]);return i.join("")},r.prototype.diff_text2=function(t){for(var i=[],l=0;l<t.length;l++)t[l][0]!==n&&(i[l]=t[l][1]);return i.join("")},r.prototype.diff_levenshtein=function(t){for(var i=0,l=0,s=0,o=0;o<t.length;o++){var u=t[o][0],m=t[o][1];switch(u){case c:l+=m.length;break;case n:s+=m.length;break;case d:i+=Math.max(l,s),l=0,s=0;break}}return i+=Math.max(l,s),i},r.prototype.diff_toDelta=function(t){for(var i=[],l=0;l<t.length;l++)switch(t[l][0]){case c:i[l]="+"+encodeURI(t[l][1]);break;case n:i[l]="-"+t[l][1].length;break;case d:i[l]="="+t[l][1].length;break}return i.join("	").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(t,i){for(var l=[],s=0,o=0,u=i.split(/\t/g),m=0;m<u.length;m++){var h=u[m].substring(1);switch(u[m].charAt(0)){case"+":try{l[s++]=new r.Diff(c,decodeURI(h))}catch{throw new Error("Illegal escape in diff_fromDelta: "+h)}break;case"-":case"=":var f=parseInt(h,10);if(isNaN(f)||f<0)throw new Error("Invalid number in diff_fromDelta: "+h);var p=t.substring(o,o+=f);u[m].charAt(0)=="="?l[s++]=new r.Diff(d,p):l[s++]=new r.Diff(n,p);break;default:if(u[m])throw new Error("Invalid diff operation in diff_fromDelta: "+u[m])}}if(o!=t.length)throw new Error("Delta length ("+o+") does not equal source text length ("+t.length+").");return l},r.prototype.match_main=function(t,i,l){if(t==null||i==null||l==null)throw new Error("Null input. (match_main)");return l=Math.max(0,Math.min(l,t.length)),t==i?0:t.length?t.substring(l,l+i.length)==i?l:this.match_bitap_(t,i,l):-1},r.prototype.match_bitap_=function(t,i,l){if(i.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var s=this.match_alphabet_(i),o=this;function u(I,E){var S=I/i.length,F=Math.abs(l-E);return o.Match_Distance?S+F/o.Match_Distance:F?1:S}var m=this.Match_Threshold,h=t.indexOf(i,l);h!=-1&&(m=Math.min(u(0,h),m),h=t.lastIndexOf(i,l+i.length),h!=-1&&(m=Math.min(u(0,h),m)));var f=1<<i.length-1;h=-1;for(var p,g,y=i.length+t.length,k,T=0;T<i.length;T++){for(p=0,g=y;p<g;)u(T,l+g)<=m?p=g:y=g,g=Math.floor((y-p)/2+p);y=g;var D=Math.max(1,l-g+1),R=Math.min(l+g,t.length)+i.length,_=Array(R+2);_[R+1]=(1<<T)-1;for(var w=R;w>=D;w--){var v=s[t.charAt(w-1)];if(T===0?_[w]=(_[w+1]<<1|1)&v:_[w]=(_[w+1]<<1|1)&v|((k[w+1]|k[w])<<1|1)|k[w+1],_[w]&f){var b=u(T,w-1);if(b<=m)if(m=b,h=w-1,h>l)D=Math.max(1,2*l-h);else break}}if(u(T+1,l)>m)break;k=_}return h},r.prototype.match_alphabet_=function(t){for(var i={},l=0;l<t.length;l++)i[t.charAt(l)]=0;for(var l=0;l<t.length;l++)i[t.charAt(l)]|=1<<t.length-l-1;return i},r.prototype.patch_addContext_=function(t,i){if(i.length!=0){if(t.start2===null)throw Error("patch not initialized");for(var l=i.substring(t.start2,t.start2+t.length1),s=0;i.indexOf(l)!=i.lastIndexOf(l)&&l.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)s+=this.Patch_Margin,l=i.substring(t.start2-s,t.start2+t.length1+s);s+=this.Patch_Margin;var o=i.substring(t.start2-s,t.start2);o&&t.diffs.unshift(new r.Diff(d,o));var u=i.substring(t.start2+t.length1,t.start2+t.length1+s);u&&t.diffs.push(new r.Diff(d,u)),t.start1-=o.length,t.start2-=o.length,t.length1+=o.length+u.length,t.length2+=o.length+u.length}},r.prototype.patch_make=function(t,i,l){var s,o;if(typeof t=="string"&&typeof i=="string"&&typeof l>"u")s=t,o=this.diff_main(s,i,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(t&&typeof t=="object"&&typeof i>"u"&&typeof l>"u")o=t,s=this.diff_text1(o);else if(typeof t=="string"&&i&&typeof i=="object"&&typeof l>"u")s=t,o=i;else if(typeof t=="string"&&typeof i=="string"&&l&&typeof l=="object")s=t,o=l;else throw new Error("Unknown call format to patch_make.");if(o.length===0)return[];for(var u=[],m=new r.patch_obj,h=0,f=0,p=0,g=s,y=s,k=0;k<o.length;k++){var T=o[k][0],D=o[k][1];switch(!h&&T!==d&&(m.start1=f,m.start2=p),T){case c:m.diffs[h++]=o[k],m.length2+=D.length,y=y.substring(0,p)+D+y.substring(p);break;case n:m.length1+=D.length,m.diffs[h++]=o[k],y=y.substring(0,p)+y.substring(p+D.length);break;case d:D.length<=2*this.Patch_Margin&&h&&o.length!=k+1?(m.diffs[h++]=o[k],m.length1+=D.length,m.length2+=D.length):D.length>=2*this.Patch_Margin&&h&&(this.patch_addContext_(m,g),u.push(m),m=new r.patch_obj,h=0,g=y,f=p);break}T!==c&&(f+=D.length),T!==n&&(p+=D.length)}return h&&(this.patch_addContext_(m,g),u.push(m)),u},r.prototype.patch_deepCopy=function(t){for(var i=[],l=0;l<t.length;l++){var s=t[l],o=new r.patch_obj;o.diffs=[];for(var u=0;u<s.diffs.length;u++)o.diffs[u]=new r.Diff(s.diffs[u][0],s.diffs[u][1]);o.start1=s.start1,o.start2=s.start2,o.length1=s.length1,o.length2=s.length2,i[l]=o}return i},r.prototype.patch_apply=function(t,i){if(t.length==0)return[i,[]];t=this.patch_deepCopy(t);var l=this.patch_addPadding(t);i=l+i+l,this.patch_splitMax(t);for(var s=0,o=[],u=0;u<t.length;u++){var m=t[u].start2+s,h=this.diff_text1(t[u].diffs),f,p=-1;if(h.length>this.Match_MaxBits?(f=this.match_main(i,h.substring(0,this.Match_MaxBits),m),f!=-1&&(p=this.match_main(i,h.substring(h.length-this.Match_MaxBits),m+h.length-this.Match_MaxBits),(p==-1||f>=p)&&(f=-1))):f=this.match_main(i,h,m),f==-1)o[u]=!1,s-=t[u].length2-t[u].length1;else{o[u]=!0,s=f-m;var g;if(p==-1?g=i.substring(f,f+h.length):g=i.substring(f,p+this.Match_MaxBits),h==g)i=i.substring(0,f)+this.diff_text2(t[u].diffs)+i.substring(f+h.length);else{var y=this.diff_main(h,g,!1);if(h.length>this.Match_MaxBits&&this.diff_levenshtein(y)/h.length>this.Patch_DeleteThreshold)o[u]=!1;else{this.diff_cleanupSemanticLossless(y);for(var k=0,T,D=0;D<t[u].diffs.length;D++){var R=t[u].diffs[D];R[0]!==d&&(T=this.diff_xIndex(y,k)),R[0]===c?i=i.substring(0,f+T)+R[1]+i.substring(f+T):R[0]===n&&(i=i.substring(0,f+T)+i.substring(f+this.diff_xIndex(y,k+R[1].length))),R[0]!==n&&(k+=R[1].length)}}}}}return i=i.substring(l.length,i.length-l.length),[i,o]},r.prototype.patch_addPadding=function(t){for(var i=this.Patch_Margin,l="",s=1;s<=i;s++)l+=String.fromCharCode(s);for(var s=0;s<t.length;s++)t[s].start1+=i,t[s].start2+=i;var o=t[0],u=o.diffs;if(u.length==0||u[0][0]!=d)u.unshift(new r.Diff(d,l)),o.start1-=i,o.start2-=i,o.length1+=i,o.length2+=i;else if(i>u[0][1].length){var m=i-u[0][1].length;u[0][1]=l.substring(u[0][1].length)+u[0][1],o.start1-=m,o.start2-=m,o.length1+=m,o.length2+=m}if(o=t[t.length-1],u=o.diffs,u.length==0||u[u.length-1][0]!=d)u.push(new r.Diff(d,l)),o.length1+=i,o.length2+=i;else if(i>u[u.length-1][1].length){var m=i-u[u.length-1][1].length;u[u.length-1][1]+=l.substring(0,m),o.length1+=m,o.length2+=m}return l},r.prototype.patch_splitMax=function(t){for(var i=this.Match_MaxBits,l=0;l<t.length;l++)if(!(t[l].length1<=i)){var s=t[l];t.splice(l--,1);for(var o=s.start1,u=s.start2,m="";s.diffs.length!==0;){var h=new r.patch_obj,f=!0;for(h.start1=o-m.length,h.start2=u-m.length,m!==""&&(h.length1=h.length2=m.length,h.diffs.push(new r.Diff(d,m)));s.diffs.length!==0&&h.length1<i-this.Patch_Margin;){var p=s.diffs[0][0],g=s.diffs[0][1];p===c?(h.length2+=g.length,u+=g.length,h.diffs.push(s.diffs.shift()),f=!1):p===n&&h.diffs.length==1&&h.diffs[0][0]==d&&g.length>2*i?(h.length1+=g.length,o+=g.length,f=!1,h.diffs.push(new r.Diff(p,g)),s.diffs.shift()):(g=g.substring(0,i-h.length1-this.Patch_Margin),h.length1+=g.length,o+=g.length,p===d?(h.length2+=g.length,u+=g.length):f=!1,h.diffs.push(new r.Diff(p,g)),g==s.diffs[0][1]?s.diffs.shift():s.diffs[0][1]=s.diffs[0][1].substring(g.length))}m=this.diff_text2(h.diffs),m=m.substring(m.length-this.Patch_Margin);var y=this.diff_text1(s.diffs).substring(0,this.Patch_Margin);y!==""&&(h.length1+=y.length,h.length2+=y.length,h.diffs.length!==0&&h.diffs[h.diffs.length-1][0]===d?h.diffs[h.diffs.length-1][1]+=y:h.diffs.push(new r.Diff(d,y))),f||t.splice(++l,0,h)}}},r.prototype.patch_toText=function(t){for(var i=[],l=0;l<t.length;l++)i[l]=t[l];return i.join("")},r.prototype.patch_fromText=function(t){var i=[];if(!t)return i;for(var l=t.split(`
`),s=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;s<l.length;){var u=l[s].match(o);if(!u)throw new Error("Invalid patch string: "+l[s]);var m=new r.patch_obj;for(i.push(m),m.start1=parseInt(u[1],10),u[2]===""?(m.start1--,m.length1=1):u[2]=="0"?m.length1=0:(m.start1--,m.length1=parseInt(u[2],10)),m.start2=parseInt(u[3],10),u[4]===""?(m.start2--,m.length2=1):u[4]=="0"?m.length2=0:(m.start2--,m.length2=parseInt(u[4],10)),s++;s<l.length;){var h=l[s].charAt(0);try{var f=decodeURI(l[s].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+f)}if(h=="-")m.diffs.push(new r.Diff(n,f));else if(h=="+")m.diffs.push(new r.Diff(c,f));else if(h==" ")m.diffs.push(new r.Diff(d,f));else{if(h=="@")break;if(h!=="")throw new Error('Invalid patch mode "'+h+'" in: '+f)}s++}}return i},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){var t,i;this.length1===0?t=this.start1+",0":this.length1==1?t=this.start1+1:t=this.start1+1+","+this.length1,this.length2===0?i=this.start2+",0":this.length2==1?i=this.start2+1:i=this.start2+1+","+this.length2;for(var l=["@@ -"+t+" +"+i+` @@
`],s,o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case c:s="+";break;case n:s="-";break;case d:s=" ";break}l[o+1]=s+encodeURI(this.diffs[o][1])+`
`}return l.join("").replace(/%20/g," ")},a.exports=r,a.exports.diff_match_patch=r,a.exports.DIFF_DELETE=n,a.exports.DIFF_INSERT=c,a.exports.DIFF_EQUAL=d}}),$l=ma(Kl(),1),Wl={root:"alinea-ScalarDiff","root-segment":"alinea-ScalarDiff-segment",rootSegment:"alinea-ScalarDiff-segment","is-insert":"alinea-ScalarDiff-is-insert",isInsert:"alinea-ScalarDiff-is-insert","is-delete":"alinea-ScalarDiff-is-delete",isDelete:"alinea-ScalarDiff-is-delete"},so=V(Wl),co=new $l.default.diff_match_patch;function uo(e){return typeof e=="number"||e?String(e):""}function qa({valueA:e,valueB:a}){let r=uo(e),n=uo(a),c=(0,mo.useMemo)(()=>{let d=co.diff_main(r,n);return co.diff_cleanupSemantic(d),d},[r,n]);return(0,ta.jsxs)("div",{className:so.root(),children:[c.length===0&&(0,ta.jsx)("br",{}),c.map(([d,t],i)=>(0,ta.jsx)("span",{className:so.root.segment({insert:d===1,delete:d===-1,equal:d===0}),children:t},i))]})}var sr=P(j(),1),ql=new Set(["heading","paragraph","listItem"]);function po({type:e,content:a}){let r=ql.has(e);return!a||!Array.isArray(a)?"":a.map(n=>"text"in n?n.text+" ":po(n)).join("")+(r?`

`:"")}function ho(e){let a=[],r="";if(!Array.isArray(e))return a;for(let n of e)switch(n.type){case"text":r+=n.text+" ";default:let c=n.type[0];if(!c)continue;c===c.toUpperCase()?(r&&(a.push({type:"text",text:r}),r=""),a.push({type:"block",block:n})):r+=po(n)}return r&&a.push({type:"text",text:r}),a}function go({FieldsDiff:e,shape:a,valueA:r,valueB:n}){let c=(0,fo.useMemo)(()=>({a:ho(r),b:ho(n)}),[r,n]),d=Math.max(c.a.length,c.b.length),t=[],i=(s,o)=>s.type!==s.type?!1:s.type==="block"&&o.type==="block"?s.block.id===o.block.id:!0,l=Wa(c.a,c.b,i);return(0,sr.jsx)(ja.Root,{children:l.map((s,o)=>{switch(s.value.type){case"block":{let u=s.value.block.type,m=a.values?.[u],h=s.type==="keep"?["block"in s.old&&s.old.block||{},s.value.block]:s.type==="removal"?[s.value.block,{}]:[{},s.value.block],f=or(m,h[0],h[1]);return f.length===0?(0,sr.jsx)(lr,{change:"equal"},o):(0,sr.jsx)(lr,{change:s.type,children:(0,sr.jsx)(e,{changes:f,targetA:h[0],targetB:h[1]})},o)}case"text":{let u=s.type==="keep"?["text"in s.old&&s.old.text,s.value.text]:s.type==="removal"?[s.value.text,""]:["",s.value.text];return u[0]===u[1]?(0,sr.jsx)(lr,{change:"equal"},o):(0,sr.jsx)(lr,{change:s.type,children:(0,sr.jsx)(qa,{valueA:u[0],valueB:u[1]})},o)}}})})}var ia=P(j(),1);function vo({FieldsDiff:e,shape:a,valueA:r,valueB:n}){if(a instanceof Na)return(0,ia.jsx)(qa,{valueA:r,valueB:n});if(a instanceof Tn)return(0,ia.jsx)(go,{FieldsDiff:e,shape:a,valueA:r,valueB:n});if(a instanceof En)return(0,ia.jsx)(lo,{FieldsDiff:e,shape:a,valueA:r,valueB:n});if(a instanceof yi){let c=or(a,r,n);return(0,ia.jsx)(e,{changes:c,targetA:r,targetB:n})}else a instanceof Pn&&console.warn("UnionShape not supported yet");return null}var Or=P(j(),1);function Bt({changes:e,targetA:a,targetB:r}){return(0,Or.jsx)(za,{children:(0,Or.jsx)(me,{gap:10,children:e.map(([n,c],d)=>(0,Or.jsx)("div",{children:(0,Or.jsx)(fn,{label:c.label,children:(0,Or.jsx)(vo,{FieldsDiff:Bt,shape:c,valueA:a?.[n],valueB:r?.[n]})})},n))})})}var qe=P(j(),1),Gl={root:"alinea-EntryDiff"},Jl=V(Gl);function bo({entryA:e,entryB:a}){let{schema:r}=Ne(),n=r[e.type],c=r[a.type];if(n!==c)return(0,qe.jsxs)("div",{children:[(0,qe.jsx)(ut,{children:(0,qe.jsx)(wr,{label:de.label(n)})})," ","=>",(0,qe.jsx)(ut,{children:(0,qe.jsx)(wr,{label:de.label(c)})})]});let t=or(de.shape(n),e.data,a.data);return(0,qe.jsx)("div",{className:Jl.root(),children:(0,qe.jsx)(Bt,{changes:t,targetA:e.data,targetB:a.data})})}x();var wo=P(G(),1),fe=P(j(),1),Zl={root:"alinea-EntryHistory",list:"alinea-EntryHistory-list","list-revision":"alinea-EntryHistory-list-revision",listRevision:"alinea-EntryHistory-list-revision","is-selected":"alinea-EntryHistory-is-selected",isSelected:"alinea-EntryHistory-is-selected"},zt=V(Zl);function yo({editor:e}){return(0,fe.jsx)("header",{className:zt.root(),children:(0,fe.jsx)(wo.Suspense,{fallback:(0,fe.jsx)(he,{absolute:!0}),children:(0,fe.jsx)(Yl,{editor:e})})})}function Yl({editor:e}){let a=N(e.revisionsAtom);return(0,fe.jsx)("ul",{className:zt.list(),children:a.map((r,n)=>(0,fe.jsx)(Xl,{editor:e,revision:r,isCurrent:n===0},r.ref))})}function Xl({editor:e,revision:a,isCurrent:r}){let n=new Date(a.createdAt),[c,d]=Ur(e.previewRevision);return(0,fe.jsx)("button",{title:a.description,className:zt.list.revision({selected:c?c.ref===a.ref:r,current:r}),onClick:()=>d(r?void 0:a),children:(0,fe.jsxs)($,{center:!0,gap:10,children:[r?(0,fe.jsx)(q,{icon:Ai,size:18}):(0,fe.jsx)(q,{icon:Hi,size:18}),(0,fe.jsxs)(me,{align:"flex-start",children:[(0,fe.jsx)("b",{children:n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}),(0,fe.jsx)(Ba,{children:a.user?.name})]})]})},a.ref)}x();var dr=P(j(),1),Ql={root:"alinea-EntryNotice","root-title":"alinea-EntryNotice-title",rootTitle:"alinea-EntryNotice-title","is-draft":"alinea-EntryNotice-is-draft",isDraft:"alinea-EntryNotice-is-draft","is-published":"alinea-EntryNotice-is-published",isPublished:"alinea-EntryNotice-is-published","is-archived":"alinea-EntryNotice-is-archived",isArchived:"alinea-EntryNotice-is-archived","is-publishing":"alinea-EntryNotice-is-publishing",isPublishing:"alinea-EntryNotice-is-publishing"},xo=V(Ql);function ko({icon:e,title:a,variant:r,children:n}){return(0,dr.jsx)(za,{className:xo.root(r),children:(0,dr.jsxs)($,{center:!0,gap:22,children:[e&&(0,dr.jsx)("div",{children:(0,dr.jsx)(q,{icon:e,size:24})}),(0,dr.jsxs)("div",{children:[(0,dr.jsx)("h2",{className:xo.root.title(),children:a}),n]})]})})}x();var Ja=P(G(),1);x();x();var cr=(e=>(e.Ping="[alinea-ping]",e.Pong="[alinea-pong]",e.Reload="[alinea-reload]",e.Refetch="[alinea-refetch]",e.Previous="[alinea-previous]",e.Next="[alinea-next]",e.Preview="[alinea-preview]",e))(cr||{});x();var At=P(j(),1);function Io(e){return(0,At.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,At.jsx)("path",{fill:"currentColor",d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2s2 .9 2 2s-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z"})})}x();var Nt=P(j(),1);function So(e){return(0,Nt.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Nt.jsx)("path",{fill:"currentColor",d:"M17.65 6.35a7.95 7.95 0 0 0-6.48-2.31c-3.67.37-6.69 3.35-7.1 7.02C3.52 15.91 7.27 20 12 20a7.98 7.98 0 0 0 7.21-4.56c.32-.67-.16-1.44-.9-1.44c-.37 0-.72.2-.88.53a5.994 5.994 0 0 1-6.8 3.31c-2.22-.49-4.01-2.3-4.48-4.52A6.002 6.002 0 0 1 12 6c1.66 0 3.14.69 4.22 1.78l-1.51 1.51c-.63.63-.19 1.71.7 1.71H19c.55 0 1-.45 1-1V6.41c0-.89-1.08-1.34-1.71-.71l-.64.65z"})})}var ur=P(G(),1),re=P(j(),1),es={root:"alinea-BrowserPreview","root-bar":"alinea-BrowserPreview-bar",rootBar:"alinea-BrowserPreview-bar","root-iframe":"alinea-BrowserPreview-iframe",rootIframe:"alinea-BrowserPreview-iframe","root-loader":"alinea-BrowserPreview-loader",rootLoader:"alinea-BrowserPreview-loader","is-loading":"alinea-BrowserPreview-is-loading",isLoading:"alinea-BrowserPreview-is-loading",mini:"alinea-BrowserPreview-mini","mini-footer":"alinea-BrowserPreview-mini-footer",miniFooter:"alinea-BrowserPreview-mini-footer"},Ga=V(es);function Eo({url:e,registerLivePreview:a}){let r=(0,ur.useRef)(null),[n,c]=(0,ur.useState)(!0),d=(0,ur.useRef)(!1),t=new URL(e,window.location.href),i=`${t.protocol}//${t.host}`;(0,ur.useEffect)(()=>{c(!0);function h(f){!f.data||typeof f.data!="object"||f.data.action===cr.Pong&&(console.log("[Alinea preview window detected]"),d.current=!0,a({preview(p){l({action:cr.Preview,...p})}}))}return addEventListener("message",h),()=>removeEventListener("message",h)},[e]),(0,ur.useEffect)(()=>{if(n){let h=setTimeout(()=>c(!1),3e3);return()=>clearTimeout(h)}},[n]);function l(h){r.current?.contentWindow?.postMessage(h,i)}function s(){l({action:cr.Previous})}function o(){l({action:cr.Next})}function u(){d.current?l({action:cr.Reload}):r.current?.setAttribute("src",e),c(!0)}let m=(0,re.jsx)(re.Fragment,{children:(0,re.jsxs)("div",{style:{flexGrow:1,position:"relative",overflow:"hidden"},children:[(0,re.jsx)("div",{className:Ga.root.loader({loading:n}),children:(0,re.jsx)(he,{})}),(0,re.jsx)("iframe",{ref:r,className:Ga.root.iframe(),allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-top-navigation allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts allow-downloads allow-pointer-lock",src:e,onLoad:()=>{c(!1);try{l({action:cr.Ping})}catch{d.current=!1}}},e)]})});return(0,re.jsxs)("div",{className:Ga.root(),children:[(0,re.jsx)(yr.Root,{className:Ga.root.bar(),children:(0,re.jsxs)($,{style:{height:"100%"},children:[(0,re.jsx)(yr.Item,{as:"button",icon:cn,onClick:s}),(0,re.jsx)(yr.Item,{as:"button",icon:pa,onClick:o}),(0,re.jsx)(yr.Item,{as:"button",icon:So,onClick:u}),(0,re.jsx)(yr.Item,{full:!0,style:{flexGrow:1,minWidth:0},children:(0,re.jsx)(br.Monospace,{style:{display:"block",width:"100%",background:"var(--alinea-highlight)",padding:`${Q(6)} ${Q(15)}`,borderRadius:Q(8)},children:(0,re.jsxs)($,{gap:8,center:!0,children:[(0,re.jsx)(Io,{style:{flexShrink:0}}),(0,re.jsx)("span",{style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e})]})})}),(0,re.jsx)(yr.Item,{as:"a",icon:pn,href:e+"&full",target:"_blank"})]})}),m]})}var na=P(j(),1);function To({editor:e,preview:a}){return a?typeof a=="string"?(0,na.jsx)(rs,{editor:e,preview:a}):(0,na.jsx)(as,{editor:e,preview:a}):null}function rs({editor:e,preview:a}){let r=N(e.selectedPhase),n=`?token=${e.previewToken}&entryId=${e.entryId}&realm=${r}`,[c,d]=(0,Ja.useState)(void 0),t=N(e.yUpdate);(0,Ja.useEffect)(()=>{if(!c)return;let s=$n(t,{level:9}),o=di.stringify(s);c.preview({entryId:e.entryId,phase:r,update:o})},[c,t]);let i=new URL(a,location.href),l=new URL(n,i);return(0,na.jsx)(Eo,{url:l.toString(),registerLivePreview:d})}function as({editor:e,preview:a}){let r=N(e.draftEntry);return(0,na.jsx)(a,{entry:r,previewToken:e.previewToken})}var L=P(j(),1),ts={root:"alinea-EntryEdit","root-tabs":"alinea-EntryEdit-tabs",rootTabs:"alinea-EntryEdit-tabs"},Po=V(ts);function is({editor:e}){let a=N(e.draftEntry),n=N(e.hasChanges)?e.activeVersion:e.phases[e.availablePhases.find(c=>c!==Ve.Draft)];return(0,L.jsx)(bo,{entryA:n,entryB:a})}function Za({editor:e}){let{alineaDev:a}=vr(),r=Me(),n=Ne(),{isPreviewOpen:c}=_a(),d=ce(),t=N(e.editMode),i=N(e.hasChanges),l=N(e.selectedPhase),s=(0,mr.useRef)(null);(0,mr.useEffect)(()=>{s.current?.scrollTo({top:0})},[e.entryId,t,l]);let o=r&&r!==e.activeVersion.locale,{isBlocking:u,nextRoute:m,confirm:h,cancel:f}=ro("Are you sure you want to discard changes?",!o&&i),p=m?.data.editor?.entryId!==e.entryId,g=N(e.form),y=ie(e.saveDraft),k=ie(e.publishDraft),T=ie(e.publishEdits),D=ie(e.discardEdits),R=N(e.showHistory),_=ie(e.saveTranslation),w=N(e.previewRevision),v=e.preview,b=()=>_(r);(0,mr.useEffect)(()=>{function C(U){if(U.ctrlKey&&U.key==="s"){if(U.preventDefault(),w){alert("todo");return}o&&i?b():n.enableDrafts?i?y():l===Ve.Draft&&k():i&&T()}}return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[e,i,y,n.enableDrafts]);let I=de.sections(e.type),E=I.length===1&&I[0][ht.Data]instanceof kn,S=E&&I[0][ht.Data],F=S&&S.types.filter(C=>!de.meta(C).isHidden);return(0,mr.useEffect)(()=>{u&&!p&&h?.()},[u,p,h]),(0,L.jsxs)(L.Fragment,{children:[a&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ne.Slot,{children:(0,L.jsxs)(ne.Status,{children:["File path: ",e.activeVersion.filePath]})}),(0,L.jsx)(ne.Slot,{children:(0,L.jsxs)(ne.Status,{children:["Parent dir: ",e.activeVersion.parentDir]})}),(0,L.jsx)(ne.Slot,{children:(0,L.jsxs)(ne.Status,{children:["Children dir: ",e.activeVersion.childrenDir]})}),(0,L.jsx)(ne.Slot,{children:(0,L.jsxs)(ne.Status,{children:["Url: ",e.activeVersion.url]})}),(0,L.jsx)(ne.Slot,{children:(0,L.jsx)(ne.Status,{icon:sn,children:e.activeVersion.fileHash})}),(0,L.jsx)(ne.Slot,{children:(0,L.jsx)(ne.Status,{icon:to,children:e.activeVersion.rowHash})})]}),u&&p&&(0,L.jsx)(zr,{open:!0,onClose:()=>f(),children:(0,L.jsxs)(me,{gap:30,children:[(0,L.jsxs)("p",{children:["This document was changed, would you like to save your changes",p?" before navigating":"","?"]}),(0,L.jsx)($,{as:"footer",children:(0,L.jsx)(Cr.Right,{children:(0,L.jsxs)($,{gap:16,children:[(0,L.jsx)(Ye,{outline:!0,type:"button",onClick:()=>{D(),h()},children:"Discard my changes"}),n.enableDrafts?(0,L.jsx)(Ye,{onClick:()=>{y(),h()},children:"Save as draft"}):(0,L.jsx)(Ye,{onClick:()=>{T(),h()},children:"Publish changes"})]})})})]})}),(0,L.jsx)(Kr,{scrollRef:s,className:Po.root(),children:(0,L.jsxs)(bt.Provider,{children:[(0,L.jsx)(dn,{editor:e}),R&&(0,L.jsx)(yo,{editor:e}),(0,L.jsxs)(Oa.Root,{children:[(0,L.jsx)(bn,{editor:e,backLink:e.activeVersion.parent?d.entry({entryId:e.activeVersion.parent,workspace:e.activeVersion.workspace}):d.entry({entryId:void 0}),children:E&&(0,L.jsx)("div",{className:Po.root.tabs(),children:(0,L.jsx)(In,{backdrop:!1,section:I[0]})})}),(0,L.jsxs)(Kr.Container,{children:[o&&(0,L.jsx)("div",{children:(0,L.jsxs)(ko,{icon:ka,title:"Untranslated",variant:"untranslated",children:["This page has not yet been translated to this language,",(0,L.jsx)("br",{}),e.parentNeedsTranslation?"please translate the parent page first.":"please enter the details below and save to start translating."]})}),(0,L.jsx)(Sn,{editor:e,children:(0,L.jsx)(nr,{name:"input form",children:t===vn.Diff?(0,L.jsx)(is,{editor:e}):E&&F?(0,L.jsx)(Oa.Panels,{children:F.map((C,U)=>(0,L.jsx)(Wi,{form:g,children:(0,L.jsx)(Oa.Panel,{unmount:!1,tabIndex:U,children:(0,L.jsx)(Yr,{type:C})})},U))}):(0,L.jsx)(me,{gap:18,children:(0,L.jsx)(Yr,{form:g})})})})]})]}),(0,L.jsx)(bt.Root,{})]})}),v&&(0,L.jsx)(io,{children:(0,L.jsx)(mr.Suspense,{children:(0,L.jsx)(To,{preview:v,editor:e})})})]})}x();var Ot=P(G(),1);x();var jt=P(j(),1);function Do(e){return(0,jt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,jt.jsx)("path",{fill:"currentColor",d:"M8 16h8v2H8zm0-4h8v2H8zm6-10H6c-1.1 0-2 .9-2 2v16c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"})})}var Hr=P(G(),1);x();si();var Fo=P(G(),1);var ns=ma(Ki(),1);function Dr(e){return`@alinea/root-${e}`}var os=te(e=>{let{schema:a}=e(ct);return Ue(a).filter(([r,n])=>!de.meta(n).isHidden).map(([r])=>r)});async function ls(e,a,r,n){let c=M().where(M.workspace.is(a),M.root.is(r),M.parent.isNull(),M.active,M.type.isIn(n)).select(M.i18nId).groupBy(M.i18nId).orderBy(M.index.asc()),d=await e.find(c);return{id:Dr(r),index:"",isFolder:!0,entries:[],children:d}}var ss=te(async e=>{let a=await e(er),r=e(os),{schema:n}=e(ct),c=e(Xi),d=e(Lr);return new ns.default(async t=>{let i=new Map,l=t.filter(h=>h!==Dr(c.name)),s={id:M.i18nId,entryId:M.entryId,type:M.type,title:M.title,phase:M.phase,locale:M.locale,workspace:M.workspace,root:M.root,path:M.path,parentPaths({parents:h}){return h(M).select(M.path)},children({children:h}){return h(M).where(M.type.isIn(r)).select(M.i18nId).groupBy(M.i18nId).orderBy(M.index.asc())}},o=M().select({id:M.i18nId,index:M.index,data:s,translations({translations:h}){return h().select(s)}}).groupBy(M.i18nId).where(M.i18nId.isIn(l)),u=await a.preferDraft.find(o);for(let h of u){let f=[h.data].concat(h.translations);i.set(h.id,{id:h.id,index:h.index,entries:f,children:[...new Set(f.flatMap(p=>p.children))]})}let m=[];for(let h of t){if(h===Dr(c.name)){m.push(await ls(a.preferDraft,d.name,c.name,r));continue}let f=i.get(h);if(!f){m.push(void 0);continue}let p=f.entries[0].type,g=n[p],y=de.isContainer(g);m.push({...f,isFolder:y})}return m})}),ds=te(e=>({loader:e(ss)}));function Ro(){let{loader:e}=N(ds),a=Ea(),{config:r}=vr();return(0,Fo.useMemo)(()=>({onDrop(n,{item:c,childIndex:d,insertionIndex:t}){if(n.length!==1)return;let[i]=n;if(d===null)return;if(i.getParent()!==c){console.log("Todo: move entries");return}let l=c.getChildren()[d-1],s=c.getChildren()[d],o=l?.getItemData()?.index??null,u=s?.getItemData()?.index??null;try{let m=Fa(o,u),h=[];for(let f of i.getItemData().entries)h.push({type:Ia.Order,entryId:f.entryId,file:va(r,f,f.parentPaths),index:m});a(h,!0)}catch(m){console.error(m)}},async getItem(n){return await(await e).clear(n).load(n)},async getChildren(n){return this.getItem(n).then(c=>c?.children??[])}}),[e])}var le=P(j(),1),Bo=P(G(),1),cs=(e,a)=>{let r,n=null;return()=>{let c=a();return r?(n&&n.length===c.length&&!n.some((t,i)=>t!==c[i])||(r=e(...c),n=c),r):(r=e(...c),n=c,r)}};function us(e,a){return typeof e=="function"?e(a):e}function la(e,a){return r=>{a.setState(n=>Object.assign(Object.assign({},n),{[e]:us(r,n[e])}))}}var Co=(e,a=100,r=1e3)=>new Promise(n=>{let c,d=setInterval(()=>{e()&&(n(),clearInterval(d),clearTimeout(c))},a);c=setTimeout(()=>{clearInterval(d)},r)}),Mo=function(e,a,r,n){function c(d){return d instanceof r?d:new r(function(t){t(d)})}return new(r||(r=Promise))(function(d,t){function i(o){try{s(n.next(o))}catch(u){t(u)}}function l(o){try{s(n.throw(o))}catch(u){t(u)}}function s(o){o.done?d(o.value):c(o.value).then(i,l)}s((n=n.apply(e,a||[])).next())})},ms={key:"tree",getInitialState:e=>Object.assign({expandedItems:[],focusedItem:null},e),getDefaultConfig:(e,a)=>Object.assign({setExpandedItems:la("expandedItems",a),setFocusedItem:la("focusedItem",a)},e),stateHandlerNames:{expandedItems:"setExpandedItems",focusedItem:"setFocusedItem"},createTreeInstance:(e,a)=>Object.assign(Object.assign({},e),{retrieveItemData:()=>{throw new Error("No data-loader registered")},retrieveChildrenIds:()=>{throw new Error("No data-loader registered")},isItemExpanded:r=>a.getState().expandedItems.includes(r),getItemsMeta:()=>{let{rootItemId:r}=a.getConfig(),{expandedItems:n}=a.getState(),c=[],d=(l,s,o,u,m)=>{var h;if(c.push({itemId:l,level:o,index:c.length,parentId:s,setSize:u,posInSet:m}),n.includes(l)){let f=(h=a.retrieveChildrenIds(l))!==null&&h!==void 0?h:[],p=0;for(let g of f)d(g,l,o+1,f.length,p++)}},t=a.retrieveChildrenIds(r),i=0;for(let l of t)d(l,r,0,t.length,i++);return c},expandItem:r=>{var n;a.getItemInstance(r).isFolder()&&(!((n=a.getState().loadingItems)===null||n===void 0)&&n.includes(r)||(a.applySubStateUpdate("expandedItems",c=>[...c,r]),a.rebuildTree()))},collapseItem:r=>{a.getItemInstance(r).isFolder()&&(a.applySubStateUpdate("expandedItems",n=>n.filter(c=>c!==r)),a.rebuildTree())},getFocusedItem:()=>{var r,n;return(n=a.getItemInstance((r=a.getState().focusedItem)!==null&&r!==void 0?r:""))!==null&&n!==void 0?n:a.getItems()[0]},focusItem:r=>{a.applySubStateUpdate("focusedItem",r)},focusNextItem:()=>{let{index:r}=a.getFocusedItem().getItemMeta(),n=Math.min(r+1,a.getItems().length-1);a.focusItem(a.getItems()[n].getId())},focusPreviousItem:()=>{let{index:r}=a.getFocusedItem().getItemMeta(),n=Math.max(r-1,0);a.focusItem(a.getItems()[n].getId())},updateDomFocus:()=>{setTimeout(()=>Mo(void 0,void 0,void 0,function*(){var r,n;let c=a.getFocusedItem();(n=(r=a.getConfig()).scrollToItem)===null||n===void 0||n.call(r,c),yield Co(()=>c.getElement()!==null,20);let d=c.getElement();d&&d.focus()}))},getContainerProps:()=>{var r;return Object.assign(Object.assign({},(r=e.getContainerProps)===null||r===void 0?void 0:r.call(e)),{role:"tree",ariaLabel:"",ariaActivedescendant:""})}}),createItemInstance:(e,a,r)=>Object.assign(Object.assign({},e),{isLoading:()=>{throw new Error("No data-loader registered")},scrollTo:n=>Mo(void 0,void 0,void 0,function*(){var c,d;(d=(c=r.getConfig()).scrollToItem)===null||d===void 0||d.call(c,a),yield Co(()=>a.getElement()!==null,20),a.getElement().scrollIntoView(n)}),getId:()=>a.getItemMeta().itemId,getProps:()=>{var n;let c=a.getItemMeta();return Object.assign(Object.assign({},(n=e.getProps)===null||n===void 0?void 0:n.call(e)),{role:"treeitem","aria-setsize":c.setSize,"aria-posinset":c.posInSet,"aria-selected":"false","aria-label":a.getItemName(),"aria-level":c.level,tabIndex:a.isFocused()?0:-1,onClick:a.getMemoizedProp("tree/onClick",()=>d=>{a.setFocused(),a.primaryAction(),!(d.ctrlKey||d.shiftKey||d.metaKey)&&a.isFolder()&&(a.isExpanded()?a.collapse():a.expand())})})},expand:()=>r.expandItem(a.getItemMeta().itemId),collapse:()=>r.collapseItem(a.getItemMeta().itemId),getItemData:()=>r.retrieveItemData(a.getItemMeta().itemId),isExpanded:()=>r.getState().expandedItems.includes(a.getItemMeta().itemId),isFocused:()=>r.getState().focusedItem===a.getItemMeta().itemId||r.getState().focusedItem===null&&a.getItemMeta().index===0,isFolder:()=>a.getItemMeta().level===-1||r.getConfig().isItemFolder(a),getItemName:()=>r.getConfig().getItemName(a),setFocused:()=>r.focusItem(a.getItemMeta().itemId),primaryAction:()=>{var n,c;return(c=(n=r.getConfig()).onPrimaryAction)===null||c===void 0?void 0:c.call(n,a)},getParent:cs(n=>{for(let c=n.index-1;c>=0;c--){let d=r.getItems()[c];if(d.getItemMeta().level<n.level)return d}return r.getItemInstance(r.getConfig().rootItemId)},()=>[a.getItemMeta()]),getIndexInParent:()=>a.getItemMeta().posInSet,getChildren:()=>r.retrieveChildrenIds(a.getItemMeta().itemId).map(n=>r.getItemInstance(n)),getTree:()=>r,getItemAbove:()=>r.getItems()[a.getItemMeta().index-1],getItemBelow:()=>r.getItems()[a.getItemMeta().index+1],getMemoizedProp:(n,c,d)=>{var t,i,l,s,o,u,m;let h=a.getDataRef(),f=(t=h.current.memoizedValues)===null||t===void 0?void 0:t[n];if(f&&(!d||!((l=(i=h.current.memoizedDeps)===null||i===void 0?void 0:i[n])===null||l===void 0)&&l.every((g,y)=>g===d[y])))return f;(s=(u=h.current).memoizedDeps)!==null&&s!==void 0||(u.memoizedDeps={}),(o=(m=h.current).memoizedValues)!==null&&o!==void 0||(m.memoizedValues={});let p=c();return h.current.memoizedDeps[n]=d,h.current.memoizedValues[n]=p,p}}),hotkeys:{focusNextItem:{hotkey:"ArrowDown",canRepeat:!0,preventDefault:!0,isEnabled:e=>{var a,r;return!((r=(a=e.isSearchOpen)===null||a===void 0?void 0:a.call(e))!==null&&r!==void 0&&r)&&!e.getState().dnd},handler:(e,a)=>{a.focusNextItem(),a.updateDomFocus()}},focusPreviousItem:{hotkey:"ArrowUp",canRepeat:!0,preventDefault:!0,isEnabled:e=>{var a,r;return!((r=(a=e.isSearchOpen)===null||a===void 0?void 0:a.call(e))!==null&&r!==void 0&&r)&&!e.getState().dnd},handler:(e,a)=>{a.focusPreviousItem(),a.updateDomFocus()}},expandOrDown:{hotkey:"ArrowRight",canRepeat:!0,handler:(e,a)=>{let r=a.getFocusedItem();r.isExpanded()||!r.isFolder()?(a.focusNextItem(),a.updateDomFocus()):r.expand()}},collapseOrUp:{hotkey:"ArrowLeft",canRepeat:!0,handler:(e,a)=>{var r;let n=a.getFocusedItem();(!n.isExpanded()||!n.isFolder())&&n.getItemMeta().level!==0?((r=n.getParent())===null||r===void 0||r.setFocused(),a.updateDomFocus()):n.collapse()}},focusFirstItem:{hotkey:"Home",handler:(e,a)=>{a.focusItem(a.getItems()[0].getId()),a.updateDomFocus()}},focusLastItem:{hotkey:"End",handler:(e,a)=>{a.focusItem(a.getItems()[a.getItems().length-1].getId()),a.updateDomFocus()}}}},_o=(e,a,r)=>{var n,c;let d={};for(let t of e)Object.assign(d,(c=(n=t.createItemInstance)===null||n===void 0?void 0:n.call(t,Object.assign({},d),d,a,r))!==null&&c!==void 0?c:{});return d},hs=e=>{var a;let r=e?.map(n=>n.key);for(let n of e??[]){let c=(a=n.deps)===null||a===void 0?void 0:a.find(d=>!r?.includes(d));if(c)throw new Error(`${n.key} needs ${c}`)}},fs=(e,a)=>{var r;return a.key&&(!((r=e.overwrites)===null||r===void 0)&&r.includes(a.key))?1:-1},ps=(e=[])=>e.sort(fs),gs=e=>{var a,r,n,c,d;let t={},i=[ms,...ps(e.features)];hs(i);let l=i.reduce((w,v)=>{var b,I;return(I=(b=v.getInitialState)===null||b===void 0?void 0:b.call(v,w,t))!==null&&I!==void 0?I:w},(r=(a=e.initialState)!==null&&a!==void 0?a:e.state)!==null&&r!==void 0?r:{}),s=i.reduce((w,v)=>{var b,I;return(I=(b=v.getDefaultConfig)===null||b===void 0?void 0:b.call(v,w,t))!==null&&I!==void 0?I:w},e),o=i.reduce((w,v)=>Object.assign(Object.assign({},w),v.stateHandlerNames),{}),u,m={current:{}},h={},f=[],p={},g={},y={},k={},T=w=>{f=[],y={};let v=_o([w,...i],t,s.rootItemId);h[s.rootItemId]=v,y[s.rootItemId]={itemId:s.rootItemId,index:-1,parentId:null,level:-1,posInSet:0,setSize:1};for(let b of t.getItemsMeta())if(y[b.itemId]=b,h[b.itemId])f.push(h[b.itemId]);else{let I=_o([w,...i],t,b.itemId);h[b.itemId]=I,f.push(I)}console.log("REBUILT")},D=w=>{for(let v of i)w(v)},R={key:"main",createTreeInstance:w=>Object.assign(Object.assign({},w),{getState:()=>l,setState:v=>{var b;(b=s.setState)===null||b===void 0||b.call(s,l)},applySubStateUpdate:(v,b)=>{l[v]=typeof b=="function"?b(l[v]):b,s[o[v]](l[v])},rebuildTree:()=>{var v;T(R),(v=s.setState)===null||v===void 0||v.call(s,l)},getConfig:()=>s,setConfig:v=>{s=typeof v=="function"?v(s):v,s.state&&(l=Object.assign(Object.assign({},l),s.state))},getItemInstance:v=>h[v],getItems:()=>f,registerElement:v=>{u!==v&&(u&&!v?D(b=>{var I;return(I=b.onTreeUnmount)===null||I===void 0?void 0:I.call(b,t,u)}):!u&&v&&D(b=>{var I;return(I=b.onTreeMount)===null||I===void 0?void 0:I.call(b,t,v)}),u=v)},getElement:()=>u,getDataRef:()=>m,getHotkeyPresets:()=>k}),createItemInstance:(w,v,b,I)=>Object.assign(Object.assign({},w),{registerElement:E=>{if(p[I]===E)return;let S=p[I];S&&!E?D(F=>{var C;return(C=F.onItemUnmount)===null||C===void 0?void 0:C.call(F,v,S,t)}):!S&&E&&D(F=>{var C;return(C=F.onItemMount)===null||C===void 0?void 0:C.call(F,v,E,t)}),p[I]=E},getElement:()=>p[I],getDataRef:()=>{var E;return(E=g[I])!==null&&E!==void 0?E:g[I]={current:{}}},getItemMeta:()=>y[I]})},_=[R,...i];for(let w of _)Object.assign(t,(c=(n=w.createTreeInstance)===null||n===void 0?void 0:n.call(w,Object.assign({},t),t))!==null&&c!==void 0?c:{}),Object.assign(k,(d=w.hotkeys)!==null&&d!==void 0?d:{});return T(R),t},Fr;(function(e){e.Top="top",e.Bottom="bottom",e.Item="item"})(Fr||(Fr={}));var vs={key:"selection",getInitialState:e=>Object.assign({selectedItems:[]},e),getDefaultConfig:(e,a)=>Object.assign({setSelectedItems:la("selectedItems",a)},e),stateHandlerNames:{selectedItems:"setSelectedItems"},createTreeInstance:(e,a)=>Object.assign(Object.assign({},e),{setSelectedItems:r=>{a.applySubStateUpdate("selectedItems",r)},getSelectedItems:()=>a.getState().selectedItems.map(a.getItemInstance)}),createItemInstance:(e,a,r)=>Object.assign(Object.assign({},e),{select:()=>{let{selectedItems:n}=r.getState();r.setSelectedItems(n.includes(a.getItemMeta().itemId)?n:[...n,a.getItemMeta().itemId])},deselect:()=>{let{selectedItems:n}=r.getState();r.setSelectedItems(n.filter(c=>c!==a.getItemMeta().itemId))},isSelected:()=>{let{selectedItems:n}=r.getState();return n.includes(a.getItemMeta().itemId)},selectUpTo:n=>{let c=a.getItemMeta().index,d=r.getFocusedItem().getItemMeta().index,[t,i]=c<d?[c,d]:[d,c],l=r.getItems().slice(t,i+1).map(u=>u.getItemMeta().itemId);if(!n){r.setSelectedItems(l);return}let{selectedItems:s}=r.getState(),o=[...new Set([...s,...l])];r.setSelectedItems(o)},toggleSelect:()=>{a.isSelected()?a.deselect():a.select()},getProps:()=>Object.assign(Object.assign({},e.getProps()),{"aria-selected":a.isSelected()?"true":"false",onClick:a.getMemoizedProp("selection/onClick",()=>n=>{var c,d;n.shiftKey?a.selectUpTo(n.ctrlKey||n.metaKey):n.ctrlKey||n.metaKey?a.toggleSelect():r.setSelectedItems([a.getItemMeta().itemId]),(d=(c=e.getProps()).onClick)===null||d===void 0||d.call(c,n)})})}),hotkeys:{toggleSelectItem:{hotkey:"ctrl+space",handler:(e,a)=>{a.getFocusedItem().toggleSelect()}},selectUpwards:{hotkey:"shift+ArrowUp",handler:()=>{}},selectDownwards:{hotkey:"shift+ArrowDown",handler:()=>{}},selectUpwardsCtrl:{hotkey:"shift+ctrl+ArrowUp",handler:()=>{}},selectDownwardsCtrl:{hotkey:"shift+ctrl+ArrowUp",handler:()=>{}},selectAll:{hotkey:"Control+a",preventDefault:!0,handler:(e,a)=>{a.setSelectedItems(a.getItems().map(r=>r.getId()))}}}},bs={key:"async-data-loader",getInitialState:e=>Object.assign({loadingItems:[]},e),getDefaultConfig:(e,a)=>Object.assign({setLoadingItems:la("loadingItems",a)},e),stateHandlerNames:{loadingItems:"setLoadingItems"},createTreeInstance:(e,a)=>Object.assign(Object.assign({},e),{retrieveItemData:r=>{var n,c,d,t,i,l,s;let o=a.getConfig(),u=a.getDataRef();return(n=(l=u.current).itemData)!==null&&n!==void 0||(l.itemData={}),(c=(s=u.current).childrenIds)!==null&&c!==void 0||(s.childrenIds={}),u.current.itemData[r]?u.current.itemData[r]:(a.getState().loadingItems.includes(r)||(a.applySubStateUpdate("loadingItems",m=>[...m,r]),(d=o.asyncDataLoader)===null||d===void 0||d.getItem(r).then(m=>{var h;u.current.itemData[r]=m,(h=o.onLoadedItem)===null||h===void 0||h.call(o,r,m),a.applySubStateUpdate("loadingItems",f=>f.filter(p=>p!==r))})),(i=(t=o.createLoadingItemData)===null||t===void 0?void 0:t.call(o))!==null&&i!==void 0?i:null)},retrieveChildrenIds:r=>{var n,c,d,t,i,l,s;let o=a.getConfig(),u=a.getDataRef();return(n=(l=u.current).itemData)!==null&&n!==void 0||(l.itemData={}),(c=(s=u.current).childrenIds)!==null&&c!==void 0||(s.childrenIds={}),u.current.childrenIds[r]?u.current.childrenIds[r]:a.getState().loadingItems.includes(r)?[]:(a.applySubStateUpdate("loadingItems",m=>[...m,r]),!((d=o.asyncDataLoader)===null||d===void 0)&&d.getChildrenWithData?(t=o.asyncDataLoader)===null||t===void 0||t.getChildrenWithData(r).then(m=>{var h,f;for(let{id:g,data:y}of m)u.current.itemData[g]=y,(h=o.onLoadedItem)===null||h===void 0||h.call(o,g,y);let p=m.map(({id:g})=>g);u.current.childrenIds[r]=p,(f=o.onLoadedChildren)===null||f===void 0||f.call(o,r,p),a.applySubStateUpdate("loadingItems",g=>g.filter(y=>y!==r)),a.rebuildTree()}):(i=o.asyncDataLoader)===null||i===void 0||i.getChildren(r).then(m=>{var h;u.current.childrenIds[r]=m,(h=o.onLoadedChildren)===null||h===void 0||h.call(o,r,m),a.applySubStateUpdate("loadingItems",f=>f.filter(p=>p!==r)),a.rebuildTree()}),[])},invalidateItemData:r=>{var n;(n=a.getDataRef().current.itemData)===null||n===void 0||delete n[r],a.retrieveItemData(r)},invalidateChildrenIds:r=>{var n;(n=a.getDataRef().current.childrenIds)===null||n===void 0||delete n[r],a.retrieveChildrenIds(r)}}),createItemInstance:(e,a,r)=>Object.assign(Object.assign({},e),{isLoading:()=>r.getState().loadingItems.includes(a.getItemMeta().itemId),invalidateItemData:()=>r.invalidateItemData(a.getItemMeta().itemId),invalidateChildrenIds:()=>r.invalidateChildrenIds(a.getItemMeta().itemId)})},ws=({item:e,childIndex:a})=>`${e.getId()}__${a??"none"}`,ys=(e,a)=>{var r;let n=(r=a.getElement())===null||r===void 0?void 0:r.getBoundingClientRect();return n?(e.pageY-n.top)/n.height:.5},oa=(e,a,r)=>{var n,c,d,t;let i=(n=r.getState().dnd)===null||n===void 0?void 0:n.draggedItems,l=r.getConfig();return!(i&&!(!((d=(c=l.canDrop)===null||c===void 0?void 0:c.call(l,i,a))!==null&&d!==void 0)||d)||!i&&e&&!(!((t=l.canDropForeignDragObject)===null||t===void 0)&&t.call(l,e,a)))},Lo=(e,a,r)=>e<a?Fr.Top:e>r?Fr.Bottom:Fr.Item,Xa=(e,a,r,n=r.getConfig().canDropInbetween)=>{var c,d,t,i;let l=r.getConfig(),s=(d=(c=r.getState().dnd)===null||c===void 0?void 0:c.draggedItems)!==null&&d!==void 0?d:[],o={item:a,childIndex:null,insertionIndex:null},u={item:a.getParent(),childIndex:null,insertionIndex:null};if(!n)return oa(e.dataTransfer,u,r)?o:Xa(e,a.getParent(),r,!1);let m=oa(e.dataTransfer,o,r),h=ys(e,a),f=m?Lo(h,(t=l.topLinePercentage)!==null&&t!==void 0?t:.3,(i=l.bottomLinePercentage)!==null&&i!==void 0?i:.7):Lo(h,.5,.5);if(f===Fr.Item)return o;if(!oa(e.dataTransfer,u,r))return Xa(e,a.getParent(),r,!1);let p=a.getIndexInParent()+(f===Fr.Top?0:1),g=a.getParent().getChildren().slice(0,p).reduce((y,k)=>k&&s?.some(T=>T.getId()===k.getId())?++y:y,0);return{item:a.getParent(),childIndex:p,insertionIndex:p-g}},xs={key:"dragAndDrop",deps:["selection"],getDefaultConfig:(e,a)=>Object.assign({canDrop:(r,n)=>n.item.isFolder(),canDropForeignDragObject:()=>!1,setDndState:la("dnd",a)},e),stateHandlerNames:{dnd:"setDndState"},createTreeInstance:(e,a)=>Object.assign(Object.assign({},e),{getDropTarget:()=>{var r,n;return(n=(r=a.getState().dnd)===null||r===void 0?void 0:r.dragTarget)!==null&&n!==void 0?n:null},getDragLineData:()=>{var r,n,c,d,t;let i=a.getDropTarget(),l=((r=i?.item.getItemMeta().level)!==null&&r!==void 0?r:0)+1;if(!i||i.childIndex===null)return null;let s=i.item.getChildren();if(i.childIndex===s.length){let u=(c=(n=s[i.childIndex-1])===null||n===void 0?void 0:n.getElement())===null||c===void 0?void 0:c.getBoundingClientRect();if(u)return{intend:l,top:u.bottom,left:u.left,right:u.right}}let o=(t=(d=s[i.childIndex])===null||d===void 0?void 0:d.getElement())===null||t===void 0?void 0:t.getBoundingClientRect();return o?{intend:l,top:o.top,left:o.left,right:o.right}:null}}),createItemInstance:(e,a,r)=>Object.assign(Object.assign({},e),{getProps:()=>{var n,c,d;return Object.assign(Object.assign({},e.getProps()),{draggable:(d=(c=(n=r.getConfig()).isItemDraggable)===null||c===void 0?void 0:c.call(n,a))!==null&&d!==void 0?d:!0,onDragStart:a.getMemoizedProp("dnd/onDragStart",()=>t=>{var i,l,s;let o=r.getSelectedItems(),u=o.includes(a)?o:[a],m=r.getConfig();if(o.includes(a)||r.setSelectedItems([a.getItemMeta().itemId]),!(!((l=(i=m.canDrag)===null||i===void 0?void 0:i.call(m,u))!==null&&l!==void 0)||l)){t.preventDefault();return}if(m.createForeignDragObject){let{format:h,data:f}=m.createForeignDragObject(u);(s=t.dataTransfer)===null||s===void 0||s.setData(h,f)}r.applySubStateUpdate("dnd",{draggedItems:u,draggingOverItem:r.getFocusedItem()})}),onDragOver:a.getMemoizedProp("dnd/onDragOver",()=>t=>{var i,l,s;let o=Xa(t,a,r),u=r.getDataRef();if(!(!((i=r.getState().dnd)===null||i===void 0)&&i.draggedItems)&&!(!((s=(l=r.getConfig()).canDropForeignDragObject)===null||s===void 0)&&s.call(l,t.dataTransfer,o))||!oa(t.dataTransfer,o,r))return;t.preventDefault();let m=ws(o);m!==u.current.lastDragCode&&(u.current.lastDragCode=m,r.applySubStateUpdate("dnd",h=>Object.assign(Object.assign({},h),{dragTarget:o,draggingOverItem:a})))}),onDragLeave:a.getMemoizedProp("dnd/onDragLeave",()=>()=>{let t=r.getDataRef();t.current.lastDragCode="no-drag",r.applySubStateUpdate("dnd",i=>Object.assign(Object.assign({},i),{draggingOverItem:void 0,dragTarget:void 0}))}),onDragEnd:a.getMemoizedProp("dnd/onDragEnd",()=>t=>{var i,l,s;let o=(i=r.getState().dnd)===null||i===void 0?void 0:i.draggedItems;r.applySubStateUpdate("dnd",null),!(t.dataTransfer.dropEffect==="none"||!o)&&((s=(l=r.getConfig()).onCompleteForeignDrop)===null||s===void 0||s.call(l,o))}),onDrop:a.getMemoizedProp("dnd/onDrop",()=>t=>{var i,l,s;let o=r.getDataRef(),u=Xa(t,a,r);if(!oa(t.dataTransfer,u,r))return;t.preventDefault();let m=r.getConfig(),h=(i=r.getState().dnd)===null||i===void 0?void 0:i.draggedItems;o.current.lastDragCode=void 0,r.applySubStateUpdate("dnd",null),h?(l=m.onDrop)===null||l===void 0||l.call(m,h,u):(s=m.onDropForeignDragObject)===null||s===void 0||s.call(m,t.dataTransfer,u)})})},isDropTarget:()=>{let n=r.getDropTarget();return n?n.item.getId()===a.getId():!1},isDropTargetAbove:()=>{let n=r.getDropTarget();return!n||n.childIndex===null||n.item!==a.getParent()?!1:n.childIndex===a.getItemMeta().posInSet},isDropTargetBelow:()=>{let n=r.getDropTarget();return!n||n.childIndex===null||n.item!==a.getParent()?!1:n.childIndex-1===a.getItemMeta().posInSet},isDraggingOver:()=>{var n,c;return((c=(n=r.getState().dnd)===null||n===void 0?void 0:n.draggingOverItem)===null||c===void 0?void 0:c.getId())===a.getId()}})},ks=e=>{let[a]=(0,Ot.useState)(()=>({current:gs(e)})),[r,n]=(0,Ot.useState)(()=>a.current.getState());return a.current.setConfig(c=>Object.assign(Object.assign(Object.assign({},c),e),{state:Object.assign(Object.assign({},r),e.state),setState:d=>{var t;n(d),(t=e.setState)===null||t===void 0||t.call(e,d)}})),a.current},Is={tree:"alinea-EntryTree-tree","tree-item":"alinea-EntryTree-tree-item",treeItem:"alinea-EntryTree-tree-item","tree-item-icon":"alinea-EntryTree-tree-item-icon",treeItemIcon:"alinea-EntryTree-tree-item-icon","is-selected":"alinea-EntryTree-is-selected",isSelected:"alinea-EntryTree-is-selected","is-drop":"alinea-EntryTree-is-drop",isDrop:"alinea-EntryTree-is-drop","is-dropAbove":"alinea-EntryTree-is-dropAbove",isDropAbove:"alinea-EntryTree-is-dropAbove","is-dropBelow":"alinea-EntryTree-is-dropBelow",isDropBelow:"alinea-EntryTree-is-dropBelow","tree-item-label":"alinea-EntryTree-tree-item-label",treeItemLabel:"alinea-EntryTree-tree-item-label","tree-item-label-itemName":"alinea-EntryTree-tree-item-label-itemName",treeItemLabelItemName:"alinea-EntryTree-tree-item-label-itemName","is-untranslated":"alinea-EntryTree-is-untranslated",isUntranslated:"alinea-EntryTree-is-untranslated","tree-item-arrow":"alinea-EntryTree-tree-item-arrow",treeItemArrow:"alinea-EntryTree-tree-item-arrow","tree-title":"alinea-EntryTree-tree-title",treeTitle:"alinea-EntryTree-tree-title","tree-status":"alinea-EntryTree-tree-status",treeStatus:"alinea-EntryTree-tree-status","is-draft":"alinea-EntryTree-is-draft",isDraft:"alinea-EntryTree-is-draft"},hr=V(Is);function Ya(e,a){return a.entries.find(r=>r.locale===e)??a.entries[0]}function Ss({item:e,data:a}){let{entryId:r}=N(Da),n=Me(),{schema:c}=Ne(),d=(0,Hr.useRef)(a),t=a??d.current;if(!t)return null;d.current=t;let i=Ya(n,t),{icon:l}=de.meta(c[i.type]),s=i.phase===Ve.Draft,o=n&&i.locale!==n,u=i.phase===Ve.Archived,m=r&&t.id===r;return(0,Bo.createElement)("div",{...e.getProps(),ref:e.registerElement,className:hr.tree.item({untranslated:o,selected:m,drop:e.isDropTarget()&&e.isDraggingOver(),dropAbove:e.isDropTargetAbove()&&e.isDraggingOver(),dropBelow:e.isDropTargetBelow()&&e.isDraggingOver()}),key:e.getId(),"data-id":e.getId()},(0,le.jsxs)("button",{className:hr.tree.item.label(),title:Ya(n,t).title,style:{paddingLeft:Q((e.getItemMeta().level+1)*12)},children:[(0,le.jsx)("span",{className:hr.tree.item.icon(),children:(0,le.jsx)(q,{icon:o?ka:l??Do})}),(0,le.jsx)("span",{className:hr.tree.item.label.itemName(),children:Ya(n,t).title}),e.isFolder()&&(0,le.jsx)("span",{className:hr.tree.item.arrow(),children:e.isExpanded()?(0,le.jsx)(q,{icon:Tr,size:18}):(0,le.jsx)(q,{icon:un,size:18})}),!o&&s&&(0,le.jsx)("span",{className:hr.tree.status({draft:!0}),children:(0,le.jsx)(q,{icon:ji})}),!o&&u&&(0,le.jsx)("span",{className:hr.tree.status({archived:!0}),children:(0,le.jsx)(q,{icon:Ni,size:18})})]}))}function zo({i18nId:e,selected:a=[]}){let r=je(),n=Ro(),c=xe(),d=ce(),t=Me(),i=ks({rootItemId:Dr(r.name),canDropInbetween:!0,onDrop(s,o){return n.onDrop(s,o)},asyncDataLoader:n,getItemName:s=>s.getItemData()&&Ya(t,s.getItemData()).title,isItemFolder:s=>s.getItemData()&&!!s.getItemData().isFolder,onPrimaryAction:s=>{c(d.entry({entryId:s.getId()}))},initialState:{expandedItems:a},state:{selectedItems:e?[e]:[]},features:[bs,vs,xs]}),l=N(Sa);return(0,Hr.useEffect)(()=>{(async()=>{for(let s of a)await n.getChildren(s).then(()=>new Promise(requestAnimationFrame)),i.expandItem(s)})()},[a.join()]),(0,Hr.useEffect)(()=>{i.invalidateChildrenIds(Dr(r.name))},[n]),(0,Hr.useEffect)(()=>{for(let s of l)try{let o=i.getItemInstance(s);if(!o){i.invalidateChildrenIds(Dr(r.name));continue}let m=o.getParent()?.getId();m&&i.invalidateChildrenIds(m),i.invalidateChildrenIds(s),i.invalidateItemData(s)}catch(o){console.error(o)}},[l]),(0,le.jsx)(le.Fragment,{children:(0,le.jsx)("div",{ref:i.registerElement,className:hr.tree(),children:i.getItems().map((s,o)=>{let u=s.getItemData();return(0,le.jsx)(Ss,{item:s,data:u},s.getId())})})})}x();var pe=P(j(),1),Es={root:"alinea-RootOverview","root-icon":"alinea-RootOverview-icon",rootIcon:"alinea-RootOverview-icon"},Ao=V(Es);function No({root:e}){return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Vr,{children:(0,pe.jsx)("title",{children:e.label})}),(0,pe.jsx)(Kr,{children:(0,pe.jsxs)("div",{className:Ao.root(),children:[(0,pe.jsx)(q,{icon:e.icon||Ua,className:Ao.root.icon()}),(0,pe.jsx)(br.H1,{children:(0,pe.jsx)(wr,{label:e.label})}),(0,pe.jsxs)(br.P,{style:{textAlign:"center"},children:["Select an entry in the navigation tree",(0,pe.jsx)("br",{}),"on the left to start editing"]})]})})]})}x();var fr=P(G(),1);var ge=P(j(),1),Ts={root:"alinea-SearchBox","root-label":"alinea-SearchBox-label",rootLabel:"alinea-SearchBox-label","root-label-icon":"alinea-SearchBox-label-icon",rootLabelIcon:"alinea-SearchBox-label-icon","root-label-input":"alinea-SearchBox-label-input",rootLabelInput:"alinea-SearchBox-label-input","root-popover":"alinea-SearchBox-popover",rootPopover:"alinea-SearchBox-popover","root-popover-item":"alinea-SearchBox-popover-item",rootPopoverItem:"alinea-SearchBox-popover-item"},sa=V(Ts);function jo(){let e=ce(),a=xe(),r=Er(),{name:n}=Oe(),{name:c}=je(),d=Me(),[t,i]=(0,fr.useState)(""),[l,s]=(0,fr.useState)(!1),o=mn({onClear:()=>i("")}),u=(0,fr.useMemo)(()=>{let f=t.replace(/,/g," ").split(" ").filter(Boolean);return M({workspace:n,root:c}).where(d?M.locale.is(d):!0).search(...f)},[n,c,t,d]),[m,h]=(0,fr.useState)("row");return(0,fr.useLayoutEffect)(()=>{i("")},[r]),(0,ge.jsxs)("div",{className:sa.root(),onFocus:()=>{s(!0)},onBlur:({currentTarget:f,relatedTarget:p})=>{f.contains(p)||(s(!1),o.focusProps.onBlur())},children:[(0,ge.jsx)("div",{children:(0,ge.jsxs)("label",{className:sa.root.label(),...o.focusProps,children:[(0,ge.jsx)(Rn,{className:sa.root.label.icon()}),(0,ge.jsx)("input",{placeholder:"Search",value:t,onChange:f=>i(f.target.value),className:sa.root.label.input()}),l&&(0,ge.jsx)(Cr.Right,{children:(0,ge.jsxs)($,{gap:10,children:[(0,ge.jsx)(_e,{size:12,icon:Fn,active:m==="row",onClick:()=>h("row")}),(0,ge.jsx)(_e,{size:12,icon:Dn,active:m==="thumb",onClick:()=>h("thumb")})]})})]})}),(0,ge.jsx)(o.Container,{children:l&&t&&(0,ge.jsx)("div",{className:sa.root.popover(),children:(0,ge.jsx)(hn,{border:!1,cursor:u,type:m,toggleSelect:f=>a(e.entry(f)),max:25})})})]})}x();x();var Oo=P(j(),1),Ps={root:"alinea-Link"},Ds=V(Ps);function Ho({href:e,external:a,children:r,...n}){let d=e&&!a?Pa(e):{href:e};return(0,Oo.jsx)("a",{...n,...d,className:Ds.root.mergeProps(n)(),children:r})}var De=P(G(),1);var Fe=P(j(),1),Fs={root:"alinea-NewEntry","root-header":"alinea-NewEntry-header",rootHeader:"alinea-NewEntry-header","root-footer":"alinea-NewEntry-footer",rootFooter:"alinea-NewEntry-footer","root-footer-link":"alinea-NewEntry-footer-link",rootFooterLink:"alinea-NewEntry-footer-link",form:"alinea-NewEntry-form","is-loading":"alinea-NewEntry-is-loading",isLoading:"alinea-NewEntry-is-loading"},Qa=V(Fs),Ht={id:M.entryId,i18nId:M.i18nId,type:M.type,path:M.path,url:M.url,level:M.level,parent:M.parent,parentPaths({parents:e}){return e().select(M.path)},childrenIndex({children:e}){return e().select(M.index).orderBy(M.index.asc()).first()}},Rs=wn("Title",{autoFocus:!0});function Cs({parentId:e}){let a=Ne(),r=N(er),{data:n}=ha(["parent-req",e],async()=>r.preferDraft.maybeGet(M({entryId:e}).select(Ht)),{suspense:!0,keepPreviousData:!0,staleTime:0}),c=n&&(de.isContainer(a.schema[n.type])?n.id:n.parent),{pathname:d}=Er(),t=ce(),i=xe(),l=Me(),s=Ea(),{name:o}=Oe(),u=Ue(a.schema).filter(([,S])=>de.isContainer(S)).map(S=>S[0]),m=je(),h=(0,De.useMemo)(()=>wt.entry("Parent",{condition:M.type.isIn(u).and(M.workspace.is(o)).and(M.root.is(m.name)),initialValue:c?{id:"parent",ref:"entry",type:"entry",entry:c}:void 0}),[]);async function f(S){if(S){let F=await r.preferDraft.get(M({entryId:S}).select(Ht)),C=F&&a.schema[F.type];return C&&de.meta(C).contains||wi(a.schema)}else return m.contains??[]}let p=(0,De.useMemo)(()=>{let S=Ar("Select type",{});return vt.options(S,async F=>{let U=F(h)?.entry,H=await f(U);return{options:Mr(H.map(O=>[O,a.schema[O]]).filter(O=>O[1]).map(([O,ae])=>[O,de.label(ae)||O]))}})},[]),g=(0,De.useMemo)(()=>{let S=wt.entry("Copy content from");return vt.options(S,F=>{let C=F(p);return{readOnly:!C,pickers:{entry:Mn({condition:M.type.is(C),withNavigation:!1,hint:void 0,title:"Copy content from",max:1,selection:Cn})}}})},[]),[y,k]=(0,De.useState)(!1),T=ie(Sa),D=(0,De.useMemo)(()=>xi({fields:{parent:h,title:Rs,type:p,copyFrom:g}}),[]),R=$i(D),_=R.fieldInfo(h),w=R.fieldInfo(p),v=R.fieldInfo(g),b=N(w.value),I=N(_.value);(0,De.useEffect)(()=>{f(I?.entry).then(S=>{S.length>0&&w.mutator(S[0])})},[I]),(0,De.useEffect)(()=>{v.mutator.replace(void 0)},[b]);async function E(S){S.preventDefault();let{title:F,type:C}=R.data();if(!C||!F)return;k(!0);let U=vi(F),H=mt(),O={workspace:o,root:m.name,locale:l??null,path:U,phase:a.enableDrafts?Ve.Draft:Ve.Published},ae=R.data().parent?.entry,X=await r.preferPublished.maybeGet(M({entryId:ae}).select(Ht)),ve=X?X.parentPaths.concat(X.path):[],ue=Ei(a,O,ve),Se=Si(a,O,ve),Ze=Ii(ue),Ee=a.schema[C],oe=Ti(Ee,{...O,parentPaths:ve}),He=R.data().copyFrom?.entry,ua=He?await r.preferPublished.maybeGet(M({entryId:He}).select(M.data)):{},gr=await Vi(a,{entryId:H,...O,filePath:ue,type:C,path:U,title:F,url:oe,index:Fa(null,X?.childrenIndex||null),parent:X?.id??null,seeded:null,level:X?X.level+1:0,parentDir:Ze,childrenDir:Se,i18nId:m.i18n?mt():H,modifiedAt:Date.now(),active:!0,main:!1,data:{...ua,title:F,path:U},searchableText:""});return s([{type:Ia.Create,entryId:gr.entryId,entry:gr,file:va(a,O,ve)}]).then(()=>{k(!1),i(t.entry({entryId:gr.i18nId})),X&&T([X.i18nId])})}return(0,Fe.jsxs)("form",{onSubmit:E,className:Qa.form({loading:y}),children:[y&&(0,Fe.jsx)(he,{absolute:!0}),(0,Fe.jsx)(Yr,{border:!1,form:R}),(0,Fe.jsxs)("div",{className:Qa.root.footer(),children:[(0,Fe.jsx)(Ho,{href:d,className:Qa.root.footer.link(),children:"Cancel"}),(0,Fe.jsx)(Ye,{children:"Create"})]})]})}function Uo({parentId:e}){let a=xe(),{pathname:r}=Er();function n(){a(r)}return(0,Fe.jsx)(zr,{open:!0,onClose:n,className:Qa.root(),children:(0,Fe.jsx)(De.Suspense,{fallback:(0,Fe.jsx)(he,{}),children:(0,Fe.jsx)(Cs,{parentId:e})})})}var se=P(j(),1),Ms={"root-sidebar":"alinea-ContentView-sidebar",rootSidebar:"alinea-ContentView-sidebar","root-create":"alinea-ContentView-create",rootCreate:"alinea-ContentView-create","root-create-button":"alinea-ContentView-create-button",rootCreateButton:"alinea-ContentView-create-button"},Vo=V(Ms);function Ko({editor:e}){let a=Oe(),r=je(),{search:n}=Er(),c=e?.view??Za,d=r?.view??No,t=ce(),i=xe(),{schema:l}=Ne(),s=e&&l[e.activeVersion.type];return(0,se.jsxs)(se.Fragment,{children:[(0,se.jsxs)(Pe.Tree,{children:[(0,se.jsx)(jo,{}),(0,se.jsx)(zo,{i18nId:e?.activeVersion.i18nId,selected:e?.activeVersion.parents}),(0,se.jsx)("div",{className:Vo.root.create(),children:(0,se.jsx)("button",{className:Vo.root.create.button(),onClick:()=>i(t.create({entryId:e?.activeVersion.i18nId,workspace:a.name,root:r.name})),children:(0,se.jsxs)($,{center:!0,gap:8,align:"center",children:[(0,se.jsx)(q,{icon:xn,size:17}),(0,se.jsx)("span",{children:"Create new"})]})})})]}),n==="?new"&&(0,se.jsx)(Uo,{parentId:e?.entryId}),(0,se.jsx)(nr,{name:"content view",fallback:(0,se.jsx)(he,{absolute:!0}),children:s&&e?(0,se.jsx)(c,{type:s,editor:e}):(0,se.jsx)(d,{root:r})})]})}x();var Ie=P(j(),1),_s={root:"alinea-DraftsOverview","root-inner":"alinea-DraftsOverview-inner",rootInner:"alinea-DraftsOverview-inner","root-header":"alinea-DraftsOverview-header",rootHeader:"alinea-DraftsOverview-header","root-list":"alinea-DraftsOverview-list",rootList:"alinea-DraftsOverview-list",diff:"alinea-DraftsOverview-diff"},ip=V(_s);function $o({editor:e}){let a=N(er),r=ce(),n=Oe(),{data:c,refetch:d}=ha(["drafts-overview"],()=>a.drafts.find(M({workspace:n.name})),{suspense:!0}),t=c,i=e?.entryId&&t.find(s=>s.entryId===e?.entryId);function l(){}return(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsxs)(Pe.Tree,{children:[(0,Ie.jsxs)($,{center:!0,style:{padding:`${Q(10)} ${Q(20)}`},children:[(0,Ie.jsx)(br.H4,{flat:!0,children:"DRAFTS"}),(0,Ie.jsx)(Cr.Right,{children:(0,Ie.jsx)(Ye,{iconRight:pa,onClick:l,children:"Publish all"})})]}),(0,Ie.jsx)(me,{children:t.map(s=>(0,Ie.jsx)("div",{children:s.title},s.entryId))})]}),i&&e&&(0,Ie.jsx)(Za,{editor:e})]})}var qo=P(j(),1),Go=dt(()=>te(async e=>{let a=e(Da),r=e(Qi)??null;return{editor:await e(Zi({locale:r,i18nId:a?.entryId}))}})),Ls=new Ka({path:"*",loader:Go,component:Ko}),Bs=new Ka({path:"/draft/:workspace?/:root?/:id?",loader:Go,component:$o}),zs=dt(()=>te(async e=>{let a=e(Sr),r=new URLSearchParams(a.search),n=r.get("url"),c=r.get("workspace")??void 0,d=r.get("root")??void 0,t={url:n};return c&&(t.workspace=c),d&&(t.root=d),await(await e(er)).preferDraft.maybeGet(M(t).select({entryId:M.entryId,root:M.root,workspace:M.workspace}))})),As=new Ka({path:"/edit",loader:zs,component:Ns});function Ns(e){let a=ce(),r=xe();return(0,Wo.useLayoutEffect)(()=>{e&&r(a.entry(e))},[e]),(0,qo.jsx)(he,{absolute:!0})}var js=[Bs,As,Ls],Jo=new Yn({routes:js});x();x();var ee=P(G(),1),Be=P(G(),1),ze=P(G(),1),Zo=(0,Be.createContext)(null);function Yo(){let e=(0,Be.useContext)(Zo);if(e===null){let a=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(a,Yo),a}return e}function Os(){let[e,a]=(0,Be.useState)([]);return[e.length>0?e.join(" "):void 0,(0,Be.useMemo)(()=>function(r){let n=J(d=>(a(t=>[...t,d]),()=>a(t=>{let i=t.slice(),l=i.indexOf(d);return l!==-1&&i.splice(l,1),i}))),c=(0,Be.useMemo)(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return Be.default.createElement(Zo.Provider,{value:c},r.children)},[a])]}var Hs="label";function Us(e,a){let r=Re(),{id:n=`headlessui-label-${r}`,passive:c=!1,...d}=e,t=Yo(),i=be(a);xr(()=>t.register(n),[n,t.register]);let l={ref:i,...t.props,id:n};return c&&("onClick"in l&&(delete l.htmlFor,delete l.onClick),"onClick"in d&&delete d.onClick),we({ourProps:l,theirProps:d,slot:t.slot||{},defaultTag:Hs,name:t.name||"Label"})}var Vs=Te(Us),Ks=Object.assign(Vs,{}),Xo=(0,ze.createContext)(null);function Qo(){let e=(0,ze.useContext)(Xo);if(e===null){let a=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(a,Qo),a}return e}function $s(){let[e,a]=(0,ze.useState)([]);return[e.length>0?e.join(" "):void 0,(0,ze.useMemo)(()=>function(r){let n=J(d=>(a(t=>[...t,d]),()=>a(t=>{let i=t.slice(),l=i.indexOf(d);return l!==-1&&i.splice(l,1),i}))),c=(0,ze.useMemo)(()=>({register:n,slot:r.slot,name:r.name,props:r.props}),[n,r.slot,r.name,r.props]);return ze.default.createElement(Xo.Provider,{value:c},r.children)},[a])]}var Ws="p";function qs(e,a){let r=Re(),{id:n=`headlessui-description-${r}`,...c}=e,d=Qo(),t=be(a);xr(()=>d.register(n),[n,d.register]);let i={ref:t,...d.props,id:n};return we({ourProps:i,theirProps:c,slot:d.slot||{},defaultTag:Ws,name:d.name||"Description"})}var Gs=Te(qs),Js=Object.assign(Gs,{}),Ut=(0,ee.createContext)(null);Ut.displayName="GroupContext";var Zs=ee.Fragment;function Ys(e){var a;let[r,n]=(0,ee.useState)(null),[c,d]=Os(),[t,i]=$s(),l=(0,ee.useMemo)(()=>({switch:r,setSwitch:n,labelledby:c,describedby:t}),[r,n,c,t]),s={},o=e;return ee.default.createElement(i,{name:"Switch.Description"},ee.default.createElement(d,{name:"Switch.Label",props:{htmlFor:(a=l.switch)==null?void 0:a.id,onClick(u){r&&(u.currentTarget.tagName==="LABEL"&&u.preventDefault(),r.click(),r.focus({preventScroll:!0}))}}},ee.default.createElement(Ut.Provider,{value:l},we({ourProps:s,theirProps:o,defaultTag:Zs,name:"Switch.Group"}))))}var Xs="button";function Qs(e,a){let r=Re(),{id:n=`headlessui-switch-${r}`,checked:c,defaultChecked:d=!1,onChange:t,name:i,value:l,form:s,...o}=e,u=(0,ee.useContext)(Ut),m=(0,ee.useRef)(null),h=be(m,a,u===null?null:u.setSwitch),[f,p]=ln(c,t,d),g=J(()=>p?.(!f)),y=J(w=>{if(qr(w.currentTarget))return w.preventDefault();w.preventDefault(),g()}),k=J(w=>{w.key===Ce.Space?(w.preventDefault(),g()):w.key===Ce.Enter&&on(w.currentTarget)}),T=J(w=>w.preventDefault()),D=(0,ee.useMemo)(()=>({checked:f}),[f]),R={id:n,ref:h,role:"switch",type:wa(e,m),tabIndex:0,"aria-checked":f,"aria-labelledby":u?.labelledby,"aria-describedby":u?.describedby,onClick:y,onKeyUp:k,onKeyPress:T},_=zi();return(0,ee.useEffect)(()=>{var w;let v=(w=m.current)==null?void 0:w.closest("form");v&&d!==void 0&&_.addEventListener(v,"reset",()=>{p(d)})},[m,p]),ee.default.createElement(ee.default.Fragment,null,i!=null&&f&&ee.default.createElement(ar,{features:rr.Hidden,...Fi({as:"input",type:"checkbox",hidden:!0,readOnly:!0,form:s,checked:f,name:i,value:l})}),we({ourProps:R,theirProps:o,slot:D,defaultTag:Xs,name:"Switch"}))}var ed=Te(Qs),rd=Ys,et=Object.assign(ed,{Group:rd,Label:Ks,Description:Js});x();var Vt=P(j(),1);function el({user:e}){let a=e.sub.charAt(0).toUpperCase(),r=ki(e.sub),n=Nr(r);return(0,Vt.jsx)("div",{style:{borderRadius:"100%",background:r,color:n,width:Q(24),height:Q(24),display:"flex",justifyContent:"center",alignItems:"center",fontSize:Q(13),fontWeight:"bold"},children:(0,Vt.jsx)("span",{children:a})})}x();var rl=P(G(),1),tl=P(G(),1),rt=P(G(),1),Z=P(G(),1),il=P(mi(),1),at=P(G(),1),Je=P(G(),1),B=P(G(),1);var pr=P(j(),1),Ge=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ge||{});function al(){let e=(0,rl.useRef)(0);return _i("keydown",a=>{a.key==="Tab"&&(e.current=a.shiftKey?1:0)},!0),e}function ad(e,a,r,n){let c=ba(r);(0,tl.useEffect)(()=>{e=e??window;function d(t){c.current(t)}return e.addEventListener(a,d,n),()=>e.removeEventListener(a,d,n)},[e,a,n])}function td(e){let a=J(e),r=(0,rt.useRef)(!1);(0,rt.useEffect)(()=>(r.current=!1,()=>{r.current=!0,Pi(()=>{r.current&&a()})}),[a])}var id=(0,at.createContext)(!1);function nd(){return(0,at.useContext)(id)}function od(e){let a=nd(),r=(0,Z.useContext)(nl),n=kr(e),[c,d]=(0,Z.useState)(()=>{if(!a&&r!==null||ft.isServer)return null;let t=n?.getElementById("headlessui-portal-root");if(t)return t;if(n===null)return null;let i=n.createElement("div");return i.setAttribute("id","headlessui-portal-root"),n.body.appendChild(i)});return(0,Z.useEffect)(()=>{c!==null&&(n!=null&&n.body.contains(c)||n==null||n.body.appendChild(c))},[c,n]),(0,Z.useEffect)(()=>{a||r!==null&&d(r.current)},[r,d,a]),c}var ld=Z.Fragment;function sd(e,a){let r=e,n=(0,Z.useRef)(null),c=be(pt(o=>{n.current=o}),a),d=kr(n),t=od(n),[i]=(0,Z.useState)(()=>{var o;return ft.isServer?null:(o=d?.createElement("div"))!=null?o:null}),l=(0,Z.useContext)($t),s=Di();return xr(()=>{!t||!i||t.contains(i)||(i.setAttribute("data-headlessui-portal",""),t.appendChild(i))},[t,i]),xr(()=>{if(i&&l)return l.register(i)},[l,i]),td(()=>{var o;!t||!i||(i instanceof Node&&t.contains(i)&&t.removeChild(i),t.childNodes.length<=0&&((o=t.parentElement)==null||o.removeChild(t)))}),s?!t||!i?null:(0,il.createPortal)(we({ourProps:{ref:c},theirProps:r,defaultTag:ld,name:"Portal"}),i):null}var dd=Z.Fragment,nl=(0,Z.createContext)(null);function cd(e,a){let{target:r,...n}=e,c={ref:be(a)};return Z.default.createElement(nl.Provider,{value:r},we({ourProps:c,theirProps:n,defaultTag:dd,name:"Popover.Group"}))}var $t=(0,Z.createContext)(null);function ud(){let e=(0,Z.useContext)($t),a=(0,Z.useRef)([]),r=J(d=>(a.current.push(d),e&&e.register(d),()=>n(d))),n=J(d=>{let t=a.current.indexOf(d);t!==-1&&a.current.splice(t,1),e&&e.unregister(d)}),c=(0,Z.useMemo)(()=>({register:r,unregister:n,portals:a}),[r,n,a]);return[a,(0,Z.useMemo)(()=>function({children:d}){return Z.default.createElement($t.Provider,{value:c},d)},[c])]}var md=Te(sd),hd=Te(cd),Op=Object.assign(md,{Group:hd});function fd({defaultContainers:e=[],portals:a,mainTreeNodeRef:r}={}){var n;let c=(0,Je.useRef)((n=r?.current)!=null?n:null),d=kr(c),t=J(()=>{var i;let l=[];for(let s of e)s!==null&&(s instanceof HTMLElement?l.push(s):"current"in s&&s.current instanceof HTMLElement&&l.push(s.current));if(a!=null&&a.current)for(let s of a.current)l.push(s);for(let s of(i=d?.querySelectorAll("html > *, body > *"))!=null?i:[])s!==document.body&&s!==document.head&&s instanceof HTMLElement&&s.id!=="headlessui-portal-root"&&(s.contains(c.current)||l.some(o=>s.contains(o))||l.push(s));return l});return{resolveContainers:t,contains:J(i=>t().some(l=>l.contains(i))),mainTreeNodeRef:c,MainTreeNode:(0,Je.useMemo)(()=>function(){return r!=null?null:Je.default.createElement(ar,{features:rr.Hidden,ref:c})},[c,r])}}function pd(){let e=(0,Je.useRef)(null);return{mainTreeNodeRef:e,MainTreeNode:(0,Je.useMemo)(()=>function(){return Je.default.createElement(ar,{features:rr.Hidden,ref:e})},[e])}}var gd=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(gd||{}),vd=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(vd||{}),bd={0:e=>{let a={...e,popoverState:Xe(e.popoverState,{0:1,1:0})};return a.popoverState===0&&(a.__demoMode=!1),a},1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,a){return e.button===a.button?e:{...e,button:a.button}},3(e,a){return e.buttonId===a.buttonId?e:{...e,buttonId:a.buttonId}},4(e,a){return e.panel===a.panel?e:{...e,panel:a.panel}},5(e,a){return e.panelId===a.panelId?e:{...e,panelId:a.panelId}}},Wt=(0,B.createContext)(null);Wt.displayName="PopoverContext";function tt(e){let a=(0,B.useContext)(Wt);if(a===null){let r=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,tt),r}return a}var qt=(0,B.createContext)(null);qt.displayName="PopoverAPIContext";function Gt(e){let a=(0,B.useContext)(qt);if(a===null){let r=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Gt),r}return a}var Jt=(0,B.createContext)(null);Jt.displayName="PopoverGroupContext";function ol(){return(0,B.useContext)(Jt)}var it=(0,B.createContext)(null);it.displayName="PopoverPanelContext";function wd(){return(0,B.useContext)(it)}function yd(e,a){return Xe(a.type,bd,e,a)}var xd="div";function kd(e,a){var r;let{__demoMode:n=!1,...c}=e,d=(0,B.useRef)(null),t=be(a,pt(H=>{d.current=H})),i=(0,B.useRef)([]),l=(0,B.useReducer)(yd,{__demoMode:n,popoverState:n?0:1,buttons:i,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:(0,B.createRef)(),afterPanelSentinel:(0,B.createRef)()}),[{popoverState:s,button:o,buttonId:u,panel:m,panelId:h,beforePanelSentinel:f,afterPanelSentinel:p},g]=l,y=kr((r=d.current)!=null?r:o),k=(0,B.useMemo)(()=>{if(!o||!m)return!1;for(let Se of document.querySelectorAll("body > *"))if(Number(Se?.contains(o))^Number(Se?.contains(m)))return!0;let H=xa(),O=H.indexOf(o),ae=(O+H.length-1)%H.length,X=(O+1)%H.length,ve=H[ae],ue=H[X];return!m.contains(ve)&&!m.contains(ue)},[o,m]),T=ba(u),D=ba(h),R=(0,B.useMemo)(()=>({buttonId:T,panelId:D,close:()=>g({type:1})}),[T,D,g]),_=ol(),w=_?.registerPopover,v=J(()=>{var H;return(H=_?.isFocusWithinPopoverGroup())!=null?H:y?.activeElement&&(o?.contains(y.activeElement)||m?.contains(y.activeElement))});(0,B.useEffect)(()=>w?.(R),[w,R]);let[b,I]=ud(),E=fd({mainTreeNodeRef:_?.mainTreeNodeRef,portals:b,defaultContainers:[o,m]});ad(y?.defaultView,"focus",H=>{var O,ae,X,ve;H.target!==window&&H.target instanceof HTMLElement&&s===0&&(v()||o&&m&&(E.contains(H.target)||(ae=(O=f.current)==null?void 0:O.contains)!=null&&ae.call(O,H.target)||(ve=(X=p.current)==null?void 0:X.contains)!=null&&ve.call(X,H.target)||g({type:1})))},!0),Li(E.resolveContainers,(H,O)=>{g({type:1}),Mi(O,Ci.Loose)||(H.preventDefault(),o?.focus())},s===0);let S=J(H=>{g({type:1});let O=H?H instanceof HTMLElement?H:"current"in H&&H.current instanceof HTMLElement?H.current:o:o;O?.focus()}),F=(0,B.useMemo)(()=>({close:S,isPortalled:k}),[S,k]),C=(0,B.useMemo)(()=>({open:s===0,close:S}),[s,S]),U={ref:t};return B.default.createElement(it.Provider,{value:null},B.default.createElement(Wt.Provider,{value:l},B.default.createElement(qt.Provider,{value:F},B.default.createElement(Bi,{value:Xe(s,{0:Ir.Open,1:Ir.Closed})},B.default.createElement(I,null,we({ourProps:U,theirProps:c,slot:C,defaultTag:xd,name:"Popover"}),B.default.createElement(E.MainTreeNode,null))))))}var Id="button";function Sd(e,a){let r=Re(),{id:n=`headlessui-popover-button-${r}`,...c}=e,[d,t]=tt("Popover.Button"),{isPortalled:i}=Gt("Popover.Button"),l=(0,B.useRef)(null),s=`headlessui-focus-sentinel-${Re()}`,o=ol(),u=o?.closeOthers,m=wd()!==null;(0,B.useEffect)(()=>{if(!m)return t({type:3,buttonId:n}),()=>{t({type:3,buttonId:null})}},[m,n,t]);let[h]=(0,B.useState)(()=>Symbol()),f=be(l,a,m?null:E=>{if(E)d.buttons.current.push(h);else{let S=d.buttons.current.indexOf(h);S!==-1&&d.buttons.current.splice(S,1)}d.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),E&&t({type:2,button:E})}),p=be(l,a),g=kr(l),y=J(E=>{var S,F,C;if(m){if(d.popoverState===1)return;switch(E.key){case Ce.Space:case Ce.Enter:E.preventDefault(),(F=(S=E.target).click)==null||F.call(S),t({type:1}),(C=d.button)==null||C.focus();break}}else switch(E.key){case Ce.Space:case Ce.Enter:E.preventDefault(),E.stopPropagation(),d.popoverState===1&&u?.(d.buttonId),t({type:0});break;case Ce.Escape:if(d.popoverState!==0)return u?.(d.buttonId);if(!l.current||g!=null&&g.activeElement&&!l.current.contains(g.activeElement))return;E.preventDefault(),E.stopPropagation(),t({type:1});break}}),k=J(E=>{m||E.key===Ce.Space&&E.preventDefault()}),T=J(E=>{var S,F;qr(E.currentTarget)||e.disabled||(m?(t({type:1}),(S=d.button)==null||S.focus()):(E.preventDefault(),E.stopPropagation(),d.popoverState===1&&u?.(d.buttonId),t({type:0}),(F=d.button)==null||F.focus()))}),D=J(E=>{E.preventDefault(),E.stopPropagation()}),R=d.popoverState===0,_=(0,B.useMemo)(()=>({open:R}),[R]),w=wa(e,l),v=m?{ref:p,type:w,onKeyDown:y,onClick:T}:{ref:f,id:d.buttonId,type:w,"aria-expanded":d.popoverState===0,"aria-controls":d.panel?d.panelId:void 0,onKeyDown:y,onKeyUp:k,onClick:T,onMouseDown:D},b=al(),I=J(()=>{let E=d.panel;if(!E)return;function S(){Xe(b.current,{[Ge.Forwards]:()=>Qe(E,Ke.First),[Ge.Backwards]:()=>Qe(E,Ke.Last)})===ya.Error&&Qe(xa().filter(F=>F.dataset.headlessuiFocusGuard!=="true"),Xe(b.current,{[Ge.Forwards]:Ke.Next,[Ge.Backwards]:Ke.Previous}),{relativeTo:d.button})}S()});return B.default.createElement(B.default.Fragment,null,we({ourProps:v,theirProps:c,slot:_,defaultTag:Id,name:"Popover.Button"}),R&&!m&&i&&B.default.createElement(ar,{id:s,features:rr.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:I}))}var Ed="div",Td=Wr.RenderStrategy|Wr.Static;function Pd(e,a){let r=Re(),{id:n=`headlessui-popover-overlay-${r}`,...c}=e,[{popoverState:d},t]=tt("Popover.Overlay"),i=be(a),l=gt(),s=l!==null?(l&Ir.Open)===Ir.Open:d===0,o=J(m=>{if(qr(m.currentTarget))return m.preventDefault();t({type:1})}),u=(0,B.useMemo)(()=>({open:d===0}),[d]);return we({ourProps:{ref:i,id:n,"aria-hidden":!0,onClick:o},theirProps:c,slot:u,defaultTag:Ed,features:Td,visible:s,name:"Popover.Overlay"})}var Dd="div",Fd=Wr.RenderStrategy|Wr.Static;function Rd(e,a){let r=Re(),{id:n=`headlessui-popover-panel-${r}`,focus:c=!1,...d}=e,[t,i]=tt("Popover.Panel"),{close:l,isPortalled:s}=Gt("Popover.Panel"),o=`headlessui-focus-sentinel-before-${Re()}`,u=`headlessui-focus-sentinel-after-${Re()}`,m=(0,B.useRef)(null),h=be(m,a,w=>{i({type:4,panel:w})}),f=kr(m);xr(()=>(i({type:5,panelId:n}),()=>{i({type:5,panelId:null})}),[n,i]);let p=gt(),g=p!==null?(p&Ir.Open)===Ir.Open:t.popoverState===0,y=J(w=>{var v;switch(w.key){case Ce.Escape:if(t.popoverState!==0||!m.current||f!=null&&f.activeElement&&!m.current.contains(f.activeElement))return;w.preventDefault(),w.stopPropagation(),i({type:1}),(v=t.button)==null||v.focus();break}});(0,B.useEffect)(()=>{var w;e.static||t.popoverState===1&&((w=e.unmount)==null||w)&&i({type:4,panel:null})},[t.popoverState,e.unmount,e.static,i]),(0,B.useEffect)(()=>{if(t.__demoMode||!c||t.popoverState!==0||!m.current)return;let w=f?.activeElement;m.current.contains(w)||Qe(m.current,Ke.First)},[t.__demoMode,c,m,t.popoverState]);let k=(0,B.useMemo)(()=>({open:t.popoverState===0,close:l}),[t,l]),T={ref:h,id:n,onKeyDown:y,onBlur:c&&t.popoverState===0?w=>{var v,b,I,E,S;let F=w.relatedTarget;F&&m.current&&((v=m.current)!=null&&v.contains(F)||(i({type:1}),((I=(b=t.beforePanelSentinel.current)==null?void 0:b.contains)!=null&&I.call(b,F)||(S=(E=t.afterPanelSentinel.current)==null?void 0:E.contains)!=null&&S.call(E,F))&&F.focus({preventScroll:!0})))}:void 0,tabIndex:-1},D=al(),R=J(()=>{let w=m.current;if(!w)return;function v(){Xe(D.current,{[Ge.Forwards]:()=>{var b;Qe(w,Ke.First)===ya.Error&&((b=t.afterPanelSentinel.current)==null||b.focus())},[Ge.Backwards]:()=>{var b;(b=t.button)==null||b.focus({preventScroll:!0})}})}v()}),_=J(()=>{let w=m.current;if(!w)return;function v(){Xe(D.current,{[Ge.Forwards]:()=>{var b;if(!t.button)return;let I=xa(),E=I.indexOf(t.button),S=I.slice(0,E+1),F=[...I.slice(E+1),...S];for(let C of F.slice())if(C.dataset.headlessuiFocusGuard==="true"||(b=t.panel)!=null&&b.contains(C)){let U=F.indexOf(C);U!==-1&&F.splice(U,1)}Qe(F,Ke.First,{sorted:!1})},[Ge.Backwards]:()=>{var b;Qe(w,Ke.Previous)===ya.Error&&((b=t.button)==null||b.focus())}})}v()});return B.default.createElement(it.Provider,{value:n},g&&s&&B.default.createElement(ar,{id:o,ref:t.beforePanelSentinel,features:rr.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:R}),we({ourProps:T,theirProps:d,slot:k,defaultTag:Dd,features:Fd,visible:g,name:"Popover.Panel"}),g&&s&&B.default.createElement(ar,{id:u,ref:t.afterPanelSentinel,features:rr.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:_}))}var Cd="div";function Md(e,a){let r=(0,B.useRef)(null),n=be(r,a),[c,d]=(0,B.useState)([]),t=pd(),i=J(p=>{d(g=>{let y=g.indexOf(p);if(y!==-1){let k=g.slice();return k.splice(y,1),k}return g})}),l=J(p=>(d(g=>[...g,p]),()=>i(p))),s=J(()=>{var p;let g=Ri(r);if(!g)return!1;let y=g.activeElement;return(p=r.current)!=null&&p.contains(y)?!0:c.some(k=>{var T,D;return((T=g.getElementById(k.buttonId.current))==null?void 0:T.contains(y))||((D=g.getElementById(k.panelId.current))==null?void 0:D.contains(y))})}),o=J(p=>{for(let g of c)g.buttonId.current!==p&&g.close()}),u=(0,B.useMemo)(()=>({registerPopover:l,unregisterPopover:i,isFocusWithinPopoverGroup:s,closeOthers:o,mainTreeNodeRef:t.mainTreeNodeRef}),[l,i,s,o,t.mainTreeNodeRef]),m=(0,B.useMemo)(()=>({}),[]),h=e,f={ref:n};return B.default.createElement(Jt.Provider,{value:u},we({ourProps:f,theirProps:h,slot:m,defaultTag:Cd,name:"Popover.Group"}),B.default.createElement(t.MainTreeNode,null))}var _d=Te(kd),Ld=Te(Sd),Bd=Te(Pd),zd=Te(Rd),Ad=Te(Md),Kt=Object.assign(_d,{Button:Ld,Overlay:Bd,Panel:zd,Group:Ad}),Nd={root:"alinea-PopoverMenu",trigger:"alinea-PopoverMenu-trigger",items:"alinea-PopoverMenu-items","is-left":"alinea-PopoverMenu-is-left",isLeft:"alinea-PopoverMenu-is-left","is-right":"alinea-PopoverMenu-is-right",isRight:"alinea-PopoverMenu-is-right",header:"alinea-PopoverMenu-header",footer:"alinea-PopoverMenu-footer"},da=V(Nd),Ae;(e=>{function a(d){return(0,pr.jsx)(Kt,{children:(0,pr.jsx)("div",{...d,className:da.root.mergeProps(d)()})})}e.Root=a,e.Trigger=da.trigger.toElement(Kt.Button);function r({left:d,right:t,...i}){return(0,pr.jsx)(Kt.Panel,{...i,className:da.items.mergeProps(i)({left:d,right:t})})}e.Items=r;function n({children:d}){return(0,pr.jsx)("div",{className:da.header(),children:(0,pr.jsx)("header",{children:d})})}e.Header=n;function c({children:d}){return(0,pr.jsx)("div",{className:da.footer(),children:(0,pr.jsx)("footer",{children:d})})}e.Footer=c})(Ae||(Ae={}));x();var Zt=P(j(),1);function ll(e){return(0,Zt.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Zt.jsx)("path",{fill:"currentColor",d:"M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 21H7v-1h10v1zm0-3H7V6h10v12zm0-14H7V3h10v1zM9.5 8.5H12V7H8v4h1.5V8.5zM12 17h4v-4h-1.5v2.5H12V17z"})})}x();var Yt=P(j(),1);function nt(e){return(0,Yt.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Yt.jsx)("path",{fill:"currentColor",d:"M20 15.31L23.31 12L20 8.69V4h-4.69L12 .69L8.69 4H4v4.69L.69 12L4 15.31V20h4.69L12 23.31L15.31 20H20v-4.69zM12 18V6c3.31 0 6 2.69 6 6s-2.69 6-6 6z"})})}x();var sl=te(e=>{let{color:a}=e(Lr);return a});x();var Xt=P(j(),1);function dl(e){return(0,Xt.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,Xt.jsx)("path",{d:"M15.9814 3.47727V5.07955C14.8773 3.78409 13.2379 3 10.9963 3C6.61338 3 3 6.92045 3 12C3 17.0795 6.61338 21 10.9963 21C13.2379 21 14.8773 20.2159 15.9814 18.9205V20.5227H21V3.47727H15.9814ZM12 16.1591C9.69145 16.1591 8.01859 14.5568 8.01859 12C8.01859 9.44318 9.69145 7.84091 12 7.84091C14.3086 7.84091 15.9814 9.44318 15.9814 12C15.9814 14.5568 14.3086 16.1591 12 16.1591Z",fill:"currentColor"})})}var A=P(j(),1),jd={root:"alinea-Toolbar","root-menu":"alinea-Toolbar-menu",rootMenu:"alinea-Toolbar-menu","root-portal":"alinea-Toolbar-portal",rootPortal:"alinea-Toolbar-portal","root-portal-slot":"alinea-Toolbar-portal-slot",rootPortalSlot:"alinea-Toolbar-portal-slot","root-switch":"alinea-Toolbar-switch",rootSwitch:"alinea-Toolbar-switch","is-checked":"alinea-Toolbar-is-checked",isChecked:"alinea-Toolbar-is-checked","root-switch-slider":"alinea-Toolbar-switch-slider",rootSwitchSlider:"alinea-Toolbar-switch-slider","root-workspace":"alinea-Toolbar-workspace",rootWorkspace:"alinea-Toolbar-workspace"},Rr=V(jd);function Qt({label:e,color:a,icon:r}){let n=r?(0,A.jsx)(r,{}):(0,A.jsx)(nn,{});return(0,A.jsxs)($,{center:!0,gap:12,children:[(0,A.jsx)(bi,{foreground:Ma(a),background:a,children:(0,A.jsx)(dl,{})}),(0,A.jsx)("div",{style:{fontSize:"13px",fontWeight:600},children:(0,A.jsx)(wr,{label:e})})]})}var ot;(e=>{({Provider:e.Provider,Portal:e.Portal,Slot:e.Slot}=Ca());function a(){let r=N(sl),n=Ra(),{config:c}=N(fa),d=N(en),t=N(_r),i=t.size||16,l=t?.scheme==="dark",s=N(Lr),o=xe(),{isNavOpen:u,isPreviewOpen:m,toggleNav:h,togglePreview:f}=_a(),p=Object.entries(c.workspaces),[g,y,k]=tn(r),T={"--alinea-hue":g,"--alinea-saturation":`${y*100}%`,"--alinea-lightness":`${k*100}%`},D=Ar("Default workspace",Mr(Ue(c.workspaces).map(([v,b])=>[v,$r.label(b)||v]))),R=ie(Gr),_=ie(Zr),w=ie(Jr);return(0,A.jsxs)($,{center:!0,gap:12,className:Rr.root(),style:T,children:[(0,A.jsx)("div",{className:Rr.root.menu(),onClick:h,children:(0,A.jsx)(_e,{icon:Oi,active:u})}),p.length>1?(0,A.jsxs)(ye.Root,{bottom:!0,children:[(0,A.jsx)(ye.Trigger,{children:(0,A.jsxs)($,{center:!0,gap:4,children:[(0,A.jsx)(Qt,{label:s.label,color:s.color,icon:s.icon}),(0,A.jsx)(q,{icon:Ui})]})}),(0,A.jsx)(ye.Items,{children:p.map(([v,b])=>{let{roots:I,label:E,color:S,icon:F}=$r.data(b),[C,U]=Ue(I)[0];return(0,A.jsx)(ye.Item,{onClick:()=>o(d.entry({workspace:v,root:C,locale:ga.defaultLocale(U)})),children:(0,A.jsx)(Qt,{label:E,color:S,icon:F})},v)})})]}):(0,A.jsx)("a",{...Pa(d.root({workspace:s.name})),className:Rr.root.workspace(),children:(0,A.jsx)(Qt,{label:s.label,color:s.color,icon:s.icon})}),(0,A.jsx)("div",{className:Rr.root.portal(),children:(0,A.jsx)(e.Portal,{className:Rr.root.portal.slot()})}),(0,A.jsx)("div",{children:(0,A.jsxs)($,{center:!0,gap:10,children:[(0,A.jsxs)(Ae.Root,{children:[(0,A.jsx)(Ae.Trigger,{children:(0,A.jsxs)($,{center:!0,gap:4,children:[(0,A.jsx)(el,{user:n.user}),(0,A.jsx)(Tr,{})]})}),(0,A.jsx)(Ae.Items,{right:!0,children:(0,A.jsxs)(me,{gap:25,children:[Br.hasAuth(c)&&(0,A.jsx)(Ae.Header,{children:(0,A.jsx)("p",{children:n.user.sub.charAt(0).toUpperCase()+n.user.sub.slice(1)})}),(0,A.jsx)(me,{gap:15,children:(0,A.jsxs)($,{justify:"space-between",style:{padding:Q(6)},children:[(0,A.jsxs)($,{center:!0,gap:16,children:[(0,A.jsx)(q,{icon:nt,size:20}),(0,A.jsx)(et,{checked:l,onChange:R,className:Rr.root.switch({checked:l}),children:(0,A.jsx)("span",{className:Rr.root.switch.slider({checked:l})})})]}),(0,A.jsxs)($,{center:!0,gap:4,children:[(0,A.jsx)(q,{icon:Aa,size:20,style:{marginRight:Q(12)}}),(0,A.jsx)(_e,{icon:Tr,onClick:()=>_(i-1),disabled:i<=16}),(0,A.jsx)(_e,{icon:La,onClick:()=>_(i+1),disabled:i>=40})]})]})}),Br.hasAuth(c)&&(0,A.jsx)(Ae.Footer,{children:(0,A.jsx)(ye.Root,{children:(0,A.jsx)(ye.Item,{onClick:n.end,children:"Logout"})})})]})})]}),(0,A.jsx)(_e,{icon:ll,onClick:f,active:m})]})})]})}e.Root=a})(ot||(ot={}));x();var ca=P(G(),1);x();var cl=()=>N(_r);var hl=P(j(),1),Od={root:"alinea-Viewport","is-light":"alinea-Viewport-is-light",isLight:"alinea-Viewport-is-light","is-dark":"alinea-Viewport-is-dark",isDark:"alinea-Viewport-is-dark",main:"alinea-Viewport-main","is-contain":"alinea-Viewport-is-contain",isContain:"alinea-Viewport-is-contain"},ul=V(Od),ml=typeof window<"u"?ca.useLayoutEffect:ca.useEffect;function fl({children:e,color:a="#6673FC",contain:r,attachToBody:n,...c}){let d=a,t=Nr(d),{scheme:i,size:l}=cl();(0,ca.useEffect)(()=>{l&&(document.documentElement.style.fontSize=`${l}px`)},[l]);let s={"--alinea-accent":d,"--alinea-accent-foreground":t},o=ul.root(i),u=Object.entries(s).map(([h,f])=>`${h}: ${f}`).join("; ");return ml(()=>{n&&(document.body.className=o,document.body.style.cssText=u)},[n,u,o]),ml(()=>{let h=document.createElement("meta");return h.setAttribute("content",d),h.setAttribute("name","theme-color"),document.head.appendChild(h),()=>{document.head.removeChild(h)}},[d]),(0,hl.jsx)("main",{...n?{}:{className:o,style:s},className:ul.main.mergeProps(c)({contain:r}),children:e})}x();x();var ei=P(j(),1);function ri(e){return(0,ei.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",...e,children:(0,ei.jsx)("path",{fill:"currentColor",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 14c-2.03 0-4.43-.82-6.14-2.88a9.947 9.947 0 0 1 12.28 0C16.43 19.18 14.03 20 12 20z"})})}var pl=P(G(),1);var Y=P(j(),1),Hd={"root-switch":"alinea-SidebarSettings-switch",rootSwitch:"alinea-SidebarSettings-switch","is-checked":"alinea-SidebarSettings-is-checked",isChecked:"alinea-SidebarSettings-is-checked","root-switch-slider":"alinea-SidebarSettings-switch-slider",rootSwitchSlider:"alinea-SidebarSettings-switch-slider","root-username":"alinea-SidebarSettings-username",rootUsername:"alinea-SidebarSettings-username"},ai=V(Hd);function gl(){let e=Ra(),{config:a}=N(fa),r=N(_r),n=r.size||16,c=r?.scheme==="dark",d=Object.entries(a.workspaces),t=(0,pl.useMemo)(()=>Ar("Default workspace",Mr(Ue(a.workspaces).map(([u,m])=>[u,$r.label(m)||u]))),[a.workspaces]),i=ie(Gr),l=ie(Zr),s=ie(Jr);function o(u){document.body.setAttribute("data-disable-transition","true"),u(),setTimeout(()=>document.body.removeAttribute("data-disable-transition"))}return(0,Y.jsxs)(ye.Root,{top:!0,style:{margin:"auto",marginBottom:0},children:[(0,Y.jsx)(ye.Trigger,{style:{width:"100%"},children:(0,Y.jsx)(Pe.Nav.Item,{"aria-label":"Settings",children:(0,Y.jsx)(q,{icon:ri})})}),(0,Y.jsx)(ye.Items,{style:{maxWidth:Q(200)},children:(0,Y.jsxs)(me,{gap:10,children:[e.user.name&&(0,Y.jsx)(Ae.Header,{children:(0,Y.jsxs)($,{center:!0,gap:10,className:ai.root.username(),children:[(0,Y.jsx)(q,{icon:ri,size:26}),(0,Y.jsx)(Ba,{children:e.user.name})]})}),(0,Y.jsx)(me,{gap:8,children:(0,Y.jsxs)($,{justify:"space-between",style:{padding:Q(6)},children:[(0,Y.jsxs)($,{center:!0,gap:16,children:[(0,Y.jsx)(q,{icon:nt,size:20,title:"Switch theme"}),(0,Y.jsx)(et,{checked:c,onChange:()=>{o(i)},className:ai.root.switch({checked:c}),children:(0,Y.jsx)("span",{className:ai.root.switch.slider({checked:c})})})]}),(0,Y.jsxs)($,{center:!0,gap:4,children:[(0,Y.jsx)(q,{icon:Aa,size:20,style:{marginRight:Q(12)},title:"Font size"}),(0,Y.jsx)(_e,{icon:Tr,onClick:()=>o(()=>l(n-1)),disabled:n<=16,title:"Decrease font size"}),(0,Y.jsx)(_e,{icon:La,onClick:()=>o(()=>l(n+1)),disabled:n>=40,title:"Increase font size"})]})]})}),e.end&&(0,Y.jsx)(Ae.Footer,{children:(0,Y.jsx)(ye.Root,{children:(0,Y.jsx)(ye.Item,{onClick:e.end,children:"Logout"})})})]})})]})}var K=P(j(),1),Ud=te(e=>{let a=e(Sr);return!!e(Ta({route:Yi.matchEntry}))||a.pathname==="/"});function Vd(){Gi();let{alineaDev:e,fullPage:a}=vr(),r=ce(),n=N(Ud),{name:c,color:d,roots:t}=Oe(),{name:i}=je(),l=an(),s=Me(),[o,u]=rn(),[m,h]=Ur(Ji),f=N(qi);return(0,vl.useEffect)(()=>{u(s)},[s]),(0,K.jsxs)(K.Fragment,{children:[m&&(0,K.jsx)(zr,{open:!0,onClose:()=>h(null),children:(0,K.jsx)("div",{style:{padding:Q(16)},children:m})}),(0,K.jsx)(ne.Provider,{children:(0,K.jsx)(ot.Provider,{children:(0,K.jsxs)(Pe.Provider,{children:[(0,K.jsx)(Vr,{children:(0,K.jsx)(Pt,{color:d})}),(0,K.jsxs)("div",{style:{flex:"1",display:"flex",minHeight:0,position:"relative"},children:[(0,K.jsxs)(Pe.Nav,{children:[Object.entries(t).map(([p,g],y)=>{let k=p===i,{entryId:T,...D}=l,R=D.root===p?r.entry(D):r.root({workspace:c,root:p,locale:o}),{label:_,icon:w}=ga.data(g);return(0,K.jsx)(Pe.Nav.Item,{selected:n&&k,href:R,"aria-label":_,children:(0,K.jsx)(q,{icon:w??Ua})},p)}),(0,K.jsx)(gl,{})]}),(0,K.jsx)(gn,{children:(0,K.jsx)(nr,{name:"main",fallback:(0,K.jsx)(he,{absolute:!0}),children:(0,K.jsx)(ao,{fallback:null})})})]}),e&&(0,K.jsx)(ne.Root,{children:(0,K.jsx)(ne.Status,{icon:Jn,children:f})})]})})})]})}function Kd(){let[e,a]=Ur(fi),{fullPage:r,config:n}=vr(),{color:c}=Br.mainWorkspace(n),d=n.dashboard?.auth;return e?(0,K.jsx)(K.Fragment,{children:(0,K.jsx)(nr,{name:"router",fallback:(0,K.jsx)(he,{absolute:!0}),children:(0,K.jsx)(Qn,{router:Jo,children:(0,K.jsx)(Vd,{})})})}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(Vr,{children:(0,K.jsx)(Pt,{color:c})}),d&&(0,K.jsx)(nr,{name:"auth",fallback:(0,K.jsx)(he,{absolute:!0}),children:(0,K.jsx)(d,{setSession:a})})]})}function bl(e){let a=e.fullPage!==!1,{color:r}=Br.mainWorkspace(e.config);return(0,K.jsx)(Zn,{...e,children:(0,K.jsx)(fl,{attachToBody:a,contain:!0,color:r,children:(0,K.jsx)(Kd,{})})})}var Il=P(j(),1);x();var xl=P(yl(),1);function kl(e,a){let r=(0,xl.createRoot)(a);return r.render(e),()=>r.unmount()}async function ov(e){let a=document.getElementsByTagName("script"),r=a[a.length-1],n=document.createElement("div");n.id="root",r.parentElement.replaceChild(n,r);let c=await $d(),d=new ui({config:c,url:e});kl((0,Il.jsx)(bl,{config:c,client:d}),n)}async function $d(){let a=await import("./config.js?"+Math.random());if("cms"in a)return a.cms.config;if("config"in a)return a.config;throw new Error('No config found in "/config.js"')}export{ov as boot};
